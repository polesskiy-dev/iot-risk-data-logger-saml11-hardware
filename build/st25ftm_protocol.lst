ARM GAS  /tmp/ccC3QsLC.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"st25ftm_protocol.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.ST25FTM_Init,"ax",%progbits
  18              		.align	1
  19              		.global	ST25FTM_Init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	ST25FTM_Init:
  27              	.LFB135:
  28              		.file 1 "Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c"
   1:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /**
   2:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ******************************************************************************
   3:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @file    st25ftm_protocol.c
   4:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @author  MMY Application Team
   5:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @version 1.0.0
   6:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @date    29-July-2022
   7:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @brief   Fast Transfer Memory protocol APIs
   8:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ******************************************************************************
   9:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @attention
  10:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   *
  11:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * Copyright (c) 2022 STMicroelectronics.
  12:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * All rights reserved.
  13:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   *
  14:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * This software is licensed under terms that can be found in the LICENSE file
  15:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * in the root directory of this software component.
  16:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  17:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   *
  18:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ******************************************************************************
  19:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
  20:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  21:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include <stdint.h>
  22:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include <stdlib.h>
  23:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include <string.h>
  24:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include "st25ftm_protocol.h"
  25:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include "st25ftm_common.h"
  26:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #include "st25ftm_config.h"
  27:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  28:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #if (ST25FTM_ENABLE_LOG != 0)
  29:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! String version of the FTM Reception state machine for display */
  30:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** const char * ST25FTM_RxState_Str[] = {
ARM GAS  /tmp/ccC3QsLC.s 			page 2


  31:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  32:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_IDLE",
  33:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_CMD",
  34:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_PKT",
  35:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_WRITE_ACK",
  36:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_WRITE_NACK",
  37:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_WRITE_ERR",
  38:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_WAIT_ACK_READ",
  39:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_BUFFER_FULL",
  40:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_DONE",
  41:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ_ERROR"
  42:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** };
  43:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  44:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! String version of the FTM main state machine for display */
  45:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** const char * ST25FTM_State_Str[] = {
  46:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_IDLE",
  47:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE",
  48:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_READ"
  49:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** };
  50:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  51:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! String version of the FTM transmission state machine for display */
  52:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** const char * ST25FTM_TxState_Str[] = {
  53:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_IDLE",
  54:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_CMD",
  55:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_SEGMENT",
  56:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_PKT",
  57:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_WAIT_READ",
  58:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_READ_ACK",
  59:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_DONE",
  60:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   "FTM_WRITE_ERROR",
  61:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** };
  62:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** #endif
  63:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  64:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Initialize the FTM state machines and the NFC device */
  65:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_Init(void)
  66:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
  29              		.loc 1 66 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  67:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ST25FTM_State_Init();
  38              		.loc 1 67 3 view .LVU1
  39 0002 FFF7FEFF 		bl	ST25FTM_State_Init
  40              	.LVL0:
  68:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  69:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   (void)ST25FTM_DeviceInit();
  41              		.loc 1 69 3 view .LVU2
  42 0006 FFF7FEFF 		bl	ST25FTM_DeviceInit
  43              	.LVL1:
  70:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  71:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ST25FTM_UpdateFieldStatus();
  44              		.loc 1 71 3 view .LVU3
ARM GAS  /tmp/ccC3QsLC.s 			page 3


  45 000a FFF7FEFF 		bl	ST25FTM_UpdateFieldStatus
  46              	.LVL2:
  72:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
  47              		.loc 1 72 1 is_stmt 0 view .LVU4
  48 000e 08BD     		pop	{r3, pc}
  49              		.cfi_endproc
  50              	.LFE135:
  52              		.section	.text.ST25FTM_SetTxFrameMaxLength,"ax",%progbits
  53              		.align	1
  54              		.global	ST25FTM_SetTxFrameMaxLength
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  58              		.fpu fpv4-sp-d16
  60              	ST25FTM_SetTxFrameMaxLength:
  61              	.LVL3:
  62              	.LFB136:
  73:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  74:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Register the maximum frame length while transmitting
  75:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  *  @param len Maximum frame length in bytes
  76:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  */
  77:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_SetTxFrameMaxLength(uint32_t len)
  78:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
  63              		.loc 1 78 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  79:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.frameMaxLength = len;
  68              		.loc 1 79 3 view .LVU6
  69              		.loc 1 79 31 is_stmt 0 view .LVU7
  70 0000 014B     		ldr	r3, .L4
  71 0002 D861     		str	r0, [r3, #28]
  80:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
  72              		.loc 1 80 1 view .LVU8
  73 0004 7047     		bx	lr
  74              	.L5:
  75 0006 00BF     		.align	2
  76              	.L4:
  77 0008 00000000 		.word	gFtmState
  78              		.cfi_endproc
  79              	.LFE136:
  81              		.section	.text.ST25FTM_GetTxFrameMaxLength,"ax",%progbits
  82              		.align	1
  83              		.global	ST25FTM_GetTxFrameMaxLength
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv4-sp-d16
  89              	ST25FTM_GetTxFrameMaxLength:
  90              	.LFB137:
  81:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  82:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the maximum frame length while transmitting
  83:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  * @return The maxmum number of bytes per transmitted frame
  84:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  */
  85:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetTxFrameMaxLength(void)
  86:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
ARM GAS  /tmp/ccC3QsLC.s 			page 4


  91              		.loc 1 86 1 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		@ link register save eliminated.
  87:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.tx.frameMaxLength;
  96              		.loc 1 87 3 view .LVU10
  88:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
  97              		.loc 1 88 1 is_stmt 0 view .LVU11
  98 0000 014B     		ldr	r3, .L7
  99 0002 D869     		ldr	r0, [r3, #28]
 100 0004 7047     		bx	lr
 101              	.L8:
 102 0006 00BF     		.align	2
 103              	.L7:
 104 0008 00000000 		.word	gFtmState
 105              		.cfi_endproc
 106              	.LFE137:
 108              		.section	.text.ST25FTM_SetRxFrameMaxLength,"ax",%progbits
 109              		.align	1
 110              		.global	ST25FTM_SetRxFrameMaxLength
 111              		.syntax unified
 112              		.thumb
 113              		.thumb_func
 114              		.fpu fpv4-sp-d16
 116              	ST25FTM_SetRxFrameMaxLength:
 117              	.LVL4:
 118              	.LFB138:
  89:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  90:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Register the maximum frame length while receiving
  91:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  *  @param len Maximum frame length in bytes
  92:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  */
  93:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_SetRxFrameMaxLength(uint32_t len)
  94:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 119              		.loc 1 94 1 is_stmt 1 view -0
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 0
 122              		@ frame_needed = 0, uses_anonymous_args = 0
 123              		@ link register save eliminated.
  95:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.frameMaxLength = len;
 124              		.loc 1 95 3 view .LVU13
 125              		.loc 1 95 31 is_stmt 0 view .LVU14
 126 0000 014B     		ldr	r3, .L10
 127 0002 C3F87001 		str	r0, [r3, #368]
  96:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 128              		.loc 1 96 1 view .LVU15
 129 0006 7047     		bx	lr
 130              	.L11:
 131              		.align	2
 132              	.L10:
 133 0008 00000000 		.word	gFtmState
 134              		.cfi_endproc
 135              	.LFE138:
 137              		.section	.text.ST25FTM_GetRxFrameMaxLength,"ax",%progbits
 138              		.align	1
 139              		.global	ST25FTM_GetRxFrameMaxLength
 140              		.syntax unified
ARM GAS  /tmp/ccC3QsLC.s 			page 5


 141              		.thumb
 142              		.thumb_func
 143              		.fpu fpv4-sp-d16
 145              	ST25FTM_GetRxFrameMaxLength:
 146              	.LFB139:
  97:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
  98:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the maximum frame length while receiving
  99:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  * @return The maxmum number of bytes per received frame
 100:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  */
 101:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetRxFrameMaxLength(void)
 102:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 147              		.loc 1 102 1 is_stmt 1 view -0
 148              		.cfi_startproc
 149              		@ args = 0, pretend = 0, frame = 0
 150              		@ frame_needed = 0, uses_anonymous_args = 0
 151              		@ link register save eliminated.
 103:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.rx.frameMaxLength;
 152              		.loc 1 103 3 view .LVU17
 104:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 153              		.loc 1 104 1 is_stmt 0 view .LVU18
 154 0000 014B     		ldr	r3, .L13
 155 0002 D3F87001 		ldr	r0, [r3, #368]
 156 0006 7047     		bx	lr
 157              	.L14:
 158              		.align	2
 159              	.L13:
 160 0008 00000000 		.word	gFtmState
 161              		.cfi_endproc
 162              	.LFE139:
 164              		.section	.text.ST25FTM_SendCommand,"ax",%progbits
 165              		.align	1
 166              		.global	ST25FTM_SendCommand
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	ST25FTM_SendCommand:
 173              	.LVL5:
 174              	.LFB140:
 105:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 106:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 107:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Initialize a transmission
 108:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param  data Pointer to the data buffer to be transmitted
 109:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param length Number of bytes to be transmitted
 110:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param ack Enables handchecks during the transfer
 111:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param data_cb Optional callback function, called to request data to send (to be set to NULL if
 112:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 113:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_SendCommand(uint8_t* data, uint32_t length, ST25FTM_Send_Ack_t ack, ftm_data_cb data_c
 114:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 175              		.loc 1 114 1 is_stmt 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              		@ link register save eliminated.
 180              		.loc 1 114 1 is_stmt 0 view .LVU20
 181 0000 10B4     		push	{r4}
 182              	.LCFI1:
ARM GAS  /tmp/ccC3QsLC.s 			page 6


 183              		.cfi_def_cfa_offset 4
 184              		.cfi_offset 4, -4
 115:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.cmdPtr = data;
 185              		.loc 1 115 3 is_stmt 1 view .LVU21
 186              		.loc 1 115 23 is_stmt 0 view .LVU22
 187 0002 074C     		ldr	r4, .L17
 188 0004 2061     		str	r0, [r4, #16]
 116:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.cmdLen = length;
 189              		.loc 1 116 3 is_stmt 1 view .LVU23
 190              		.loc 1 116 23 is_stmt 0 view .LVU24
 191 0006 6161     		str	r1, [r4, #20]
 117:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.state = ST25FTM_WRITE_IDLE;
 192              		.loc 1 117 3 is_stmt 1 view .LVU25
 193              		.loc 1 117 22 is_stmt 0 view .LVU26
 194 0008 0021     		movs	r1, #0
 195              	.LVL6:
 196              		.loc 1 117 22 view .LVU27
 197 000a 2173     		strb	r1, [r4, #12]
 118:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.state = ST25FTM_WRITE;
 198              		.loc 1 118 3 is_stmt 1 view .LVU28
 199              		.loc 1 118 19 is_stmt 0 view .LVU29
 200 000c 0121     		movs	r1, #1
 201 000e 2170     		strb	r1, [r4]
 119:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.sendAck = ack;
 202              		.loc 1 119 3 is_stmt 1 view .LVU30
 203              		.loc 1 119 24 is_stmt 0 view .LVU31
 204 0010 84F82520 		strb	r2, [r4, #37]
 120:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.getdata_cb = data_cb;
 205              		.loc 1 120 3 is_stmt 1 view .LVU32
 206              		.loc 1 120 27 is_stmt 0 view .LVU33
 207 0014 C4F85431 		str	r3, [r4, #340]
 121:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 208              		.loc 1 121 1 view .LVU34
 209 0018 5DF8044B 		ldr	r4, [sp], #4
 210              	.LCFI2:
 211              		.cfi_restore 4
 212              		.cfi_def_cfa_offset 0
 213              	.LVL7:
 214              		.loc 1 121 1 view .LVU35
 215 001c 7047     		bx	lr
 216              	.L18:
 217 001e 00BF     		.align	2
 218              	.L17:
 219 0020 00000000 		.word	gFtmState
 220              		.cfi_endproc
 221              	.LFE140:
 223              		.section	.text.ST25FTM_ReceiveCommand,"ax",%progbits
 224              		.align	1
 225              		.global	ST25FTM_ReceiveCommand
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	ST25FTM_ReceiveCommand:
 232              	.LVL8:
 233              	.LFB141:
 122:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
ARM GAS  /tmp/ccC3QsLC.s 			page 7


 123:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 124:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Initialize a reception
 125:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param  data Pointer to the data buffer used for the reception
 126:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param length Pointer to a word defining the maximum number of bytes that can be received.
 127:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****                   This parameter is also used to return the number of bytes actually read
 128:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param ack Enables handchecks during the transfer
 129:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param data_cb Optional callback function, called to write received datad (to be set to NULL if
 130:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 131:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_ReceiveCommand(uint8_t* data, uint32_t *length, ftm_data_cb data_cb)
 132:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 234              		.loc 1 132 1 is_stmt 1 view -0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              		@ link register save eliminated.
 133:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.cmdPtr = data;
 239              		.loc 1 133 3 view .LVU37
 240              		.loc 1 133 23 is_stmt 0 view .LVU38
 241 0000 074B     		ldr	r3, .L20
 242 0002 C3F85C01 		str	r0, [r3, #348]
 134:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.cmdLen = length;
 243              		.loc 1 134 3 is_stmt 1 view .LVU39
 244              		.loc 1 134 23 is_stmt 0 view .LVU40
 245 0006 C3F86011 		str	r1, [r3, #352]
 135:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.maxCmdLen = *length;
 246              		.loc 1 135 3 is_stmt 1 view .LVU41
 247              		.loc 1 135 28 is_stmt 0 view .LVU42
 248 000a 0968     		ldr	r1, [r1]
 249              	.LVL9:
 250              		.loc 1 135 26 view .LVU43
 251 000c C3F86411 		str	r1, [r3, #356]
 136:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.state = ST25FTM_READ_IDLE;
 252              		.loc 1 136 3 is_stmt 1 view .LVU44
 253              		.loc 1 136 22 is_stmt 0 view .LVU45
 254 0010 0021     		movs	r1, #0
 255 0012 83F85811 		strb	r1, [r3, #344]
 137:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.state = ST25FTM_READ;
 256              		.loc 1 137 3 is_stmt 1 view .LVU46
 257              		.loc 1 137 19 is_stmt 0 view .LVU47
 258 0016 0221     		movs	r1, #2
 259 0018 1970     		strb	r1, [r3]
 138:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.recvdata_cb = data_cb;
 260              		.loc 1 138 3 is_stmt 1 view .LVU48
 261              		.loc 1 138 28 is_stmt 0 view .LVU49
 262 001a C3F89821 		str	r2, [r3, #408]
 139:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 263              		.loc 1 139 1 view .LVU50
 264 001e 7047     		bx	lr
 265              	.L21:
 266              		.align	2
 267              	.L20:
 268 0020 00000000 		.word	gFtmState
 269              		.cfi_endproc
 270              	.LFE141:
 272              		.section	.text.ST25FTM_Runner,"ax",%progbits
 273              		.align	1
 274              		.global	ST25FTM_Runner
ARM GAS  /tmp/ccC3QsLC.s 			page 8


 275              		.syntax unified
 276              		.thumb
 277              		.thumb_func
 278              		.fpu fpv4-sp-d16
 280              	ST25FTM_Runner:
 281              	.LFB142:
 140:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 141:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Run the FTM state machine */
 142:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_Runner(void)
 143:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 282              		.loc 1 143 1 is_stmt 1 view -0
 283              		.cfi_startproc
 284              		@ args = 0, pretend = 0, frame = 0
 285              		@ frame_needed = 0, uses_anonymous_args = 0
 286 0000 10B5     		push	{r4, lr}
 287              	.LCFI3:
 288              		.cfi_def_cfa_offset 8
 289              		.cfi_offset 4, -8
 290              		.cfi_offset 14, -4
 144:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   static ST25FTM_Field_State_t lastRfField = ST25FTM_FIELD_OFF;
 291              		.loc 1 144 3 view .LVU52
 145:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state != gFtmState.lastState)
 292              		.loc 1 145 3 view .LVU53
 293              		.loc 1 145 15 is_stmt 0 view .LVU54
 294 0002 334B     		ldr	r3, .L39
 295 0004 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 296              		.loc 1 145 34 view .LVU55
 297 0006 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 298              		.loc 1 145 5 view .LVU56
 299 0008 9A42     		cmp	r2, r3
 300 000a 01D0     		beq	.L23
 146:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 147:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     ST25FTM_LOG("State = %s\r\n",ST25FTM_State_Str[gFtmState.state]);
 301              		.loc 1 147 69 is_stmt 1 view .LVU57
 148:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.lastState = gFtmState.state;
 302              		.loc 1 148 5 view .LVU58
 303              		.loc 1 148 25 is_stmt 0 view .LVU59
 304 000c 304B     		ldr	r3, .L39
 305 000e 5A70     		strb	r2, [r3, #1]
 306              	.L23:
 149:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 150:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 151:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ST25FTM_UpdateFieldStatus();
 307              		.loc 1 151 3 is_stmt 1 view .LVU60
 308 0010 FFF7FEFF 		bl	ST25FTM_UpdateFieldStatus
 309              	.LVL10:
 152:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   /* Do nothing if field is off */
 153:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.rfField == ST25FTM_FIELD_OFF)
 310              		.loc 1 153 3 view .LVU61
 311              		.loc 1 153 15 is_stmt 0 view .LVU62
 312 0014 2E4B     		ldr	r3, .L39
 313 0016 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 314              		.loc 1 153 5 view .LVU63
 315 0018 1BB9     		cbnz	r3, .L24
 154:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 155:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     lastRfField = ST25FTM_FIELD_OFF;
 316              		.loc 1 155 5 is_stmt 1 view .LVU64
ARM GAS  /tmp/ccC3QsLC.s 			page 9


 317              		.loc 1 155 17 is_stmt 0 view .LVU65
 318 001a 2E4B     		ldr	r3, .L39+4
 319 001c 0022     		movs	r2, #0
 320 001e 1A70     		strb	r2, [r3]
 321              	.L22:
 156:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 157:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     /* a field off occured while transmitting, restart at the beg of the segment
 158:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****        We don't know if last packet has been read or not => restart segment */
 159:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     if((lastRfField == ST25FTM_FIELD_OFF) && (gFtmState.rfField == ST25FTM_FIELD_ON))
 160:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       if((gFtmState.state == ST25FTM_WRITE) && (gFtmState.tx.state >= ST25FTM_WRITE_SEGMENT))
 162:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 163:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("FIELD OFF while transmiting, restart segment\r\n");
 164:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentRemainingData=%d\r\n",gFtmState.tx.segmentRemainingData);
 165:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  pktIndex=%d\r\n",gFtmState.tx.pktIndex);
 166:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentPtr=%X\r\n",gFtmState.tx.segmentPtr);
 167:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentIndex=%d\r\n",gFtmState.tx.segmentIndex);
 168:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  state=%s\r\n",ST25FTM_TxState_Str[gFtmState.tx.state]);
 169:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_TxResetSegment();
 170:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("After reset:\r\n");
 171:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentRemainingData=%d\r\n",gFtmState.tx.segmentRemainingData);
 172:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  pktIndex=%d\r\n",gFtmState.tx.pktIndex);
 173:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentPtr=%X\r\n",gFtmState.tx.segmentPtr);
 174:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentIndex=%d\r\n",gFtmState.tx.segmentIndex);
 175:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  state=%s\r\n",ST25FTM_TxState_Str[gFtmState.tx.state]);
 176:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 177:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 178:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 179:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     }
 180:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 181:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     if(gFtmState.state == ST25FTM_WRITE)
 182:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 183:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       if(gFtmState.tx.state != gFtmState.tx.lastState)
 184:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 185:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("TxState = %s\r\n",ST25FTM_TxState_Str[gFtmState.tx.state]);
 186:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.tx.lastState = gFtmState.tx.state;
 187:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 188:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 189:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       if((ST25FTM_CompareTime(ST25FTM_TICK(),gFtmState.lastTick) > ST25FTM_WAIT_TIMEOUT)
 190:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****          && (gFtmState.tx.state == ST25FTM_WRITE_READ_ACK))
 191:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 192:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         /* a timeout occured while waiting for the RF to read packet or write a ack
 193:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****            reset segment transmission */
 194:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("Timeout while transmitting, restart segment\r\n");
 195:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_TxResetSegment();
 196:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 197:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 198:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       ST25FTM_Transmit();
 199:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     } else if (gFtmState.state == ST25FTM_READ)
 200:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 201:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       if(gFtmState.rx.state != gFtmState.rx.lastState)
 202:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 203:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("RxState = %s\r\n",ST25FTM_RxState_Str[gFtmState.rx.state]);
 204:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.rx.lastState = gFtmState.rx.state;
 205:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 206:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 207:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       ST25FTM_Receive();
ARM GAS  /tmp/ccC3QsLC.s 			page 10


 208:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     } else {
 209:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       /* do nothing */
 210:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     }
 211:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     lastRfField = gFtmState.rfField;
 212:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 213:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 322              		.loc 1 213 1 view .LVU66
 323 0020 10BD     		pop	{r4, pc}
 324              	.L24:
 159:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 325              		.loc 1 159 5 is_stmt 1 view .LVU67
 159:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 326              		.loc 1 159 21 is_stmt 0 view .LVU68
 327 0022 2C4A     		ldr	r2, .L39+4
 328 0024 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 159:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 329              		.loc 1 159 7 view .LVU69
 330 0026 0AB9     		cbnz	r2, .L26
 159:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 331              		.loc 1 159 43 discriminator 1 view .LVU70
 332 0028 012B     		cmp	r3, #1
 333 002a 0AD0     		beq	.L33
 334              	.L26:
 181:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 335              		.loc 1 181 5 is_stmt 1 view .LVU71
 181:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 336              		.loc 1 181 17 is_stmt 0 view .LVU72
 337 002c 284B     		ldr	r3, .L39
 338 002e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 181:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 339              		.loc 1 181 7 view .LVU73
 340 0030 012B     		cmp	r3, #1
 341 0032 16D0     		beq	.L34
 199:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 342              		.loc 1 199 12 is_stmt 1 view .LVU74
 199:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 343              		.loc 1 199 15 is_stmt 0 view .LVU75
 344 0034 022B     		cmp	r3, #2
 345 0036 39D0     		beq	.L35
 346              	.L30:
 210:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     lastRfField = gFtmState.rfField;
 347              		.loc 1 210 5 is_stmt 1 view .LVU76
 211:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 348              		.loc 1 211 5 view .LVU77
 211:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 349              		.loc 1 211 28 is_stmt 0 view .LVU78
 350 0038 254B     		ldr	r3, .L39
 351 003a 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 211:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 352              		.loc 1 211 17 view .LVU79
 353 003c 254B     		ldr	r3, .L39+4
 354 003e 1A70     		strb	r2, [r3]
 355              		.loc 1 213 1 view .LVU80
 356 0040 EEE7     		b	.L22
 357              	.L33:
 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 358              		.loc 1 161 7 is_stmt 1 view .LVU81
ARM GAS  /tmp/ccC3QsLC.s 			page 11


 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 359              		.loc 1 161 20 is_stmt 0 view .LVU82
 360 0042 234B     		ldr	r3, .L39
 361 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 362              		.loc 1 161 9 view .LVU83
 363 0046 012B     		cmp	r3, #1
 364 0048 F0D1     		bne	.L26
 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 365              		.loc 1 161 61 discriminator 1 view .LVU84
 366 004a 214B     		ldr	r3, .L39
 367 004c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 161:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 368              		.loc 1 161 45 discriminator 1 view .LVU85
 369 004e 012B     		cmp	r3, #1
 370 0050 ECD9     		bls	.L26
 163:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentRemainingData=%d\r\n",gFtmState.tx.segmentRemainingData);
 371              		.loc 1 163 72 is_stmt 1 view .LVU86
 164:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  pktIndex=%d\r\n",gFtmState.tx.pktIndex);
 372              		.loc 1 164 87 view .LVU87
 165:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentPtr=%X\r\n",gFtmState.tx.segmentPtr);
 373              		.loc 1 165 63 view .LVU88
 166:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentIndex=%d\r\n",gFtmState.tx.segmentIndex);
 374              		.loc 1 166 67 view .LVU89
 167:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  state=%s\r\n",ST25FTM_TxState_Str[gFtmState.tx.state]);
 375              		.loc 1 167 71 view .LVU90
 168:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_TxResetSegment();
 376              		.loc 1 168 78 view .LVU91
 169:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("After reset:\r\n");
 377              		.loc 1 169 9 view .LVU92
 378 0052 FFF7FEFF 		bl	ST25FTM_TxResetSegment
 379              	.LVL11:
 170:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentRemainingData=%d\r\n",gFtmState.tx.segmentRemainingData);
 380              		.loc 1 170 40 view .LVU93
 171:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  pktIndex=%d\r\n",gFtmState.tx.pktIndex);
 381              		.loc 1 171 87 view .LVU94
 172:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentPtr=%X\r\n",gFtmState.tx.segmentPtr);
 382              		.loc 1 172 63 view .LVU95
 173:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  segmentIndex=%d\r\n",gFtmState.tx.segmentIndex);
 383              		.loc 1 173 67 view .LVU96
 174:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_LOG("  state=%s\r\n",ST25FTM_TxState_Str[gFtmState.tx.state]);
 384              		.loc 1 174 71 view .LVU97
 175:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 385              		.loc 1 175 78 view .LVU98
 176:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 386              		.loc 1 176 9 view .LVU99
 176:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 387              		.loc 1 176 30 is_stmt 0 view .LVU100
 388 0056 FFF7FEFF 		bl	HAL_GetTick
 389              	.LVL12:
 176:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 390              		.loc 1 176 28 view .LVU101
 391 005a 1D4B     		ldr	r3, .L39
 392 005c C3F8A001 		str	r0, [r3, #416]
 393 0060 E4E7     		b	.L26
 394              	.L34:
 183:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
ARM GAS  /tmp/ccC3QsLC.s 			page 12


 395              		.loc 1 183 7 is_stmt 1 view .LVU102
 183:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 396              		.loc 1 183 22 is_stmt 0 view .LVU103
 397 0062 1B4B     		ldr	r3, .L39
 398 0064 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 183:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 399              		.loc 1 183 44 view .LVU104
 400 0066 5B7B     		ldrb	r3, [r3, #13]	@ zero_extendqisi2
 183:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 401              		.loc 1 183 9 view .LVU105
 402 0068 9A42     		cmp	r2, r3
 403 006a 10D1     		bne	.L36
 404              	.L28:
 189:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****          && (gFtmState.tx.state == ST25FTM_WRITE_READ_ACK))
 405              		.loc 1 189 7 is_stmt 1 view .LVU106
 189:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****          && (gFtmState.tx.state == ST25FTM_WRITE_READ_ACK))
 406              		.loc 1 189 11 is_stmt 0 view .LVU107
 407 006c FFF7FEFF 		bl	HAL_GetTick
 408              	.LVL13:
 409 0070 174B     		ldr	r3, .L39
 410 0072 D3F8A011 		ldr	r1, [r3, #416]
 411 0076 FFF7FEFF 		bl	ST25FTM_CompareTime
 412              	.LVL14:
 189:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****          && (gFtmState.tx.state == ST25FTM_WRITE_READ_ACK))
 413              		.loc 1 189 9 view .LVU108
 414 007a B0F57A7F 		cmp	r0, #1000
 415 007e 03D9     		bls	.L29
 190:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 416              		.loc 1 190 26 view .LVU109
 417 0080 134B     		ldr	r3, .L39
 418 0082 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 190:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 419              		.loc 1 190 10 view .LVU110
 420 0084 052B     		cmp	r3, #5
 421 0086 09D0     		beq	.L37
 422              	.L29:
 198:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     } else if (gFtmState.state == ST25FTM_READ)
 423              		.loc 1 198 7 is_stmt 1 view .LVU111
 424 0088 FFF7FEFF 		bl	ST25FTM_Transmit
 425              	.LVL15:
 426 008c D4E7     		b	.L30
 427              	.L36:
 185:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.tx.lastState = gFtmState.tx.state;
 428              		.loc 1 185 80 view .LVU112
 186:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 429              		.loc 1 186 9 view .LVU113
 186:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 430              		.loc 1 186 32 is_stmt 0 view .LVU114
 431 008e 104C     		ldr	r4, .L39
 432 0090 6273     		strb	r2, [r4, #13]
 187:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 433              		.loc 1 187 9 is_stmt 1 view .LVU115
 187:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 434              		.loc 1 187 30 is_stmt 0 view .LVU116
 435 0092 FFF7FEFF 		bl	HAL_GetTick
 436              	.LVL16:
 187:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
ARM GAS  /tmp/ccC3QsLC.s 			page 13


 437              		.loc 1 187 28 view .LVU117
 438 0096 C4F8A001 		str	r0, [r4, #416]
 439 009a E7E7     		b	.L28
 440              	.L37:
 194:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         ST25FTM_TxResetSegment();
 441              		.loc 1 194 71 is_stmt 1 view .LVU118
 195:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 442              		.loc 1 195 9 view .LVU119
 443 009c FFF7FEFF 		bl	ST25FTM_TxResetSegment
 444              	.LVL17:
 196:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 445              		.loc 1 196 9 view .LVU120
 196:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 446              		.loc 1 196 30 is_stmt 0 view .LVU121
 447 00a0 FFF7FEFF 		bl	HAL_GetTick
 448              	.LVL18:
 196:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 449              		.loc 1 196 28 view .LVU122
 450 00a4 0A4B     		ldr	r3, .L39
 451 00a6 C3F8A001 		str	r0, [r3, #416]
 452 00aa EDE7     		b	.L29
 453              	.L35:
 201:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 454              		.loc 1 201 7 is_stmt 1 view .LVU123
 201:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 455              		.loc 1 201 22 is_stmt 0 view .LVU124
 456 00ac 084B     		ldr	r3, .L39
 457 00ae 93F85821 		ldrb	r2, [r3, #344]	@ zero_extendqisi2
 201:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 458              		.loc 1 201 44 view .LVU125
 459 00b2 93F85931 		ldrb	r3, [r3, #345]	@ zero_extendqisi2
 201:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       {
 460              		.loc 1 201 9 view .LVU126
 461 00b6 9A42     		cmp	r2, r3
 462 00b8 02D1     		bne	.L38
 463              	.L31:
 207:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     } else {
 464              		.loc 1 207 7 is_stmt 1 view .LVU127
 465 00ba FFF7FEFF 		bl	ST25FTM_Receive
 466              	.LVL19:
 467 00be BBE7     		b	.L30
 468              	.L38:
 203:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.rx.lastState = gFtmState.rx.state;
 469              		.loc 1 203 80 view .LVU128
 204:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 470              		.loc 1 204 9 view .LVU129
 204:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****         gFtmState.lastTick = ST25FTM_TICK();
 471              		.loc 1 204 32 is_stmt 0 view .LVU130
 472 00c0 034C     		ldr	r4, .L39
 473 00c2 84F85921 		strb	r2, [r4, #345]
 205:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 474              		.loc 1 205 9 is_stmt 1 view .LVU131
 205:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
 475              		.loc 1 205 30 is_stmt 0 view .LVU132
 476 00c6 FFF7FEFF 		bl	HAL_GetTick
 477              	.LVL20:
 205:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       }
ARM GAS  /tmp/ccC3QsLC.s 			page 14


 478              		.loc 1 205 28 view .LVU133
 479 00ca C4F8A001 		str	r0, [r4, #416]
 480 00ce F4E7     		b	.L31
 481              	.L40:
 482              		.align	2
 483              	.L39:
 484 00d0 00000000 		.word	gFtmState
 485 00d4 00000000 		.word	.LANCHOR0
 486              		.cfi_endproc
 487              	.LFE142:
 489              		.section	.text.ST25FTM_IsNewFrame,"ax",%progbits
 490              		.align	1
 491              		.global	ST25FTM_IsNewFrame
 492              		.syntax unified
 493              		.thumb
 494              		.thumb_func
 495              		.fpu fpv4-sp-d16
 497              	ST25FTM_IsNewFrame:
 498              	.LFB144:
 214:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 215:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the current FTM state. Resets the state machine in case an error occured during the transmi
 216:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval ST25FTM_IDLE State machine is Idle, the transfer is over.
 217:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval ST25FTM_READ Reception is on-going.
 218:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval ST25FTM_WRITE Transmission is on-going.
 219:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  */
 220:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** ST25FTM_State_t ST25FTM_Status(void)
 221:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 222:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ST25FTM_State_t state = gFtmState.state;
 223:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state == ST25FTM_READ)
 224:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 225:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     if((gFtmState.rx.state == ST25FTM_READ_DONE) || (gFtmState.rx.state == ST25FTM_READ_ERROR))
 226:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 227:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     /* let the application reset the state machine */
 228:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     }
 229:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 230:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state == ST25FTM_WRITE)
 231:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 232:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     if((gFtmState.tx.state == ST25FTM_WRITE_DONE) || (gFtmState.tx.state == ST25FTM_WRITE_ERROR))
 233:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 234:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****       ST25FTM_Reset();
 235:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     }
 236:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 237:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return state;
 238:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 239:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 240:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Detect that a new reception has started.
 241:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 when a new recpetion has started since last call
 242:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise
 243:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 244:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_IsNewFrame(void)
 245:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 499              		.loc 1 245 1 is_stmt 1 view -0
 500              		.cfi_startproc
 501              		@ args = 0, pretend = 0, frame = 0
 502              		@ frame_needed = 0, uses_anonymous_args = 0
 503              		@ link register save eliminated.
 246:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t status;
ARM GAS  /tmp/ccC3QsLC.s 			page 15


 504              		.loc 1 246 3 view .LVU135
 247:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.rx.isNewFrame != 0U)
 505              		.loc 1 247 3 view .LVU136
 506              		.loc 1 247 18 is_stmt 0 view .LVU137
 507 0000 044B     		ldr	r3, .L43
 508 0002 93F85A01 		ldrb	r0, [r3, #346]	@ zero_extendqisi2
 509              		.loc 1 247 5 view .LVU138
 510 0006 18B1     		cbz	r0, .L42
 248:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 249:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     ST25FTM_LOG("*** Rx New Frame ***\r\n");
 511              		.loc 1 249 44 is_stmt 1 view .LVU139
 250:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.isNewFrame = 0U;
 512              		.loc 1 250 5 view .LVU140
 513              		.loc 1 250 29 is_stmt 0 view .LVU141
 514 0008 0022     		movs	r2, #0
 515 000a 83F85A21 		strb	r2, [r3, #346]
 251:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 1U;
 516              		.loc 1 251 5 is_stmt 1 view .LVU142
 517              	.LVL21:
 518              		.loc 1 251 12 is_stmt 0 view .LVU143
 519 000e 0120     		movs	r0, #1
 520              	.LVL22:
 521              	.L42:
 252:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 253:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 0U;
 254:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 255:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return status;
 522              		.loc 1 255 3 is_stmt 1 view .LVU144
 256:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 523              		.loc 1 256 1 is_stmt 0 view .LVU145
 524 0010 7047     		bx	lr
 525              	.L44:
 526 0012 00BF     		.align	2
 527              	.L43:
 528 0014 00000000 		.word	gFtmState
 529              		.cfi_endproc
 530              	.LFE144:
 532              		.section	.text.ST25FTM_GetTransferProgress,"ax",%progbits
 533              		.align	1
 534              		.global	ST25FTM_GetTransferProgress
 535              		.syntax unified
 536              		.thumb
 537              		.thumb_func
 538              		.fpu fpv4-sp-d16
 540              	ST25FTM_GetTransferProgress:
 541              	.LFB145:
 257:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 258:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Compute the current transfer progress.
 259:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @return THe current transfer progress (percentage).
 260:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 261:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetTransferProgress(void)
 262:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 542              		.loc 1 262 1 is_stmt 1 view -0
 543              		.cfi_startproc
 544              		@ args = 0, pretend = 0, frame = 0
 545              		@ frame_needed = 0, uses_anonymous_args = 0
 546              		@ link register save eliminated.
ARM GAS  /tmp/ccC3QsLC.s 			page 16


 263:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint32_t progress;
 547              		.loc 1 263 3 view .LVU147
 264:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state == ST25FTM_WRITE)
 548              		.loc 1 264 3 view .LVU148
 549              		.loc 1 264 15 is_stmt 0 view .LVU149
 550 0000 0F4B     		ldr	r3, .L51
 551 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 552              		.loc 1 264 5 view .LVU150
 553 0004 012B     		cmp	r3, #1
 554 0006 03D0     		beq	.L49
 265:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     progress = ((gFtmState.tx.cmdLen - gFtmState.tx.remainingData - gFtmState.tx.segmentRemainingDa
 267:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 555              		.loc 1 267 10 is_stmt 1 view .LVU151
 556              		.loc 1 267 13 is_stmt 0 view .LVU152
 557 0008 022B     		cmp	r3, #2
 558 000a 0DD0     		beq	.L50
 268:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     progress = (gFtmState.rx.totalValidReceivedLength * 100U) / *gFtmState.rx.cmdLen;
 270:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 271:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     progress = 0;
 559              		.loc 1 271 14 view .LVU153
 560 000c 0020     		movs	r0, #0
 561              	.LVL23:
 272:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 273:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return progress;
 562              		.loc 1 273 3 is_stmt 1 view .LVU154
 274:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 563              		.loc 1 274 1 is_stmt 0 view .LVU155
 564 000e 7047     		bx	lr
 565              	.LVL24:
 566              	.L49:
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 567              		.loc 1 266 5 is_stmt 1 view .LVU156
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 568              		.loc 1 266 30 is_stmt 0 view .LVU157
 569 0010 0B4A     		ldr	r2, .L51
 570 0012 5169     		ldr	r1, [r2, #20]
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 571              		.loc 1 266 52 view .LVU158
 572 0014 9369     		ldr	r3, [r2, #24]
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 573              		.loc 1 266 38 view .LVU159
 574 0016 C81A     		subs	r0, r1, r3
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 575              		.loc 1 266 81 view .LVU160
 576 0018 936B     		ldr	r3, [r2, #56]
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 577              		.loc 1 266 67 view .LVU161
 578 001a C01A     		subs	r0, r0, r3
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 579              		.loc 1 266 104 view .LVU162
 580 001c 6423     		movs	r3, #100
 581 001e 03FB00F0 		mul	r0, r3, r0
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 582              		.loc 1 266 14 view .LVU163
 583 0022 B0FBF1F0 		udiv	r0, r0, r1
ARM GAS  /tmp/ccC3QsLC.s 			page 17


 584              	.LVL25:
 266:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else if (gFtmState.state == ST25FTM_READ)
 585              		.loc 1 266 14 view .LVU164
 586 0026 7047     		bx	lr
 587              	.LVL26:
 588              	.L50:
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 589              		.loc 1 269 5 is_stmt 1 view .LVU165
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 590              		.loc 1 269 29 is_stmt 0 view .LVU166
 591 0028 054B     		ldr	r3, .L51
 592 002a D3F88001 		ldr	r0, [r3, #384]
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 593              		.loc 1 269 55 view .LVU167
 594 002e 6422     		movs	r2, #100
 595 0030 02FB00F0 		mul	r0, r2, r0
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 596              		.loc 1 269 78 view .LVU168
 597 0034 D3F86031 		ldr	r3, [r3, #352]
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 598              		.loc 1 269 65 view .LVU169
 599 0038 1B68     		ldr	r3, [r3]
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 600              		.loc 1 269 14 view .LVU170
 601 003a B0FBF3F0 		udiv	r0, r0, r3
 602              	.LVL27:
 269:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 603              		.loc 1 269 14 view .LVU171
 604 003e 7047     		bx	lr
 605              	.L52:
 606              		.align	2
 607              	.L51:
 608 0040 00000000 		.word	gFtmState
 609              		.cfi_endproc
 610              	.LFE145:
 612              		.section	.text.ST25FTM_GetAvailableDataLength,"ax",%progbits
 613              		.align	1
 614              		.global	ST25FTM_GetAvailableDataLength
 615              		.syntax unified
 616              		.thumb
 617              		.thumb_func
 618              		.fpu fpv4-sp-d16
 620              	ST25FTM_GetAvailableDataLength:
 621              	.LFB146:
 275:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 276:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the number of byte received.
 277:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     It can be used by the application to process the received data before transfer completion.
 278:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @return The current number of valid bytes received.
 279:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 280:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetAvailableDataLength(void)
 281:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 622              		.loc 1 281 1 is_stmt 1 view -0
 623              		.cfi_startproc
 624              		@ args = 0, pretend = 0, frame = 0
 625              		@ frame_needed = 0, uses_anonymous_args = 0
 626              		@ link register save eliminated.
 282:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.rx.validReceivedLength;
ARM GAS  /tmp/ccC3QsLC.s 			page 18


 627              		.loc 1 282 3 view .LVU173
 283:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****  }
 628              		.loc 1 283 2 is_stmt 0 view .LVU174
 629 0000 014B     		ldr	r3, .L54
 630 0002 D3F87C01 		ldr	r0, [r3, #380]
 631 0006 7047     		bx	lr
 632              	.L55:
 633              		.align	2
 634              	.L54:
 635 0008 00000000 		.word	gFtmState
 636              		.cfi_endproc
 637              	.LFE146:
 639              		.section	.text.ST25FTM_ReadBuffer,"ax",%progbits
 640              		.align	1
 641              		.global	ST25FTM_ReadBuffer
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
 645              		.fpu fpv4-sp-d16
 647              	ST25FTM_ReadBuffer:
 648              	.LVL28:
 649              	.LFB147:
 284:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 285:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Read received bytes during the transmission, freeing space to continue the reception.
 286:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     It can be used by the application to process the received data before transfer completion.
 287:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param dst The buffer to copy the received data.
 288:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @param length Number of bytes to copy.
 289:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 if the data has been copied.
 290:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 otherwise.
 291:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 292:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_ReadBuffer(uint8_t *dst,  uint32_t length)
 293:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 650              		.loc 1 293 1 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 0
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 654              		.loc 1 293 1 is_stmt 0 view .LVU176
 655 0000 38B5     		push	{r3, r4, r5, lr}
 656              	.LCFI4:
 657              		.cfi_def_cfa_offset 16
 658              		.cfi_offset 3, -16
 659              		.cfi_offset 4, -12
 660              		.cfi_offset 5, -8
 661              		.cfi_offset 14, -4
 294:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t status;
 662              		.loc 1 294 3 is_stmt 1 view .LVU177
 295:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(length <= gFtmState.rx.validReceivedLength)
 663              		.loc 1 295 3 view .LVU178
 664              		.loc 1 295 28 is_stmt 0 view .LVU179
 665 0002 174B     		ldr	r3, .L61
 666 0004 D3F87C31 		ldr	r3, [r3, #380]
 667              		.loc 1 295 5 view .LVU180
 668 0008 8B42     		cmp	r3, r1
 669 000a 01D2     		bcs	.L60
 296:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 297:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.receivedLength -= length;
 298:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.validReceivedLength -= length;
ARM GAS  /tmp/ccC3QsLC.s 			page 19


 299:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memcpy(dst,gFtmState.rx.cmdPtr,length);
 300:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memmove(gFtmState.rx.cmdPtr,&gFtmState.rx.cmdPtr[length],gFtmState.rx.receivedLength);
 301:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.dataPtr -= length;
 302:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.segmentPtr -= length;
 303:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.readBufferOffset += length;
 304:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 0;
 305:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 306:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 1;
 670              		.loc 1 306 12 view .LVU181
 671 000c 0120     		movs	r0, #1
 672              	.LVL29:
 673              	.L57:
 307:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 308:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return status;
 674              		.loc 1 308 3 is_stmt 1 view .LVU182
 309:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 675              		.loc 1 309 1 is_stmt 0 view .LVU183
 676 000e 38BD     		pop	{r3, r4, r5, pc}
 677              	.LVL30:
 678              	.L60:
 679              		.loc 1 309 1 view .LVU184
 680 0010 0C46     		mov	r4, r1
 297:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.validReceivedLength -= length;
 681              		.loc 1 297 5 is_stmt 1 view .LVU185
 297:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.validReceivedLength -= length;
 682              		.loc 1 297 33 is_stmt 0 view .LVU186
 683 0012 134D     		ldr	r5, .L61
 684 0014 D5F87421 		ldr	r2, [r5, #372]
 685 0018 521A     		subs	r2, r2, r1
 686 001a C5F87421 		str	r2, [r5, #372]
 298:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memcpy(dst,gFtmState.rx.cmdPtr,length);
 687              		.loc 1 298 5 is_stmt 1 view .LVU187
 298:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memcpy(dst,gFtmState.rx.cmdPtr,length);
 688              		.loc 1 298 38 is_stmt 0 view .LVU188
 689 001e 5B1A     		subs	r3, r3, r1
 690 0020 C5F87C31 		str	r3, [r5, #380]
 299:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memmove(gFtmState.rx.cmdPtr,&gFtmState.rx.cmdPtr[length],gFtmState.rx.receivedLength);
 691              		.loc 1 299 5 is_stmt 1 view .LVU189
 299:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memmove(gFtmState.rx.cmdPtr,&gFtmState.rx.cmdPtr[length],gFtmState.rx.receivedLength);
 692              		.loc 1 299 11 is_stmt 0 view .LVU190
 693 0024 0A46     		mov	r2, r1
 694 0026 D5F85C11 		ldr	r1, [r5, #348]
 695              	.LVL31:
 299:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     (void)memmove(gFtmState.rx.cmdPtr,&gFtmState.rx.cmdPtr[length],gFtmState.rx.receivedLength);
 696              		.loc 1 299 11 view .LVU191
 697 002a FFF7FEFF 		bl	memcpy
 698              	.LVL32:
 300:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.dataPtr -= length;
 699              		.loc 1 300 5 is_stmt 1 view .LVU192
 300:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.dataPtr -= length;
 700              		.loc 1 300 31 is_stmt 0 view .LVU193
 701 002e D5F85C01 		ldr	r0, [r5, #348]
 300:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.dataPtr -= length;
 702              		.loc 1 300 11 view .LVU194
 703 0032 D5F87421 		ldr	r2, [r5, #372]
 704 0036 0119     		adds	r1, r0, r4
 705 0038 FFF7FEFF 		bl	memmove
ARM GAS  /tmp/ccC3QsLC.s 			page 20


 706              	.LVL33:
 301:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.segmentPtr -= length;
 707              		.loc 1 301 5 is_stmt 1 view .LVU195
 301:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.segmentPtr -= length;
 708              		.loc 1 301 26 is_stmt 0 view .LVU196
 709 003c D5F88C31 		ldr	r3, [r5, #396]
 710 0040 1B1B     		subs	r3, r3, r4
 711 0042 C5F88C31 		str	r3, [r5, #396]
 302:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.readBufferOffset += length;
 712              		.loc 1 302 5 is_stmt 1 view .LVU197
 302:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.rx.readBufferOffset += length;
 713              		.loc 1 302 29 is_stmt 0 view .LVU198
 714 0046 D5F88431 		ldr	r3, [r5, #388]
 715 004a 1B1B     		subs	r3, r3, r4
 716 004c C5F88431 		str	r3, [r5, #388]
 303:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 0;
 717              		.loc 1 303 5 is_stmt 1 view .LVU199
 303:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     status = 0;
 718              		.loc 1 303 35 is_stmt 0 view .LVU200
 719 0050 D5F89C11 		ldr	r1, [r5, #412]
 720 0054 2144     		add	r1, r1, r4
 721 0056 C5F89C11 		str	r1, [r5, #412]
 304:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 722              		.loc 1 304 5 is_stmt 1 view .LVU201
 723              	.LVL34:
 304:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 724              		.loc 1 304 12 is_stmt 0 view .LVU202
 725 005a 0020     		movs	r0, #0
 726 005c D7E7     		b	.L57
 727              	.L62:
 728 005e 00BF     		.align	2
 729              	.L61:
 730 0060 00000000 		.word	gFtmState
 731              		.cfi_endproc
 732              	.LFE147:
 734              		.section	.text.ST25FTM_GetReadBufferOffset,"ax",%progbits
 735              		.align	1
 736              		.global	ST25FTM_GetReadBufferOffset
 737              		.syntax unified
 738              		.thumb
 739              		.thumb_func
 740              		.fpu fpv4-sp-d16
 742              	ST25FTM_GetReadBufferOffset:
 743              	.LFB148:
 310:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 311:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the current offset in the command of the next byte that will be read with ST25FTM_ReadBuffe
 312:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     It can be used by the application to keep track of the incoming data before the transfer comple
 313:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @return The offset of the next byte to read.
 314:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 315:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetReadBufferOffset(void)
 316:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 744              		.loc 1 316 1 is_stmt 1 view -0
 745              		.cfi_startproc
 746              		@ args = 0, pretend = 0, frame = 0
 747              		@ frame_needed = 0, uses_anonymous_args = 0
 748              		@ link register save eliminated.
 317:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.rx.readBufferOffset;
ARM GAS  /tmp/ccC3QsLC.s 			page 21


 749              		.loc 1 317 3 view .LVU204
 318:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 750              		.loc 1 318 1 is_stmt 0 view .LVU205
 751 0000 014B     		ldr	r3, .L64
 752 0002 D3F89C01 		ldr	r0, [r3, #412]
 753 0006 7047     		bx	lr
 754              	.L65:
 755              		.align	2
 756              	.L64:
 757 0008 00000000 		.word	gFtmState
 758              		.cfi_endproc
 759              	.LFE148:
 761              		.section	.text.ST25FTM_GetFieldState,"ax",%progbits
 762              		.align	1
 763              		.global	ST25FTM_GetFieldState
 764              		.syntax unified
 765              		.thumb
 766              		.thumb_func
 767              		.fpu fpv4-sp-d16
 769              	ST25FTM_GetFieldState:
 770              	.LFB149:
 319:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 320:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the current field state (only relevant for dynamic tag device).
 321:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 if RF field is present.
 322:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise.
 323:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 324:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** ST25FTM_Field_State_t ST25FTM_GetFieldState(void)
 325:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 771              		.loc 1 325 1 is_stmt 1 view -0
 772              		.cfi_startproc
 773              		@ args = 0, pretend = 0, frame = 0
 774              		@ frame_needed = 0, uses_anonymous_args = 0
 775              		@ link register save eliminated.
 326:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.rfField;
 776              		.loc 1 326 3 view .LVU207
 327:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 777              		.loc 1 327 1 is_stmt 0 view .LVU208
 778 0000 014B     		ldr	r3, .L67
 779 0002 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 780 0004 7047     		bx	lr
 781              	.L68:
 782 0006 00BF     		.align	2
 783              	.L67:
 784 0008 00000000 		.word	gFtmState
 785              		.cfi_endproc
 786              	.LFE149:
 788              		.section	.text.ST25FTM_GetTotalLength,"ax",%progbits
 789              		.align	1
 790              		.global	ST25FTM_GetTotalLength
 791              		.syntax unified
 792              		.thumb
 793              		.thumb_func
 794              		.fpu fpv4-sp-d16
 796              	ST25FTM_GetTotalLength:
 797              	.LFB150:
 328:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 329:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
ARM GAS  /tmp/ccC3QsLC.s 			page 22


 330:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the total length of the transfer (including protocol metadata).
 331:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @return The total number of bytes transfered.
 332:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 333:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetTotalLength(void)
 334:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 798              		.loc 1 334 1 is_stmt 1 view -0
 799              		.cfi_startproc
 800              		@ args = 0, pretend = 0, frame = 0
 801              		@ frame_needed = 0, uses_anonymous_args = 0
 802              		@ link register save eliminated.
 335:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.totalDataLength;
 803              		.loc 1 335 3 view .LVU210
 336:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 804              		.loc 1 336 1 is_stmt 0 view .LVU211
 805 0000 014B     		ldr	r3, .L70
 806 0002 5868     		ldr	r0, [r3, #4]
 807 0004 7047     		bx	lr
 808              	.L71:
 809 0006 00BF     		.align	2
 810              	.L70:
 811 0008 00000000 		.word	gFtmState
 812              		.cfi_endproc
 813              	.LFE150:
 815              		.section	.text.ST25FTM_GetRetryLength,"ax",%progbits
 816              		.align	1
 817              		.global	ST25FTM_GetRetryLength
 818              		.syntax unified
 819              		.thumb
 820              		.thumb_func
 821              		.fpu fpv4-sp-d16
 823              	ST25FTM_GetRetryLength:
 824              	.LFB151:
 337:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 338:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the number of bytes that have been resent.
 339:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @return The number of bytes that have been resent during this transfer.
 340:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 341:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetRetryLength(void)
 342:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 825              		.loc 1 342 1 is_stmt 1 view -0
 826              		.cfi_startproc
 827              		@ args = 0, pretend = 0, frame = 0
 828              		@ frame_needed = 0, uses_anonymous_args = 0
 829              		@ link register save eliminated.
 343:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.retryLength;
 830              		.loc 1 343 3 view .LVU213
 344:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 831              		.loc 1 344 1 is_stmt 0 view .LVU214
 832 0000 014B     		ldr	r3, .L73
 833 0002 9868     		ldr	r0, [r3, #8]
 834 0004 7047     		bx	lr
 835              	.L74:
 836 0006 00BF     		.align	2
 837              	.L73:
 838 0008 00000000 		.word	gFtmState
 839              		.cfi_endproc
 840              	.LFE151:
 842              		.section	.text.ST25FTM_IsReceptionComplete,"ax",%progbits
ARM GAS  /tmp/ccC3QsLC.s 			page 23


 843              		.align	1
 844              		.global	ST25FTM_IsReceptionComplete
 845              		.syntax unified
 846              		.thumb
 847              		.thumb_func
 848              		.fpu fpv4-sp-d16
 850              	ST25FTM_IsReceptionComplete:
 851              	.LFB152:
 345:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 346:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Check if the reception has been completed.
 347:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 is the reception has completed.
 348:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise.
 349:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 350:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_IsReceptionComplete(void)
 351:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 852              		.loc 1 351 1 is_stmt 1 view -0
 853              		.cfi_startproc
 854              		@ args = 0, pretend = 0, frame = 0
 855              		@ frame_needed = 0, uses_anonymous_args = 0
 856              		@ link register save eliminated.
 352:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t isRxCompleted;
 857              		.loc 1 352 3 view .LVU216
 353:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if ((gFtmState.state == ST25FTM_READ) && (gFtmState.rx.state == ST25FTM_READ_DONE))
 858              		.loc 1 353 3 view .LVU217
 859              		.loc 1 353 17 is_stmt 0 view .LVU218
 860 0000 074B     		ldr	r3, .L80
 861 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 862              		.loc 1 353 6 view .LVU219
 863 0004 022B     		cmp	r3, #2
 864 0006 01D0     		beq	.L79
 354:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 355:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isRxCompleted = 1;
 356:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 357:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isRxCompleted = 0;
 865              		.loc 1 357 19 view .LVU220
 866 0008 0020     		movs	r0, #0
 867 000a 7047     		bx	lr
 868              	.L79:
 353:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if ((gFtmState.state == ST25FTM_READ) && (gFtmState.rx.state == ST25FTM_READ_DONE))
 869              		.loc 1 353 57 discriminator 1 view .LVU221
 870 000c 044B     		ldr	r3, .L80
 871 000e 93F85831 		ldrb	r3, [r3, #344]	@ zero_extendqisi2
 353:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if ((gFtmState.state == ST25FTM_READ) && (gFtmState.rx.state == ST25FTM_READ_DONE))
 872              		.loc 1 353 41 discriminator 1 view .LVU222
 873 0012 082B     		cmp	r3, #8
 874 0014 01D0     		beq	.L78
 875              		.loc 1 357 19 view .LVU223
 876 0016 0020     		movs	r0, #0
 877 0018 7047     		bx	lr
 878              	.L78:
 355:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 879              		.loc 1 355 19 view .LVU224
 880 001a 0120     		movs	r0, #1
 881              	.LVL35:
 358:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 359:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return isRxCompleted;
 882              		.loc 1 359 3 is_stmt 1 view .LVU225
ARM GAS  /tmp/ccC3QsLC.s 			page 24


 360:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 883              		.loc 1 360 1 is_stmt 0 view .LVU226
 884 001c 7047     		bx	lr
 885              	.L81:
 886 001e 00BF     		.align	2
 887              	.L80:
 888 0020 00000000 		.word	gFtmState
 889              		.cfi_endproc
 890              	.LFE152:
 892              		.section	.text.ST25FTM_IsTransmissionComplete,"ax",%progbits
 893              		.align	1
 894              		.global	ST25FTM_IsTransmissionComplete
 895              		.syntax unified
 896              		.thumb
 897              		.thumb_func
 898              		.fpu fpv4-sp-d16
 900              	ST25FTM_IsTransmissionComplete:
 901              	.LFB153:
 361:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 362:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Check if the transmission has been completed.
 363:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 is the transmission has completed.
 364:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise.
 365:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 366:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_IsTransmissionComplete(void)
 367:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 902              		.loc 1 367 1 is_stmt 1 view -0
 903              		.cfi_startproc
 904              		@ args = 0, pretend = 0, frame = 0
 905              		@ frame_needed = 0, uses_anonymous_args = 0
 906              		@ link register save eliminated.
 368:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t isTxCompleted;
 907              		.loc 1 368 3 view .LVU228
 369:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if ((gFtmState.state == ST25FTM_WRITE) && (gFtmState.tx.state == ST25FTM_WRITE_DONE))
 908              		.loc 1 369 3 view .LVU229
 909              		.loc 1 369 17 is_stmt 0 view .LVU230
 910 0000 054B     		ldr	r3, .L86
 911 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 912              		.loc 1 369 6 view .LVU231
 913 0004 0128     		cmp	r0, #1
 914 0006 01D0     		beq	.L85
 370:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 371:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isTxCompleted = 1;
 372:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 373:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isTxCompleted = 0;
 915              		.loc 1 373 19 view .LVU232
 916 0008 0020     		movs	r0, #0
 917              	.L83:
 918              	.LVL36:
 374:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 375:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return isTxCompleted;
 919              		.loc 1 375 3 is_stmt 1 view .LVU233
 376:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 920              		.loc 1 376 1 is_stmt 0 view .LVU234
 921 000a 7047     		bx	lr
 922              	.LVL37:
 923              	.L85:
 369:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
ARM GAS  /tmp/ccC3QsLC.s 			page 25


 924              		.loc 1 369 58 discriminator 1 view .LVU235
 925 000c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 369:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 926              		.loc 1 369 42 discriminator 1 view .LVU236
 927 000e 062B     		cmp	r3, #6
 928 0010 FBD0     		beq	.L83
 373:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 929              		.loc 1 373 19 view .LVU237
 930 0012 0020     		movs	r0, #0
 931 0014 7047     		bx	lr
 932              	.L87:
 933 0016 00BF     		.align	2
 934              	.L86:
 935 0018 00000000 		.word	gFtmState
 936              		.cfi_endproc
 937              	.LFE153:
 939              		.section	.text.ST25FTM_IsIdle,"ax",%progbits
 940              		.align	1
 941              		.global	ST25FTM_IsIdle
 942              		.syntax unified
 943              		.thumb
 944              		.thumb_func
 945              		.fpu fpv4-sp-d16
 947              	ST25FTM_IsIdle:
 948              	.LFB154:
 377:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 378:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Check if the ST25FTM state machine is idle.
 379:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 The state machine is Idle.
 380:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise.
 381:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 382:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_IsIdle(void)
 383:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 949              		.loc 1 383 1 is_stmt 1 view -0
 950              		.cfi_startproc
 951              		@ args = 0, pretend = 0, frame = 0
 952              		@ frame_needed = 0, uses_anonymous_args = 0
 953              		@ link register save eliminated.
 384:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t isIdle;
 954              		.loc 1 384 3 view .LVU239
 385:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if (gFtmState.state == ST25FTM_IDLE)
 955              		.loc 1 385 3 view .LVU240
 956              		.loc 1 385 16 is_stmt 0 view .LVU241
 957 0000 034B     		ldr	r3, .L91
 958 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 959              		.loc 1 385 6 view .LVU242
 960 0004 0BB9     		cbnz	r3, .L90
 386:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 387:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isIdle = 1;
 961              		.loc 1 387 12 view .LVU243
 962 0006 0120     		movs	r0, #1
 963 0008 7047     		bx	lr
 964              	.L90:
 388:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 389:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isIdle = 0;
 965              		.loc 1 389 12 view .LVU244
 966 000a 0020     		movs	r0, #0
 967              	.LVL38:
ARM GAS  /tmp/ccC3QsLC.s 			page 26


 390:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 391:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return isIdle;
 968              		.loc 1 391 3 is_stmt 1 view .LVU245
 392:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 969              		.loc 1 392 1 is_stmt 0 view .LVU246
 970 000c 7047     		bx	lr
 971              	.L92:
 972 000e 00BF     		.align	2
 973              	.L91:
 974 0010 00000000 		.word	gFtmState
 975              		.cfi_endproc
 976              	.LFE154:
 978              		.section	.text.ST25FTM_CheckError,"ax",%progbits
 979              		.align	1
 980              		.global	ST25FTM_CheckError
 981              		.syntax unified
 982              		.thumb
 983              		.thumb_func
 984              		.fpu fpv4-sp-d16
 986              	ST25FTM_CheckError:
 987              	.LFB155:
 393:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 394:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Check if an error occured.
 395:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 1 An error occured.
 396:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   * @retval 0 otherwise.
 397:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** */
 398:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint8_t ST25FTM_CheckError(void)
 399:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 988              		.loc 1 399 1 is_stmt 1 view -0
 989              		.cfi_startproc
 990              		@ args = 0, pretend = 0, frame = 0
 991              		@ frame_needed = 0, uses_anonymous_args = 0
 992              		@ link register save eliminated.
 400:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   uint8_t isError;
 993              		.loc 1 400 3 view .LVU248
 401:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if((gFtmState.rx.state == ST25FTM_READ_ERROR)  || (gFtmState.tx.state == ST25FTM_WRITE_ERROR))
 994              		.loc 1 401 3 view .LVU249
 995              		.loc 1 401 19 is_stmt 0 view .LVU250
 996 0000 074B     		ldr	r3, .L98
 997 0002 93F85831 		ldrb	r3, [r3, #344]	@ zero_extendqisi2
 998              		.loc 1 401 5 view .LVU251
 999 0006 092B     		cmp	r3, #9
 1000 0008 07D0     		beq	.L95
 1001              		.loc 1 401 66 discriminator 1 view .LVU252
 1002 000a 054B     		ldr	r3, .L98
 1003 000c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1004              		.loc 1 401 50 discriminator 1 view .LVU253
 1005 000e 072B     		cmp	r3, #7
 1006 0010 01D0     		beq	.L97
 402:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 403:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isError = 1;
 404:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 405:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     isError = 0;
 1007              		.loc 1 405 13 view .LVU254
 1008 0012 0020     		movs	r0, #0
 1009              	.LVL39:
 406:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
ARM GAS  /tmp/ccC3QsLC.s 			page 27


 407:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return isError;
 1010              		.loc 1 407 3 is_stmt 1 view .LVU255
 408:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1011              		.loc 1 408 1 is_stmt 0 view .LVU256
 1012 0014 7047     		bx	lr
 1013              	.LVL40:
 1014              	.L97:
 403:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   } else {
 1015              		.loc 1 403 13 view .LVU257
 1016 0016 0120     		movs	r0, #1
 1017 0018 7047     		bx	lr
 1018              	.L95:
 1019 001a 0120     		movs	r0, #1
 1020 001c 7047     		bx	lr
 1021              	.L99:
 1022 001e 00BF     		.align	2
 1023              	.L98:
 1024 0020 00000000 		.word	gFtmState
 1025              		.cfi_endproc
 1026              	.LFE155:
 1028              		.section	.text.ST25FTM_Reset,"ax",%progbits
 1029              		.align	1
 1030              		.global	ST25FTM_Reset
 1031              		.syntax unified
 1032              		.thumb
 1033              		.thumb_func
 1034              		.fpu fpv4-sp-d16
 1036              	ST25FTM_Reset:
 1037              	.LFB156:
 409:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 410:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Reset the ST25FTM state machine.
 411:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   */
 412:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_Reset(void)
 413:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 1038              		.loc 1 413 1 is_stmt 1 view -0
 1039              		.cfi_startproc
 1040              		@ args = 0, pretend = 0, frame = 0
 1041              		@ frame_needed = 0, uses_anonymous_args = 0
 1042              		@ link register save eliminated.
 414:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.cmdPtr = NULL;
 1043              		.loc 1 414 3 view .LVU259
 1044              		.loc 1 414 23 is_stmt 0 view .LVU260
 1045 0000 044B     		ldr	r3, .L101
 1046 0002 0022     		movs	r2, #0
 1047 0004 1A61     		str	r2, [r3, #16]
 415:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.cmdLen = 0;
 1048              		.loc 1 415 3 is_stmt 1 view .LVU261
 1049              		.loc 1 415 23 is_stmt 0 view .LVU262
 1050 0006 5A61     		str	r2, [r3, #20]
 416:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.tx.state = ST25FTM_WRITE_IDLE;
 1051              		.loc 1 416 3 is_stmt 1 view .LVU263
 1052              		.loc 1 416 22 is_stmt 0 view .LVU264
 1053 0008 1A73     		strb	r2, [r3, #12]
 417:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.rx.state = ST25FTM_READ_IDLE;
 1054              		.loc 1 417 3 is_stmt 1 view .LVU265
 1055              		.loc 1 417 22 is_stmt 0 view .LVU266
 1056 000a 83F85821 		strb	r2, [r3, #344]
ARM GAS  /tmp/ccC3QsLC.s 			page 28


 418:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   gFtmState.state = ST25FTM_IDLE;
 1057              		.loc 1 418 3 is_stmt 1 view .LVU267
 1058              		.loc 1 418 19 is_stmt 0 view .LVU268
 1059 000e 1A70     		strb	r2, [r3]
 419:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1060              		.loc 1 419 1 view .LVU269
 1061 0010 7047     		bx	lr
 1062              	.L102:
 1063 0012 00BF     		.align	2
 1064              	.L101:
 1065 0014 00000000 		.word	gFtmState
 1066              		.cfi_endproc
 1067              	.LFE156:
 1069              		.section	.text.ST25FTM_Status,"ax",%progbits
 1070              		.align	1
 1071              		.global	ST25FTM_Status
 1072              		.syntax unified
 1073              		.thumb
 1074              		.thumb_func
 1075              		.fpu fpv4-sp-d16
 1077              	ST25FTM_Status:
 1078              	.LFB143:
 221:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   ST25FTM_State_t state = gFtmState.state;
 1079              		.loc 1 221 1 is_stmt 1 view -0
 1080              		.cfi_startproc
 1081              		@ args = 0, pretend = 0, frame = 0
 1082              		@ frame_needed = 0, uses_anonymous_args = 0
 1083 0000 10B5     		push	{r4, lr}
 1084              	.LCFI5:
 1085              		.cfi_def_cfa_offset 8
 1086              		.cfi_offset 4, -8
 1087              		.cfi_offset 14, -4
 222:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state == ST25FTM_READ)
 1088              		.loc 1 222 3 view .LVU271
 222:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(gFtmState.state == ST25FTM_READ)
 1089              		.loc 1 222 19 is_stmt 0 view .LVU272
 1090 0002 074B     		ldr	r3, .L107
 1091 0004 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 1092              	.LVL41:
 223:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 1093              		.loc 1 223 3 is_stmt 1 view .LVU273
 228:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 1094              		.loc 1 228 5 view .LVU274
 230:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 1095              		.loc 1 230 3 view .LVU275
 230:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 1096              		.loc 1 230 5 is_stmt 0 view .LVU276
 1097 0006 012C     		cmp	r4, #1
 1098 0008 01D0     		beq	.L106
 1099              	.L104:
 237:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1100              		.loc 1 237 3 is_stmt 1 view .LVU277
 238:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 1101              		.loc 1 238 1 is_stmt 0 view .LVU278
 1102 000a 2046     		mov	r0, r4
 1103 000c 10BD     		pop	{r4, pc}
 1104              	.LVL42:
ARM GAS  /tmp/ccC3QsLC.s 			page 29


 1105              	.L106:
 232:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 1106              		.loc 1 232 5 is_stmt 1 view .LVU279
 232:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 1107              		.loc 1 232 21 is_stmt 0 view .LVU280
 1108 000e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 232:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 1109              		.loc 1 232 51 view .LVU281
 1110 0010 063B     		subs	r3, r3, #6
 1111 0012 DBB2     		uxtb	r3, r3
 232:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     {
 1112              		.loc 1 232 7 view .LVU282
 1113 0014 012B     		cmp	r3, #1
 1114 0016 F8D8     		bhi	.L104
 234:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     }
 1115              		.loc 1 234 7 is_stmt 1 view .LVU283
 1116 0018 FFF7FEFF 		bl	ST25FTM_Reset
 1117              	.LVL43:
 1118 001c F5E7     		b	.L104
 1119              	.L108:
 1120 001e 00BF     		.align	2
 1121              	.L107:
 1122 0020 00000000 		.word	gFtmState
 1123              		.cfi_endproc
 1124              	.LFE143:
 1126              		.section	.text.ST25FTM_SetTxSegmentMaxLength,"ax",%progbits
 1127              		.align	1
 1128              		.global	ST25FTM_SetTxSegmentMaxLength
 1129              		.syntax unified
 1130              		.thumb
 1131              		.thumb_func
 1132              		.fpu fpv4-sp-d16
 1134              	ST25FTM_SetTxSegmentMaxLength:
 1135              	.LVL44:
 1136              	.LFB157:
 420:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 421:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 422:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Set the lenth of a segment (in bytes, max value is ST25FTM_SEGMENT_LEN) */
 423:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_SetTxSegmentMaxLength(uint32_t length)
 424:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 1137              		.loc 1 424 1 view -0
 1138              		.cfi_startproc
 1139              		@ args = 0, pretend = 0, frame = 0
 1140              		@ frame_needed = 0, uses_anonymous_args = 0
 1141              		@ link register save eliminated.
 425:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   if(length <= ST25FTM_SEGMENT_LEN)
 1142              		.loc 1 425 3 view .LVU285
 1143              		.loc 1 425 5 is_stmt 0 view .LVU286
 1144 0000 41F2A363 		movw	r3, #5795
 1145 0004 9842     		cmp	r0, r3
 1146 0006 01D8     		bhi	.L109
 426:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   {
 427:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.tx.segmentMaxLength = length;
 1147              		.loc 1 427 5 is_stmt 1 view .LVU287
 1148              		.loc 1 427 35 is_stmt 0 view .LVU288
 1149 0008 014B     		ldr	r3, .L111
 1150 000a D863     		str	r0, [r3, #60]
ARM GAS  /tmp/ccC3QsLC.s 			page 30


 1151              	.L109:
 428:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   }
 429:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1152              		.loc 1 429 1 view .LVU289
 1153 000c 7047     		bx	lr
 1154              	.L112:
 1155 000e 00BF     		.align	2
 1156              	.L111:
 1157 0010 00000000 		.word	gFtmState
 1158              		.cfi_endproc
 1159              	.LFE157:
 1161              		.section	.text.ST25FTM_ResetTxSegmentMaxLength,"ax",%progbits
 1162              		.align	1
 1163              		.global	ST25FTM_ResetTxSegmentMaxLength
 1164              		.syntax unified
 1165              		.thumb
 1166              		.thumb_func
 1167              		.fpu fpv4-sp-d16
 1169              	ST25FTM_ResetTxSegmentMaxLength:
 1170              	.LFB158:
 430:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 431:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Reset the lenth of a segment to its max value ST25FTM_SEGMENT_LEN */
 432:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** void ST25FTM_ResetTxSegmentMaxLength(void)
 433:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
 1171              		.loc 1 433 1 is_stmt 1 view -0
 1172              		.cfi_startproc
 1173              		@ args = 0, pretend = 0, frame = 0
 1174              		@ frame_needed = 0, uses_anonymous_args = 0
 1175              		@ link register save eliminated.
 434:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****     gFtmState.tx.segmentMaxLength = ST25FTM_SEGMENT_LEN;
 1176              		.loc 1 434 5 view .LVU291
 1177              		.loc 1 434 35 is_stmt 0 view .LVU292
 1178 0000 024B     		ldr	r3, .L114
 1179 0002 41F2A362 		movw	r2, #5795
 1180 0006 DA63     		str	r2, [r3, #60]
 435:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1181              		.loc 1 435 1 view .LVU293
 1182 0008 7047     		bx	lr
 1183              	.L115:
 1184 000a 00BF     		.align	2
 1185              	.L114:
 1186 000c 00000000 		.word	gFtmState
 1187              		.cfi_endproc
 1188              	.LFE158:
 1190              		.section	.text.ST25FTM_GetTxSegmentMaxLength,"ax",%progbits
 1191              		.align	1
 1192              		.global	ST25FTM_GetTxSegmentMaxLength
 1193              		.syntax unified
 1194              		.thumb
 1195              		.thumb_func
 1196              		.fpu fpv4-sp-d16
 1198              	ST25FTM_GetTxSegmentMaxLength:
 1199              	.LFB159:
 436:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** 
 437:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** /*! Get the lenth of a segment (in bytes) */
 438:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** uint32_t ST25FTM_GetTxSegmentMaxLength(void)
 439:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** {
ARM GAS  /tmp/ccC3QsLC.s 			page 31


 1200              		.loc 1 439 1 is_stmt 1 view -0
 1201              		.cfi_startproc
 1202              		@ args = 0, pretend = 0, frame = 0
 1203              		@ frame_needed = 0, uses_anonymous_args = 0
 1204              		@ link register save eliminated.
 440:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c ****   return gFtmState.tx.segmentMaxLength;
 1205              		.loc 1 440 3 view .LVU295
 441:Middlewares/ST/ST25FTM/Src/st25ftm_protocol.c **** }
 1206              		.loc 1 441 1 is_stmt 0 view .LVU296
 1207 0000 014B     		ldr	r3, .L117
 1208 0002 D86B     		ldr	r0, [r3, #60]
 1209 0004 7047     		bx	lr
 1210              	.L118:
 1211 0006 00BF     		.align	2
 1212              	.L117:
 1213 0008 00000000 		.word	gFtmState
 1214              		.cfi_endproc
 1215              	.LFE159:
 1217              		.section	.bss.lastRfField.0,"aw",%nobits
 1218              		.set	.LANCHOR0,. + 0
 1221              	lastRfField.0:
 1222 0000 00       		.space	1
 1223              		.text
 1224              	.Letext0:
 1225              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 1226              		.file 3 "Middlewares/ST/ST25FTM/Inc/st25ftm_protocol.h"
 1227              		.file 4 "Middlewares/ST/ST25FTM/Inc/st25ftm_common.h"
 1228              		.file 5 "/usr/include/newlib/string.h"
 1229              		.file 6 "ST25FTM/App/st25ftm_config.h"
 1230              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 1231              		.file 8 "<built-in>"
ARM GAS  /tmp/ccC3QsLC.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 st25ftm_protocol.c
     /tmp/ccC3QsLC.s:18     .text.ST25FTM_Init:0000000000000000 $t
     /tmp/ccC3QsLC.s:26     .text.ST25FTM_Init:0000000000000000 ST25FTM_Init
     /tmp/ccC3QsLC.s:53     .text.ST25FTM_SetTxFrameMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:60     .text.ST25FTM_SetTxFrameMaxLength:0000000000000000 ST25FTM_SetTxFrameMaxLength
     /tmp/ccC3QsLC.s:77     .text.ST25FTM_SetTxFrameMaxLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:82     .text.ST25FTM_GetTxFrameMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:89     .text.ST25FTM_GetTxFrameMaxLength:0000000000000000 ST25FTM_GetTxFrameMaxLength
     /tmp/ccC3QsLC.s:104    .text.ST25FTM_GetTxFrameMaxLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:109    .text.ST25FTM_SetRxFrameMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:116    .text.ST25FTM_SetRxFrameMaxLength:0000000000000000 ST25FTM_SetRxFrameMaxLength
     /tmp/ccC3QsLC.s:133    .text.ST25FTM_SetRxFrameMaxLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:138    .text.ST25FTM_GetRxFrameMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:145    .text.ST25FTM_GetRxFrameMaxLength:0000000000000000 ST25FTM_GetRxFrameMaxLength
     /tmp/ccC3QsLC.s:160    .text.ST25FTM_GetRxFrameMaxLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:165    .text.ST25FTM_SendCommand:0000000000000000 $t
     /tmp/ccC3QsLC.s:172    .text.ST25FTM_SendCommand:0000000000000000 ST25FTM_SendCommand
     /tmp/ccC3QsLC.s:219    .text.ST25FTM_SendCommand:0000000000000020 $d
     /tmp/ccC3QsLC.s:224    .text.ST25FTM_ReceiveCommand:0000000000000000 $t
     /tmp/ccC3QsLC.s:231    .text.ST25FTM_ReceiveCommand:0000000000000000 ST25FTM_ReceiveCommand
     /tmp/ccC3QsLC.s:268    .text.ST25FTM_ReceiveCommand:0000000000000020 $d
     /tmp/ccC3QsLC.s:273    .text.ST25FTM_Runner:0000000000000000 $t
     /tmp/ccC3QsLC.s:280    .text.ST25FTM_Runner:0000000000000000 ST25FTM_Runner
     /tmp/ccC3QsLC.s:484    .text.ST25FTM_Runner:00000000000000d0 $d
     /tmp/ccC3QsLC.s:490    .text.ST25FTM_IsNewFrame:0000000000000000 $t
     /tmp/ccC3QsLC.s:497    .text.ST25FTM_IsNewFrame:0000000000000000 ST25FTM_IsNewFrame
     /tmp/ccC3QsLC.s:528    .text.ST25FTM_IsNewFrame:0000000000000014 $d
     /tmp/ccC3QsLC.s:533    .text.ST25FTM_GetTransferProgress:0000000000000000 $t
     /tmp/ccC3QsLC.s:540    .text.ST25FTM_GetTransferProgress:0000000000000000 ST25FTM_GetTransferProgress
     /tmp/ccC3QsLC.s:608    .text.ST25FTM_GetTransferProgress:0000000000000040 $d
     /tmp/ccC3QsLC.s:613    .text.ST25FTM_GetAvailableDataLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:620    .text.ST25FTM_GetAvailableDataLength:0000000000000000 ST25FTM_GetAvailableDataLength
     /tmp/ccC3QsLC.s:635    .text.ST25FTM_GetAvailableDataLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:640    .text.ST25FTM_ReadBuffer:0000000000000000 $t
     /tmp/ccC3QsLC.s:647    .text.ST25FTM_ReadBuffer:0000000000000000 ST25FTM_ReadBuffer
     /tmp/ccC3QsLC.s:730    .text.ST25FTM_ReadBuffer:0000000000000060 $d
     /tmp/ccC3QsLC.s:735    .text.ST25FTM_GetReadBufferOffset:0000000000000000 $t
     /tmp/ccC3QsLC.s:742    .text.ST25FTM_GetReadBufferOffset:0000000000000000 ST25FTM_GetReadBufferOffset
     /tmp/ccC3QsLC.s:757    .text.ST25FTM_GetReadBufferOffset:0000000000000008 $d
     /tmp/ccC3QsLC.s:762    .text.ST25FTM_GetFieldState:0000000000000000 $t
     /tmp/ccC3QsLC.s:769    .text.ST25FTM_GetFieldState:0000000000000000 ST25FTM_GetFieldState
     /tmp/ccC3QsLC.s:784    .text.ST25FTM_GetFieldState:0000000000000008 $d
     /tmp/ccC3QsLC.s:789    .text.ST25FTM_GetTotalLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:796    .text.ST25FTM_GetTotalLength:0000000000000000 ST25FTM_GetTotalLength
     /tmp/ccC3QsLC.s:811    .text.ST25FTM_GetTotalLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:816    .text.ST25FTM_GetRetryLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:823    .text.ST25FTM_GetRetryLength:0000000000000000 ST25FTM_GetRetryLength
     /tmp/ccC3QsLC.s:838    .text.ST25FTM_GetRetryLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:843    .text.ST25FTM_IsReceptionComplete:0000000000000000 $t
     /tmp/ccC3QsLC.s:850    .text.ST25FTM_IsReceptionComplete:0000000000000000 ST25FTM_IsReceptionComplete
     /tmp/ccC3QsLC.s:888    .text.ST25FTM_IsReceptionComplete:0000000000000020 $d
     /tmp/ccC3QsLC.s:893    .text.ST25FTM_IsTransmissionComplete:0000000000000000 $t
     /tmp/ccC3QsLC.s:900    .text.ST25FTM_IsTransmissionComplete:0000000000000000 ST25FTM_IsTransmissionComplete
     /tmp/ccC3QsLC.s:935    .text.ST25FTM_IsTransmissionComplete:0000000000000018 $d
     /tmp/ccC3QsLC.s:940    .text.ST25FTM_IsIdle:0000000000000000 $t
     /tmp/ccC3QsLC.s:947    .text.ST25FTM_IsIdle:0000000000000000 ST25FTM_IsIdle
ARM GAS  /tmp/ccC3QsLC.s 			page 33


     /tmp/ccC3QsLC.s:974    .text.ST25FTM_IsIdle:0000000000000010 $d
     /tmp/ccC3QsLC.s:979    .text.ST25FTM_CheckError:0000000000000000 $t
     /tmp/ccC3QsLC.s:986    .text.ST25FTM_CheckError:0000000000000000 ST25FTM_CheckError
     /tmp/ccC3QsLC.s:1024   .text.ST25FTM_CheckError:0000000000000020 $d
     /tmp/ccC3QsLC.s:1029   .text.ST25FTM_Reset:0000000000000000 $t
     /tmp/ccC3QsLC.s:1036   .text.ST25FTM_Reset:0000000000000000 ST25FTM_Reset
     /tmp/ccC3QsLC.s:1065   .text.ST25FTM_Reset:0000000000000014 $d
     /tmp/ccC3QsLC.s:1070   .text.ST25FTM_Status:0000000000000000 $t
     /tmp/ccC3QsLC.s:1077   .text.ST25FTM_Status:0000000000000000 ST25FTM_Status
     /tmp/ccC3QsLC.s:1122   .text.ST25FTM_Status:0000000000000020 $d
     /tmp/ccC3QsLC.s:1127   .text.ST25FTM_SetTxSegmentMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:1134   .text.ST25FTM_SetTxSegmentMaxLength:0000000000000000 ST25FTM_SetTxSegmentMaxLength
     /tmp/ccC3QsLC.s:1157   .text.ST25FTM_SetTxSegmentMaxLength:0000000000000010 $d
     /tmp/ccC3QsLC.s:1162   .text.ST25FTM_ResetTxSegmentMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:1169   .text.ST25FTM_ResetTxSegmentMaxLength:0000000000000000 ST25FTM_ResetTxSegmentMaxLength
     /tmp/ccC3QsLC.s:1186   .text.ST25FTM_ResetTxSegmentMaxLength:000000000000000c $d
     /tmp/ccC3QsLC.s:1191   .text.ST25FTM_GetTxSegmentMaxLength:0000000000000000 $t
     /tmp/ccC3QsLC.s:1198   .text.ST25FTM_GetTxSegmentMaxLength:0000000000000000 ST25FTM_GetTxSegmentMaxLength
     /tmp/ccC3QsLC.s:1213   .text.ST25FTM_GetTxSegmentMaxLength:0000000000000008 $d
     /tmp/ccC3QsLC.s:1221   .bss.lastRfField.0:0000000000000000 lastRfField.0
     /tmp/ccC3QsLC.s:1222   .bss.lastRfField.0:0000000000000000 $d

UNDEFINED SYMBOLS
ST25FTM_State_Init
ST25FTM_DeviceInit
ST25FTM_UpdateFieldStatus
gFtmState
ST25FTM_TxResetSegment
HAL_GetTick
ST25FTM_CompareTime
ST25FTM_Transmit
ST25FTM_Receive
memcpy
memmove
