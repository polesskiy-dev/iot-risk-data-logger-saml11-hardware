ARM GAS  /tmp/ccAHlaRc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"nfc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.handleInit,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	handleInit:
  26              	.LVL0:
  27              	.LFB142:
  28              		.file 1 "app/tasks/nfc/nfc.c"
   1:app/tasks/nfc/nfc.c **** /**
   2:app/tasks/nfc/nfc.c ****  * @file nfc.c
   3:app/tasks/nfc/nfc.c ****  * @brief NFC task and initialization for ST25DV NFC tag.
   4:app/tasks/nfc/nfc.c ****  *
   5:app/tasks/nfc/nfc.c ****  * @see https://www.st.com/resource/en/application_note/an5512-st25-fast-transfer-mode-embedded-lib
   6:app/tasks/nfc/nfc.c ****  * @see https://www.st.com/resource/en/application_note/an4910-data-exchange-between-wired-ic-and-w
   7:app/tasks/nfc/nfc.c ****  */
   8:app/tasks/nfc/nfc.c **** 
   9:app/tasks/nfc/nfc.c **** #include "nfc.h"
  10:app/tasks/nfc/nfc.c **** #include "nfc_handlers.h"
  11:app/tasks/nfc/nfc.c **** 
  12:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message);
  13:app/tasks/nfc/nfc.c **** static osStatus_t handleInit(NFC_Actor_t *this, message_t *message);
  14:app/tasks/nfc/nfc.c **** 
  15:app/tasks/nfc/nfc.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  16:app/tasks/nfc/nfc.c **** 
  17:app/tasks/nfc/nfc.c **** NFC_Actor_t NFC_Actor = {
  18:app/tasks/nfc/nfc.c ****         .super = {
  19:app/tasks/nfc/nfc.c ****                 .actorId = NFC_ACTOR_ID,
  20:app/tasks/nfc/nfc.c ****                 .messageHandler = (messageHandler_t) handleNFCFSM,
  21:app/tasks/nfc/nfc.c ****                 .osMessageQueueId = NULL,
  22:app/tasks/nfc/nfc.c ****                 .osThreadId = NULL,
  23:app/tasks/nfc/nfc.c ****         },
  24:app/tasks/nfc/nfc.c ****         .state = NFC_NO_STATE
  25:app/tasks/nfc/nfc.c **** };
  26:app/tasks/nfc/nfc.c **** 
  27:app/tasks/nfc/nfc.c **** uint32_t nfcTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  28:app/tasks/nfc/nfc.c **** StaticTask_t nfcTaskControlBlock;
  29:app/tasks/nfc/nfc.c **** const osThreadAttr_t nfcTaskDescription = {
  30:app/tasks/nfc/nfc.c ****         .name = "nfcTask",
ARM GAS  /tmp/ccAHlaRc.s 			page 2


  31:app/tasks/nfc/nfc.c ****         .cb_mem = &nfcTaskControlBlock,
  32:app/tasks/nfc/nfc.c ****         .cb_size = sizeof(nfcTaskControlBlock),
  33:app/tasks/nfc/nfc.c ****         .stack_mem = &nfcTaskBuffer[0],
  34:app/tasks/nfc/nfc.c ****         .stack_size = sizeof(nfcTaskBuffer),
  35:app/tasks/nfc/nfc.c ****         .priority = (osPriority_t) osPriorityNormal,
  36:app/tasks/nfc/nfc.c **** };
  37:app/tasks/nfc/nfc.c **** 
  38:app/tasks/nfc/nfc.c **** actor_t* NFC_TaskInit(void) {
  39:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
  40:app/tasks/nfc/nfc.c ****     .name = "nfcQueue"
  41:app/tasks/nfc/nfc.c ****   });
  42:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
  43:app/tasks/nfc/nfc.c **** 
  44:app/tasks/nfc/nfc.c ****   return (actor_t*) &NFC_Actor;
  45:app/tasks/nfc/nfc.c **** }
  46:app/tasks/nfc/nfc.c **** 
  47:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
  48:app/tasks/nfc/nfc.c ****   (void) argument; // Avoid unused parameter warning
  49:app/tasks/nfc/nfc.c ****   message_t msg;
  50:app/tasks/nfc/nfc.c **** 
  51:app/tasks/nfc/nfc.c ****   /* Reset Mailbox enable to allow write to EEPROM */
  52:app/tasks/nfc/nfc.c **** //  ST25DV_ResetMBEN_Dyn(&st25dv);
  53:app/tasks/nfc/nfc.c **** 
  54:app/tasks/nfc/nfc.c ****   for (;;) {
  55:app/tasks/nfc/nfc.c ****     // Wait for messages from the queue
  56:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
  57:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
  58:app/tasks/nfc/nfc.c **** 
  59:app/tasks/nfc/nfc.c ****       if (status != osOK) {
  60:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
  61:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
  63:app/tasks/nfc/nfc.c ****       }
  64:app/tasks/nfc/nfc.c ****     }
  65:app/tasks/nfc/nfc.c ****   }
  66:app/tasks/nfc/nfc.c **** }
  67:app/tasks/nfc/nfc.c **** 
  68:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
  69:app/tasks/nfc/nfc.c ****   switch (this->state) {
  70:app/tasks/nfc/nfc.c ****     case NFC_NO_STATE:
  71:app/tasks/nfc/nfc.c ****       handleInit(this, message);
  72:app/tasks/nfc/nfc.c ****       return osOK;
  73:app/tasks/nfc/nfc.c ****     case NFC_STANDBY_STATE:
  74:app/tasks/nfc/nfc.c ****       // TODO handle low power state
  75:app/tasks/nfc/nfc.c ****       return osOK;
  76:app/tasks/nfc/nfc.c ****     default:
  77:app/tasks/nfc/nfc.c ****       return osOK;
  78:app/tasks/nfc/nfc.c ****   }
  79:app/tasks/nfc/nfc.c **** 
  80:app/tasks/nfc/nfc.c **** //  switch (message->event) {
  81:app/tasks/nfc/nfc.c **** //    case NFC_GPO_INTERRUPT:
  82:app/tasks/nfc/nfc.c **** //      NFC_HandleGPOInterrupt(&st25dv);
  83:app/tasks/nfc/nfc.c **** //      return osOK;
  84:app/tasks/nfc/nfc.c **** //    case NFC_MAILBOX_HAS_NEW_MESSAGE:
  85:app/tasks/nfc/nfc.c **** //      fprintf(stdout, "Mailbox has new message\n");
  86:app/tasks/nfc/nfc.c **** //      NFC_ReadMailboxTo(&st25dv, mailboxBuffer);
  87:app/tasks/nfc/nfc.c **** //      // Print for debug purposes
ARM GAS  /tmp/ccAHlaRc.s 			page 3


  88:app/tasks/nfc/nfc.c **** //      for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
  89:app/tasks/nfc/nfc.c **** //        fprintf(stdout, "0x%x ", mailboxBuffer[i]);
  90:app/tasks/nfc/nfc.c **** //      }
  91:app/tasks/nfc/nfc.c **** //      return osOK;
  92:app/tasks/nfc/nfc.c **** //    default:
  93:app/tasks/nfc/nfc.c **** //      return osError;
  94:app/tasks/nfc/nfc.c **** //  }
  95:app/tasks/nfc/nfc.c **** }
  96:app/tasks/nfc/nfc.c **** 
  97:app/tasks/nfc/nfc.c **** static osStatus_t handleInit(NFC_Actor_t *this, message_t *message) {
  29              		.loc 1 97 69 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  98:app/tasks/nfc/nfc.c ****   osStatus_t status;
  33              		.loc 1 98 3 view .LVU1
  99:app/tasks/nfc/nfc.c **** 
 100:app/tasks/nfc/nfc.c ****   switch (message->event) {
  34              		.loc 1 100 3 view .LVU2
  35              		.loc 1 100 18 is_stmt 0 view .LVU3
  36 0000 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
  37              		.loc 1 100 3 view .LVU4
  38 0002 012B     		cmp	r3, #1
  39 0004 01D0     		beq	.L9
 101:app/tasks/nfc/nfc.c ****     case GLOBAL_CMD_INITIALIZE:
 102:app/tasks/nfc/nfc.c ****       status = NFC_ST25DVInit(&this->st25dv);
 103:app/tasks/nfc/nfc.c ****       if (status != NFCTAG_OK)
 104:app/tasks/nfc/nfc.c ****         return osError;
 105:app/tasks/nfc/nfc.c ****       this->state = NFC_STANDBY_STATE;
 106:app/tasks/nfc/nfc.c **** 
 107:app/tasks/nfc/nfc.c ****       return osOK;
 108:app/tasks/nfc/nfc.c ****     default:
 109:app/tasks/nfc/nfc.c ****       return osOK;
  40              		.loc 1 109 14 view .LVU5
  41 0006 0020     		movs	r0, #0
  42              	.LVL1:
 110:app/tasks/nfc/nfc.c ****   }
 111:app/tasks/nfc/nfc.c **** }...
  43              		.loc 1 111 1 view .LVU6
  44 0008 7047     		bx	lr
  45              	.LVL2:
  46              	.L9:
  97:app/tasks/nfc/nfc.c **** static osStatus_t handleInit(NFC_Actor_t *this, message_t *message) {
  47              		.loc 1 97 69 view .LVU7
  48 000a 10B5     		push	{r4, lr}
  49              	.LCFI0:
  50              		.cfi_def_cfa_offset 8
  51              		.cfi_offset 4, -8
  52              		.cfi_offset 14, -4
  53 000c 0446     		mov	r4, r0
 102:app/tasks/nfc/nfc.c ****       status = NFC_ST25DVInit(&this->st25dv);
  54              		.loc 1 102 7 is_stmt 1 view .LVU8
 102:app/tasks/nfc/nfc.c ****       status = NFC_ST25DVInit(&this->st25dv);
  55              		.loc 1 102 16 is_stmt 0 view .LVU9
  56 000e 1430     		adds	r0, r0, #20
  57              	.LVL3:
 102:app/tasks/nfc/nfc.c ****       status = NFC_ST25DVInit(&this->st25dv);
ARM GAS  /tmp/ccAHlaRc.s 			page 4


  58              		.loc 1 102 16 view .LVU10
  59 0010 FFF7FEFF 		bl	NFC_ST25DVInit
  60              	.LVL4:
 103:app/tasks/nfc/nfc.c ****       if (status != NFCTAG_OK)
  61              		.loc 1 103 7 is_stmt 1 view .LVU11
 103:app/tasks/nfc/nfc.c ****       if (status != NFCTAG_OK)
  62              		.loc 1 103 10 is_stmt 0 view .LVU12
  63 0014 10B9     		cbnz	r0, .L4
 105:app/tasks/nfc/nfc.c ****       this->state = NFC_STANDBY_STATE;
  64              		.loc 1 105 7 is_stmt 1 view .LVU13
 105:app/tasks/nfc/nfc.c ****       this->state = NFC_STANDBY_STATE;
  65              		.loc 1 105 19 is_stmt 0 view .LVU14
  66 0016 0123     		movs	r3, #1
  67 0018 2374     		strb	r3, [r4, #16]
 107:app/tasks/nfc/nfc.c ****       return osOK;
  68              		.loc 1 107 7 is_stmt 1 view .LVU15
  69              	.LVL5:
  70              	.L1:
  71              		.loc 1 111 1 is_stmt 0 view .LVU16
  72 001a 10BD     		pop	{r4, pc}
  73              	.LVL6:
  74              	.L4:
 104:app/tasks/nfc/nfc.c ****         return osError;
  75              		.loc 1 104 16 view .LVU17
  76 001c 4FF0FF30 		mov	r0, #-1
  77              	.LVL7:
 104:app/tasks/nfc/nfc.c ****         return osError;
  78              		.loc 1 104 16 view .LVU18
  79 0020 FBE7     		b	.L1
  80              		.cfi_endproc
  81              	.LFE142:
  83              		.section	.text.handleNFCFSM,"ax",%progbits
  84              		.align	1
  85              		.syntax unified
  86              		.thumb
  87              		.thumb_func
  88              		.fpu fpv4-sp-d16
  90              	handleNFCFSM:
  91              	.LVL8:
  92              	.LFB141:
  68:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
  93              		.loc 1 68 71 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  68:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
  97              		.loc 1 68 71 is_stmt 0 view .LVU20
  98 0000 08B5     		push	{r3, lr}
  99              	.LCFI1:
 100              		.cfi_def_cfa_offset 8
 101              		.cfi_offset 3, -8
 102              		.cfi_offset 14, -4
  69:app/tasks/nfc/nfc.c ****   switch (this->state) {
 103              		.loc 1 69 3 is_stmt 1 view .LVU21
  69:app/tasks/nfc/nfc.c ****   switch (this->state) {
 104              		.loc 1 69 15 is_stmt 0 view .LVU22
 105 0002 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
ARM GAS  /tmp/ccAHlaRc.s 			page 5


  69:app/tasks/nfc/nfc.c ****   switch (this->state) {
 106              		.loc 1 69 3 view .LVU23
 107 0004 0BB1     		cbz	r3, .L13
 108              	.LVL9:
 109              	.L11:
  95:app/tasks/nfc/nfc.c **** }
 110              		.loc 1 95 1 view .LVU24
 111 0006 0020     		movs	r0, #0
 112 0008 08BD     		pop	{r3, pc}
 113              	.LVL10:
 114              	.L13:
  71:app/tasks/nfc/nfc.c ****       handleInit(this, message);
 115              		.loc 1 71 7 is_stmt 1 view .LVU25
 116 000a FFF7FEFF 		bl	handleInit
 117              	.LVL11:
  72:app/tasks/nfc/nfc.c ****       return osOK;
 118              		.loc 1 72 7 view .LVU26
  72:app/tasks/nfc/nfc.c ****       return osOK;
 119              		.loc 1 72 14 is_stmt 0 view .LVU27
 120 000e FAE7     		b	.L11
 121              		.cfi_endproc
 122              	.LFE141:
 124              		.section	.rodata.NFC_Task.str1.4,"aMS",%progbits,1
 125              		.align	2
 126              	.LC0:
 127 0000 4E46435F 		.ascii	"NFC_STATE_ERROR\000"
 127      53544154 
 127      455F4552 
 127      524F5200 
 128              		.align	2
 129              	.LC1:
 130 0010 256C753A 		.ascii	"%lu: %s\012\000"
 130      2025730A 
 130      00
 131              		.section	.text.NFC_Task,"ax",%progbits
 132              		.align	1
 133              		.global	NFC_Task
 134              		.syntax unified
 135              		.thumb
 136              		.thumb_func
 137              		.fpu fpv4-sp-d16
 139              	NFC_Task:
 140              	.LFB140:
  47:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
 141              		.loc 1 47 31 is_stmt 1 view -0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 24
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145              	.LVL12:
  47:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
 146              		.loc 1 47 31 is_stmt 0 view .LVU29
 147 0000 00B5     		push	{lr}
 148              	.LCFI2:
 149              		.cfi_def_cfa_offset 4
 150              		.cfi_offset 14, -4
 151 0002 87B0     		sub	sp, sp, #28
 152              	.LCFI3:
ARM GAS  /tmp/ccAHlaRc.s 			page 6


 153              		.cfi_def_cfa_offset 32
 154              	.LVL13:
 155              	.L15:
  48:app/tasks/nfc/nfc.c ****   (void) argument; // Avoid unused parameter warning
 156              		.loc 1 48 3 is_stmt 1 view .LVU30
  49:app/tasks/nfc/nfc.c ****   message_t msg;
 157              		.loc 1 49 3 view .LVU31
  54:app/tasks/nfc/nfc.c ****   for (;;) {
 158              		.loc 1 54 3 view .LVU32
  56:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 159              		.loc 1 56 5 view .LVU33
  56:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 160              		.loc 1 56 9 is_stmt 0 view .LVU34
 161 0004 4FF0FF33 		mov	r3, #-1
 162 0008 0022     		movs	r2, #0
 163 000a 6946     		mov	r1, sp
 164 000c 1348     		ldr	r0, .L19
 165 000e 8068     		ldr	r0, [r0, #8]
 166 0010 FFF7FEFF 		bl	osMessageQueueGet
 167              	.LVL14:
  56:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 168              		.loc 1 56 8 view .LVU35
 169 0014 0028     		cmp	r0, #0
 170 0016 F5D1     		bne	.L15
 171              	.LBB2:
  57:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
 172              		.loc 1 57 7 is_stmt 1 view .LVU36
  57:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
 173              		.loc 1 57 42 is_stmt 0 view .LVU37
 174 0018 1048     		ldr	r0, .L19
 175 001a C368     		ldr	r3, [r0, #12]
  57:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
 176              		.loc 1 57 27 view .LVU38
 177 001c 6946     		mov	r1, sp
 178 001e 9847     		blx	r3
 179              	.LVL15:
  59:app/tasks/nfc/nfc.c ****       if (status != osOK) {
 180              		.loc 1 59 7 is_stmt 1 view .LVU39
  59:app/tasks/nfc/nfc.c ****       if (status != osOK) {
 181              		.loc 1 59 10 is_stmt 0 view .LVU40
 182 0020 0028     		cmp	r0, #0
 183 0022 EFD0     		beq	.L15
 184              	.LBB3:
  60:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 185              		.loc 1 60 9 is_stmt 1 view .LVU41
  60:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 186              		.loc 1 60 71 is_stmt 0 view .LVU42
 187 0024 0E4B     		ldr	r3, .L19+4
 188 0026 5B68     		ldr	r3, [r3, #4]
  60:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 189              		.loc 1 60 28 view .LVU43
 190 0028 9868     		ldr	r0, [r3, #8]
 191              	.LVL16:
  61:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 192              		.loc 1 61 9 is_stmt 1 view .LVU44
  61:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 193              		.loc 1 61 55 is_stmt 0 view .LVU45
ARM GAS  /tmp/ccAHlaRc.s 			page 7


 194 002a 0022     		movs	r2, #0
 195 002c 0392     		str	r2, [sp, #12]
 196 002e 0492     		str	r2, [sp, #16]
 197 0030 0592     		str	r2, [sp, #20]
 198 0032 0D23     		movs	r3, #13
 199 0034 8DF80C30 		strb	r3, [sp, #12]
 200 0038 0423     		movs	r3, #4
 201 003a 0493     		str	r3, [sp, #16]
  61:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 202              		.loc 1 61 9 view .LVU46
 203 003c 1346     		mov	r3, r2
 204 003e 03A9     		add	r1, sp, #12
 205 0040 FFF7FEFF 		bl	osMessageQueuePut
 206              	.LVL17:
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 207              		.loc 1 62 9 is_stmt 1 view .LVU47
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 208              		.loc 1 62 9 view .LVU48
 209 0044 054A     		ldr	r2, .L19
 210 0046 0223     		movs	r3, #2
 211 0048 1374     		strb	r3, [r2, #16]
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 212              		.loc 1 62 9 view .LVU49
 213 004a 064B     		ldr	r3, .L19+8
 214 004c 1868     		ldr	r0, [r3]
 215 004e 064B     		ldr	r3, .L19+12
 216 0050 1268     		ldr	r2, [r2]
 217 0052 0649     		ldr	r1, .L19+16
 218 0054 8068     		ldr	r0, [r0, #8]
 219 0056 FFF7FEFF 		bl	fprintf
 220              	.LVL18:
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 221              		.loc 1 62 9 view .LVU50
  62:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 222              		.loc 1 62 46 view .LVU51
 223 005a D3E7     		b	.L15
 224              	.L20:
 225              		.align	2
 226              	.L19:
 227 005c 00000000 		.word	.LANCHOR0
 228 0060 00000000 		.word	ACTORS_LIST_SystemRegistry
 229 0064 00000000 		.word	_impure_ptr
 230 0068 00000000 		.word	.LC0
 231 006c 10000000 		.word	.LC1
 232              	.LBE3:
 233              	.LBE2:
 234              		.cfi_endproc
 235              	.LFE140:
 237              		.section	.rodata.NFC_TaskInit.str1.4,"aMS",%progbits,1
 238              		.align	2
 239              	.LC2:
 240 0000 6E666351 		.ascii	"nfcQueue\000"
 240      75657565 
 240      00
 241              		.section	.text.NFC_TaskInit,"ax",%progbits
 242              		.align	1
 243              		.global	NFC_TaskInit
ARM GAS  /tmp/ccAHlaRc.s 			page 8


 244              		.syntax unified
 245              		.thumb
 246              		.thumb_func
 247              		.fpu fpv4-sp-d16
 249              	NFC_TaskInit:
 250              	.LFB139:
  38:app/tasks/nfc/nfc.c **** actor_t* NFC_TaskInit(void) {
 251              		.loc 1 38 29 view -0
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 24
 254              		@ frame_needed = 0, uses_anonymous_args = 0
 255 0000 30B5     		push	{r4, r5, lr}
 256              	.LCFI4:
 257              		.cfi_def_cfa_offset 12
 258              		.cfi_offset 4, -12
 259              		.cfi_offset 5, -8
 260              		.cfi_offset 14, -4
 261 0002 87B0     		sub	sp, sp, #28
 262              	.LCFI5:
 263              		.cfi_def_cfa_offset 40
  39:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 264              		.loc 1 39 3 view .LVU53
  39:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 265              		.loc 1 39 127 is_stmt 0 view .LVU54
 266 0004 0024     		movs	r4, #0
 267 0006 0094     		str	r4, [sp]
 268 0008 0194     		str	r4, [sp, #4]
 269 000a 0294     		str	r4, [sp, #8]
 270 000c 0394     		str	r4, [sp, #12]
 271 000e 0494     		str	r4, [sp, #16]
 272 0010 0594     		str	r4, [sp, #20]
 273 0012 094B     		ldr	r3, .L23
 274 0014 0093     		str	r3, [sp]
  39:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 275              		.loc 1 39 38 view .LVU55
 276 0016 6A46     		mov	r2, sp
 277 0018 0C21     		movs	r1, #12
 278 001a 0820     		movs	r0, #8
 279 001c FFF7FEFF 		bl	osMessageQueueNew
 280              	.LVL19:
  39:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 281              		.loc 1 39 36 view .LVU56
 282 0020 064D     		ldr	r5, .L23+4
 283 0022 A860     		str	r0, [r5, #8]
  42:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 284              		.loc 1 42 3 is_stmt 1 view .LVU57
  42:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 285              		.loc 1 42 32 is_stmt 0 view .LVU58
 286 0024 064A     		ldr	r2, .L23+8
 287 0026 2146     		mov	r1, r4
 288 0028 0648     		ldr	r0, .L23+12
 289 002a FFF7FEFF 		bl	osThreadNew
 290              	.LVL20:
  42:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 291              		.loc 1 42 30 view .LVU59
 292 002e 6860     		str	r0, [r5, #4]
  44:app/tasks/nfc/nfc.c ****   return (actor_t*) &NFC_Actor;
ARM GAS  /tmp/ccAHlaRc.s 			page 9


 293              		.loc 1 44 3 is_stmt 1 view .LVU60
  45:app/tasks/nfc/nfc.c **** }
 294              		.loc 1 45 1 is_stmt 0 view .LVU61
 295 0030 2846     		mov	r0, r5
 296 0032 07B0     		add	sp, sp, #28
 297              	.LCFI6:
 298              		.cfi_def_cfa_offset 12
 299              		@ sp needed
 300 0034 30BD     		pop	{r4, r5, pc}
 301              	.L24:
 302 0036 00BF     		.align	2
 303              	.L23:
 304 0038 00000000 		.word	.LC2
 305 003c 00000000 		.word	.LANCHOR0
 306 0040 00000000 		.word	.LANCHOR1
 307 0044 00000000 		.word	NFC_Task
 308              		.cfi_endproc
 309              	.LFE139:
 311              		.global	nfcTaskDescription
 312              		.section	.rodata.str1.4,"aMS",%progbits,1
 313              		.align	2
 314              	.LC3:
 315 0000 6E666354 		.ascii	"nfcTask\000"
 315      61736B00 
 316              		.global	nfcTaskControlBlock
 317              		.global	nfcTaskBuffer
 318              		.global	NFC_Actor
 319              		.section	.bss.nfcTaskBuffer,"aw",%nobits
 320              		.align	2
 323              	nfcTaskBuffer:
 324 0000 00000000 		.space	512
 324      00000000 
 324      00000000 
 324      00000000 
 324      00000000 
 325              		.section	.bss.nfcTaskControlBlock,"aw",%nobits
 326              		.align	2
 329              	nfcTaskControlBlock:
 330 0000 00000000 		.space	92
 330      00000000 
 330      00000000 
 330      00000000 
 330      00000000 
 331              		.section	.data.NFC_Actor,"aw"
 332              		.align	2
 333              		.set	.LANCHOR0,. + 0
 336              	NFC_Actor:
 337 0000 04000000 		.word	4
 338 0004 00000000 		.word	0
 339 0008 00000000 		.word	0
 340 000c 00000000 		.word	handleNFCFSM
 341 0010 00       		.byte	0
 342 0011 00000000 		.space	299
 342      00000000 
 342      00000000 
 342      00000000 
 342      00000000 
ARM GAS  /tmp/ccAHlaRc.s 			page 10


 343              		.section	.rodata.nfcTaskDescription,"a"
 344              		.align	2
 345              		.set	.LANCHOR1,. + 0
 348              	nfcTaskDescription:
 349 0000 00000000 		.word	.LC3
 350 0004 00000000 		.space	4
 351 0008 00000000 		.word	nfcTaskControlBlock
 352 000c 5C000000 		.word	92
 353 0010 00000000 		.word	nfcTaskBuffer
 354 0014 00020000 		.word	512
 355 0018 18000000 		.word	24
 356 001c 00000000 		.space	8
 356      00000000 
 357              		.text
 358              	.Letext0:
 359              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 360              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 361              		.file 4 "/usr/include/newlib/sys/_types.h"
 362              		.file 5 "/usr/include/newlib/sys/reent.h"
 363              		.file 6 "/usr/include/newlib/sys/lock.h"
 364              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 365              		.file 8 "/usr/include/newlib/sys/types.h"
 366              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 367              		.file 10 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 368              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 369              		.file 12 "app/core/actor/../../config/events_list/events_list.h"
 370              		.file 13 "app/core/actor/../../config/actors_list/actors_list.h"
 371              		.file 14 "app/core/actor/actor.h"
 372              		.file 15 "Drivers/BSP/Components/ST25DV/st25dv_reg.h"
 373              		.file 16 "Drivers/BSP/Components/ST25DV/st25dv.h"
 374              		.file 17 "app/tasks/nfc/nfc.h"
 375              		.file 18 "app/tasks/nfc/nfc_handlers.h"
 376              		.file 19 "/usr/include/newlib/stdio.h"
ARM GAS  /tmp/ccAHlaRc.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 nfc.c
     /tmp/ccAHlaRc.s:18     .text.handleInit:0000000000000000 $t
     /tmp/ccAHlaRc.s:25     .text.handleInit:0000000000000000 handleInit
     /tmp/ccAHlaRc.s:84     .text.handleNFCFSM:0000000000000000 $t
     /tmp/ccAHlaRc.s:90     .text.handleNFCFSM:0000000000000000 handleNFCFSM
     /tmp/ccAHlaRc.s:125    .rodata.NFC_Task.str1.4:0000000000000000 $d
     /tmp/ccAHlaRc.s:132    .text.NFC_Task:0000000000000000 $t
     /tmp/ccAHlaRc.s:139    .text.NFC_Task:0000000000000000 NFC_Task
     /tmp/ccAHlaRc.s:227    .text.NFC_Task:000000000000005c $d
     /tmp/ccAHlaRc.s:238    .rodata.NFC_TaskInit.str1.4:0000000000000000 $d
     /tmp/ccAHlaRc.s:242    .text.NFC_TaskInit:0000000000000000 $t
     /tmp/ccAHlaRc.s:249    .text.NFC_TaskInit:0000000000000000 NFC_TaskInit
     /tmp/ccAHlaRc.s:304    .text.NFC_TaskInit:0000000000000038 $d
     /tmp/ccAHlaRc.s:348    .rodata.nfcTaskDescription:0000000000000000 nfcTaskDescription
     /tmp/ccAHlaRc.s:313    .rodata.str1.4:0000000000000000 $d
     /tmp/ccAHlaRc.s:329    .bss.nfcTaskControlBlock:0000000000000000 nfcTaskControlBlock
     /tmp/ccAHlaRc.s:323    .bss.nfcTaskBuffer:0000000000000000 nfcTaskBuffer
     /tmp/ccAHlaRc.s:336    .data.NFC_Actor:0000000000000000 NFC_Actor
     /tmp/ccAHlaRc.s:320    .bss.nfcTaskBuffer:0000000000000000 $d
     /tmp/ccAHlaRc.s:326    .bss.nfcTaskControlBlock:0000000000000000 $d
     /tmp/ccAHlaRc.s:332    .data.NFC_Actor:0000000000000000 $d
     /tmp/ccAHlaRc.s:344    .rodata.nfcTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
NFC_ST25DVInit
osMessageQueueGet
osMessageQueuePut
fprintf
ACTORS_LIST_SystemRegistry
_impure_ptr
osMessageQueueNew
osThreadNew
