ARM GAS  /tmp/cc5eGk6V.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"nfc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.handleInit.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 4E464320 		.ascii	"NFC task initialized, UID: 0x%x %x\012\000"
  20      7461736B 
  20      20696E69 
  20      7469616C 
  20      697A6564 
  21              		.align	2
  22              	.LC1:
  23 0024 4E46435F 		.ascii	"NFC_STANDBY_STATE\000"
  23      5354414E 
  23      4442595F 
  23      53544154 
  23      4500
  24 0036 0000     		.align	2
  25              	.LC2:
  26 0038 256C753A 		.ascii	"%lu: %s\012\000"
  26      2025730A 
  26      00
  27              		.section	.text.handleInit,"ax",%progbits
  28              		.align	1
  29              		.arch armv7e-m
  30              		.syntax unified
  31              		.thumb
  32              		.thumb_func
  33              		.fpu fpv4-sp-d16
  35              	handleInit:
  36              	.LVL0:
  37              	.LFB142:
  38              		.file 1 "app/tasks/nfc/nfc.c"
   1:app/tasks/nfc/nfc.c **** /**
   2:app/tasks/nfc/nfc.c ****  * @file nfc.c
   3:app/tasks/nfc/nfc.c ****  * @brief NFC task and initialization for ST25DV NFC tag.
   4:app/tasks/nfc/nfc.c ****  *
   5:app/tasks/nfc/nfc.c ****  * @see https://www.st.com/resource/en/application_note/an5512-st25-fast-transfer-mode-embedded-lib
   6:app/tasks/nfc/nfc.c ****  * @see https://www.st.com/resource/en/application_note/an4910-data-exchange-between-wired-ic-and-w
   7:app/tasks/nfc/nfc.c ****  */
   8:app/tasks/nfc/nfc.c **** 
   9:app/tasks/nfc/nfc.c **** #include "nfc.h"
  10:app/tasks/nfc/nfc.c **** #include "nfc_handlers.h"
ARM GAS  /tmp/cc5eGk6V.s 			page 2


  11:app/tasks/nfc/nfc.c **** 
  12:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message);
  13:app/tasks/nfc/nfc.c **** static osStatus_t handleInit(NFC_Actor_t *this, message_t *message);
  14:app/tasks/nfc/nfc.c **** static osStatus_t handleStandby(NFC_Actor_t *this, message_t *message);
  15:app/tasks/nfc/nfc.c **** static osStatus_t handleMailboxTransmit(NFC_Actor_t *this, message_t *message);
  16:app/tasks/nfc/nfc.c **** 
  17:app/tasks/nfc/nfc.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  18:app/tasks/nfc/nfc.c **** 
  19:app/tasks/nfc/nfc.c **** NFC_Actor_t NFC_Actor = {
  20:app/tasks/nfc/nfc.c ****         .super = {
  21:app/tasks/nfc/nfc.c ****                 .actorId = NFC_ACTOR_ID,
  22:app/tasks/nfc/nfc.c ****                 .messageHandler = (messageHandler_t) handleNFCFSM,
  23:app/tasks/nfc/nfc.c ****                 .osMessageQueueId = NULL,
  24:app/tasks/nfc/nfc.c ****                 .osThreadId = NULL,
  25:app/tasks/nfc/nfc.c ****         },
  26:app/tasks/nfc/nfc.c ****         .state = NFC_NO_STATE
  27:app/tasks/nfc/nfc.c **** };
  28:app/tasks/nfc/nfc.c **** 
  29:app/tasks/nfc/nfc.c **** uint32_t nfcTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  30:app/tasks/nfc/nfc.c **** StaticTask_t nfcTaskControlBlock;
  31:app/tasks/nfc/nfc.c **** const osThreadAttr_t nfcTaskDescription = {
  32:app/tasks/nfc/nfc.c ****         .name = "nfcTask",
  33:app/tasks/nfc/nfc.c ****         .cb_mem = &nfcTaskControlBlock,
  34:app/tasks/nfc/nfc.c ****         .cb_size = sizeof(nfcTaskControlBlock),
  35:app/tasks/nfc/nfc.c ****         .stack_mem = &nfcTaskBuffer[0],
  36:app/tasks/nfc/nfc.c ****         .stack_size = sizeof(nfcTaskBuffer),
  37:app/tasks/nfc/nfc.c ****         .priority = (osPriority_t) osPriorityNormal,
  38:app/tasks/nfc/nfc.c **** };
  39:app/tasks/nfc/nfc.c **** 
  40:app/tasks/nfc/nfc.c **** actor_t* NFC_TaskInit(void) {
  41:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
  42:app/tasks/nfc/nfc.c ****     .name = "nfcQueue"
  43:app/tasks/nfc/nfc.c ****   });
  44:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
  45:app/tasks/nfc/nfc.c **** 
  46:app/tasks/nfc/nfc.c ****   return (actor_t*) &NFC_Actor;
  47:app/tasks/nfc/nfc.c **** }
  48:app/tasks/nfc/nfc.c **** 
  49:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
  50:app/tasks/nfc/nfc.c ****   (void) argument; // Avoid unused parameter warning
  51:app/tasks/nfc/nfc.c ****   message_t msg;
  52:app/tasks/nfc/nfc.c **** 
  53:app/tasks/nfc/nfc.c ****   /* Reset Mailbox enable to allow write to EEPROM */
  54:app/tasks/nfc/nfc.c **** //  ST25DV_ResetMBEN_Dyn(&st25dv);
  55:app/tasks/nfc/nfc.c **** 
  56:app/tasks/nfc/nfc.c ****   for (;;) {
  57:app/tasks/nfc/nfc.c ****     // Wait for messages from the queue
  58:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
  59:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
  60:app/tasks/nfc/nfc.c **** 
  61:app/tasks/nfc/nfc.c ****       if (status != osOK) {
  62:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
  63:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
  65:app/tasks/nfc/nfc.c ****       }
  66:app/tasks/nfc/nfc.c ****     }
  67:app/tasks/nfc/nfc.c ****   }
ARM GAS  /tmp/cc5eGk6V.s 			page 3


  68:app/tasks/nfc/nfc.c **** }
  69:app/tasks/nfc/nfc.c **** 
  70:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
  71:app/tasks/nfc/nfc.c ****   switch (this->state) {
  72:app/tasks/nfc/nfc.c ****     case NFC_NO_STATE:
  73:app/tasks/nfc/nfc.c ****       return handleInit(this, message);
  74:app/tasks/nfc/nfc.c ****     case NFC_STANDBY_STATE:
  75:app/tasks/nfc/nfc.c ****       return handleStandby(this, message);
  76:app/tasks/nfc/nfc.c ****     case NFC_MAILBOX_TRANSMIT_STATE:
  77:app/tasks/nfc/nfc.c ****       return handleMailboxTransmit(this, message);
  78:app/tasks/nfc/nfc.c ****     default:
  79:app/tasks/nfc/nfc.c ****       return osOK;
  80:app/tasks/nfc/nfc.c ****   }
  81:app/tasks/nfc/nfc.c **** 
  82:app/tasks/nfc/nfc.c **** //  switch (message->event) {
  83:app/tasks/nfc/nfc.c **** //    case NFC_GPO_INTERRUPT:
  84:app/tasks/nfc/nfc.c **** //      NFC_HandleGPOInterrupt(&st25dv);
  85:app/tasks/nfc/nfc.c **** //      return osOK;
  86:app/tasks/nfc/nfc.c **** //    case NFC_MAILBOX_HAS_NEW_MESSAGE:
  87:app/tasks/nfc/nfc.c **** //      fprintf(stdout, "Mailbox has new message\n");
  88:app/tasks/nfc/nfc.c **** //      NFC_ReadMailboxTo(&st25dv, mailboxBuffer);
  89:app/tasks/nfc/nfc.c **** //      // Print for debug purposes
  90:app/tasks/nfc/nfc.c **** //      for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
  91:app/tasks/nfc/nfc.c **** //        fprintf(stdout, "0x%x ", mailboxBuffer[i]);
  92:app/tasks/nfc/nfc.c **** //      }
  93:app/tasks/nfc/nfc.c **** //      return osOK;
  94:app/tasks/nfc/nfc.c **** //    default:
  95:app/tasks/nfc/nfc.c **** //      return osError;
  96:app/tasks/nfc/nfc.c **** //  }
  97:app/tasks/nfc/nfc.c **** }
  98:app/tasks/nfc/nfc.c **** 
  99:app/tasks/nfc/nfc.c **** static osStatus_t handleInit(NFC_Actor_t *this, message_t *message) {
  39              		.loc 1 99 69 view -0
  40              		.cfi_startproc
  41              		@ args = 0, pretend = 0, frame = 16
  42              		@ frame_needed = 0, uses_anonymous_args = 0
  43              		.loc 1 99 69 is_stmt 0 view .LVU1
  44 0000 70B5     		push	{r4, r5, r6, lr}
  45              	.LCFI0:
  46              		.cfi_def_cfa_offset 16
  47              		.cfi_offset 4, -16
  48              		.cfi_offset 5, -12
  49              		.cfi_offset 6, -8
  50              		.cfi_offset 14, -4
  51 0002 84B0     		sub	sp, sp, #16
  52              	.LCFI1:
  53              		.cfi_def_cfa_offset 32
 100:app/tasks/nfc/nfc.c ****   osStatus_t ioStatus;
  54              		.loc 1 100 3 is_stmt 1 view .LVU2
 101:app/tasks/nfc/nfc.c ****   ST25DV_UID uid = {0x00000000, 0x00000000};
  55              		.loc 1 101 3 view .LVU3
  56              		.loc 1 101 14 is_stmt 0 view .LVU4
  57 0004 0023     		movs	r3, #0
  58 0006 0293     		str	r3, [sp, #8]
  59 0008 0393     		str	r3, [sp, #12]
 102:app/tasks/nfc/nfc.c ****   const ST25DV_PASSWD i2cPwd = {0x00000000, 0x00000000};
  60              		.loc 1 102 3 is_stmt 1 view .LVU5
ARM GAS  /tmp/cc5eGk6V.s 			page 4


  61              		.loc 1 102 23 is_stmt 0 view .LVU6
  62 000a 0093     		str	r3, [sp]
  63 000c 0193     		str	r3, [sp, #4]
 103:app/tasks/nfc/nfc.c **** 
 104:app/tasks/nfc/nfc.c ****   switch (message->event) {
  64              		.loc 1 104 3 is_stmt 1 view .LVU7
  65              		.loc 1 104 18 is_stmt 0 view .LVU8
  66 000e 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
  67              		.loc 1 104 3 view .LVU9
  68 0010 C52B     		cmp	r3, #197
  69 0012 03D0     		beq	.L8
 105:app/tasks/nfc/nfc.c ****     case GLOBAL_CMD_INITIALIZE:
 106:app/tasks/nfc/nfc.c ****       ioStatus = NFC_ST25DVInit(&this->st25dv);
 107:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 108:app/tasks/nfc/nfc.c ****         return osError;
 109:app/tasks/nfc/nfc.c **** 
 110:app/tasks/nfc/nfc.c ****       ioStatus = ST25DV_PresentI2CPassword(&this->st25dv, i2cPwd);
 111:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 112:app/tasks/nfc/nfc.c ****         return osError;
 113:app/tasks/nfc/nfc.c **** 
 114:app/tasks/nfc/nfc.c ****       ioStatus = ST25DV_ReadUID(&this->st25dv, &uid);
 115:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 116:app/tasks/nfc/nfc.c ****         return osError;
 117:app/tasks/nfc/nfc.c **** 
 118:app/tasks/nfc/nfc.c ****       #ifdef DEBUG
 119:app/tasks/nfc/nfc.c ****             fprintf(stdout, "NFC task initialized, UID: 0x%x %x\n", uid.MsbUid, uid.LsbUid);
 120:app/tasks/nfc/nfc.c ****       #endif
 121:app/tasks/nfc/nfc.c **** 
 122:app/tasks/nfc/nfc.c ****       TO_STATE(this, NFC_STANDBY_STATE);
 123:app/tasks/nfc/nfc.c ****       return osOK;
 124:app/tasks/nfc/nfc.c ****     default:
 125:app/tasks/nfc/nfc.c ****       return osOK;
  70              		.loc 1 125 14 view .LVU10
  71 0014 0024     		movs	r4, #0
  72              	.LVL1:
  73              	.L1:
 126:app/tasks/nfc/nfc.c ****   }
 127:app/tasks/nfc/nfc.c **** }
  74              		.loc 1 127 1 view .LVU11
  75 0016 2046     		mov	r0, r4
  76 0018 04B0     		add	sp, sp, #16
  77              	.LCFI2:
  78              		.cfi_remember_state
  79              		.cfi_def_cfa_offset 16
  80              		@ sp needed
  81 001a 70BD     		pop	{r4, r5, r6, pc}
  82              	.LVL2:
  83              	.L8:
  84              	.LCFI3:
  85              		.cfi_restore_state
  86              		.loc 1 127 1 view .LVU12
  87 001c 0546     		mov	r5, r0
 106:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
  88              		.loc 1 106 7 is_stmt 1 view .LVU13
 106:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
  89              		.loc 1 106 18 is_stmt 0 view .LVU14
  90 001e 00F11404 		add	r4, r0, #20
ARM GAS  /tmp/cc5eGk6V.s 			page 5


  91 0022 2046     		mov	r0, r4
  92              	.LVL3:
 106:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
  93              		.loc 1 106 18 view .LVU15
  94 0024 FFF7FEFF 		bl	NFC_ST25DVInit
  95              	.LVL4:
 107:app/tasks/nfc/nfc.c ****         return osError;
  96              		.loc 1 107 7 is_stmt 1 view .LVU16
 107:app/tasks/nfc/nfc.c ****         return osError;
  97              		.loc 1 107 10 is_stmt 0 view .LVU17
  98 0028 F0B9     		cbnz	r0, .L4
 110:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
  99              		.loc 1 110 7 is_stmt 1 view .LVU18
 110:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 100              		.loc 1 110 18 is_stmt 0 view .LVU19
 101 002a 6B46     		mov	r3, sp
 102 002c 93E80600 		ldm	r3, {r1, r2}
 103 0030 2046     		mov	r0, r4
 104              	.LVL5:
 110:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 105              		.loc 1 110 18 view .LVU20
 106 0032 FFF7FEFF 		bl	ST25DV_PresentI2CPassword
 107              	.LVL6:
 111:app/tasks/nfc/nfc.c ****         return osError;
 108              		.loc 1 111 7 is_stmt 1 view .LVU21
 111:app/tasks/nfc/nfc.c ****         return osError;
 109              		.loc 1 111 10 is_stmt 0 view .LVU22
 110 0036 D0B9     		cbnz	r0, .L5
 114:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 111              		.loc 1 114 7 is_stmt 1 view .LVU23
 114:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 112              		.loc 1 114 18 is_stmt 0 view .LVU24
 113 0038 02A9     		add	r1, sp, #8
 114 003a 2046     		mov	r0, r4
 115              	.LVL7:
 114:app/tasks/nfc/nfc.c ****       if (ioStatus != NFCTAG_OK)
 116              		.loc 1 114 18 view .LVU25
 117 003c FFF7FEFF 		bl	ST25DV_ReadUID
 118              	.LVL8:
 115:app/tasks/nfc/nfc.c ****         return osError;
 119              		.loc 1 115 7 is_stmt 1 view .LVU26
 115:app/tasks/nfc/nfc.c ****         return osError;
 120              		.loc 1 115 10 is_stmt 0 view .LVU27
 121 0040 0446     		mov	r4, r0
 122 0042 B8B9     		cbnz	r0, .L6
 119:app/tasks/nfc/nfc.c ****       #endif
 123              		.loc 1 119 13 is_stmt 1 view .LVU28
 119:app/tasks/nfc/nfc.c ****       #endif
 124              		.loc 1 119 21 is_stmt 0 view .LVU29
 125 0044 0D4E     		ldr	r6, .L9
 126 0046 3068     		ldr	r0, [r6]
 127              	.LVL9:
 119:app/tasks/nfc/nfc.c ****       #endif
 128              		.loc 1 119 13 view .LVU30
 129 0048 039B     		ldr	r3, [sp, #12]
 130 004a 029A     		ldr	r2, [sp, #8]
 131 004c 0C49     		ldr	r1, .L9+4
ARM GAS  /tmp/cc5eGk6V.s 			page 6


 132 004e 8068     		ldr	r0, [r0, #8]
 133 0050 FFF7FEFF 		bl	fprintf
 134              	.LVL10:
 122:app/tasks/nfc/nfc.c ****       return osOK;
 135              		.loc 1 122 7 is_stmt 1 view .LVU31
 122:app/tasks/nfc/nfc.c ****       return osOK;
 136              		.loc 1 122 7 view .LVU32
 137 0054 0123     		movs	r3, #1
 138 0056 2B74     		strb	r3, [r5, #16]
 122:app/tasks/nfc/nfc.c ****       return osOK;
 139              		.loc 1 122 7 view .LVU33
 140 0058 3068     		ldr	r0, [r6]
 141 005a 0A4B     		ldr	r3, .L9+8
 142 005c 2A68     		ldr	r2, [r5]
 143 005e 0A49     		ldr	r1, .L9+12
 144 0060 8068     		ldr	r0, [r0, #8]
 145 0062 FFF7FEFF 		bl	fprintf
 146              	.LVL11:
 122:app/tasks/nfc/nfc.c ****       return osOK;
 147              		.loc 1 122 7 view .LVU34
 122:app/tasks/nfc/nfc.c ****       return osOK;
 148              		.loc 1 122 40 view .LVU35
 123:app/tasks/nfc/nfc.c ****     default:
 149              		.loc 1 123 7 view .LVU36
 123:app/tasks/nfc/nfc.c ****     default:
 150              		.loc 1 123 14 is_stmt 0 view .LVU37
 151 0066 D6E7     		b	.L1
 152              	.LVL12:
 153              	.L4:
 108:app/tasks/nfc/nfc.c **** 
 154              		.loc 1 108 16 view .LVU38
 155 0068 4FF0FF34 		mov	r4, #-1
 156 006c D3E7     		b	.L1
 157              	.L5:
 112:app/tasks/nfc/nfc.c **** 
 158              		.loc 1 112 16 view .LVU39
 159 006e 4FF0FF34 		mov	r4, #-1
 160 0072 D0E7     		b	.L1
 161              	.L6:
 116:app/tasks/nfc/nfc.c **** 
 162              		.loc 1 116 16 view .LVU40
 163 0074 4FF0FF34 		mov	r4, #-1
 164 0078 CDE7     		b	.L1
 165              	.L10:
 166 007a 00BF     		.align	2
 167              	.L9:
 168 007c 00000000 		.word	_impure_ptr
 169 0080 00000000 		.word	.LC0
 170 0084 24000000 		.word	.LC1
 171 0088 38000000 		.word	.LC2
 172              		.cfi_endproc
 173              	.LFE142:
 175              		.section	.rodata.handleStandby.str1.4,"aMS",%progbits,1
 176              		.align	2
 177              	.LC3:
 178 0000 4E46435F 		.ascii	"NFC_MAILBOX_TRANSMIT_STATE\000"
 178      4D41494C 
ARM GAS  /tmp/cc5eGk6V.s 			page 7


 178      424F585F 
 178      5452414E 
 178      534D4954 
 179              		.section	.text.handleStandby,"ax",%progbits
 180              		.align	1
 181              		.syntax unified
 182              		.thumb
 183              		.thumb_func
 184              		.fpu fpv4-sp-d16
 186              	handleStandby:
 187              	.LVL13:
 188              	.LFB143:
 128:app/tasks/nfc/nfc.c **** 
 129:app/tasks/nfc/nfc.c **** static osStatus_t handleStandby(NFC_Actor_t *this, message_t *message) {
 189              		.loc 1 129 72 is_stmt 1 view -0
 190              		.cfi_startproc
 191              		@ args = 0, pretend = 0, frame = 0
 192              		@ frame_needed = 0, uses_anonymous_args = 0
 130:app/tasks/nfc/nfc.c ****   switch (message->event) {
 193              		.loc 1 130 3 view .LVU42
 194              		.loc 1 130 18 is_stmt 0 view .LVU43
 195 0000 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 196              		.loc 1 130 3 view .LVU44
 197 0002 D42B     		cmp	r3, #212
 198 0004 01D0     		beq	.L17
 131:app/tasks/nfc/nfc.c ****     case NFC_GPO_INTERRUPT:
 132:app/tasks/nfc/nfc.c ****       NFC_HandleGPOInterrupt(&this->st25dv);
 133:app/tasks/nfc/nfc.c **** 
 134:app/tasks/nfc/nfc.c ****       TO_STATE(this, NFC_MAILBOX_TRANSMIT_STATE);
 135:app/tasks/nfc/nfc.c ****       return osOK;
 136:app/tasks/nfc/nfc.c ****     default:
 137:app/tasks/nfc/nfc.c ****       return osOK;
 138:app/tasks/nfc/nfc.c ****   }
 139:app/tasks/nfc/nfc.c **** }
 199              		.loc 1 139 1 view .LVU45
 200 0006 0020     		movs	r0, #0
 201              	.LVL14:
 202              		.loc 1 139 1 view .LVU46
 203 0008 7047     		bx	lr
 204              	.LVL15:
 205              	.L17:
 129:app/tasks/nfc/nfc.c ****   switch (message->event) {
 206              		.loc 1 129 72 view .LVU47
 207 000a 10B5     		push	{r4, lr}
 208              	.LCFI4:
 209              		.cfi_def_cfa_offset 8
 210              		.cfi_offset 4, -8
 211              		.cfi_offset 14, -4
 212 000c 0446     		mov	r4, r0
 132:app/tasks/nfc/nfc.c **** 
 213              		.loc 1 132 7 is_stmt 1 view .LVU48
 214 000e 1430     		adds	r0, r0, #20
 215              	.LVL16:
 132:app/tasks/nfc/nfc.c **** 
 216              		.loc 1 132 7 is_stmt 0 view .LVU49
 217 0010 FFF7FEFF 		bl	NFC_HandleGPOInterrupt
 218              	.LVL17:
ARM GAS  /tmp/cc5eGk6V.s 			page 8


 134:app/tasks/nfc/nfc.c ****       return osOK;
 219              		.loc 1 134 7 is_stmt 1 view .LVU50
 134:app/tasks/nfc/nfc.c ****       return osOK;
 220              		.loc 1 134 7 view .LVU51
 221 0014 0223     		movs	r3, #2
 222 0016 2374     		strb	r3, [r4, #16]
 134:app/tasks/nfc/nfc.c ****       return osOK;
 223              		.loc 1 134 7 view .LVU52
 224 0018 044B     		ldr	r3, .L18
 225 001a 1868     		ldr	r0, [r3]
 226 001c 044B     		ldr	r3, .L18+4
 227 001e 2268     		ldr	r2, [r4]
 228 0020 0449     		ldr	r1, .L18+8
 229 0022 8068     		ldr	r0, [r0, #8]
 230 0024 FFF7FEFF 		bl	fprintf
 231              	.LVL18:
 134:app/tasks/nfc/nfc.c ****       return osOK;
 232              		.loc 1 134 7 view .LVU53
 134:app/tasks/nfc/nfc.c ****       return osOK;
 233              		.loc 1 134 49 view .LVU54
 135:app/tasks/nfc/nfc.c ****     default:
 234              		.loc 1 135 7 view .LVU55
 235              		.loc 1 139 1 is_stmt 0 view .LVU56
 236 0028 0020     		movs	r0, #0
 237 002a 10BD     		pop	{r4, pc}
 238              	.LVL19:
 239              	.L19:
 240              		.loc 1 139 1 view .LVU57
 241              		.align	2
 242              	.L18:
 243 002c 00000000 		.word	_impure_ptr
 244 0030 00000000 		.word	.LC3
 245 0034 38000000 		.word	.LC2
 246              		.cfi_endproc
 247              	.LFE143:
 249              		.section	.rodata.handleMailboxTransmit.str1.4,"aMS",%progbits,1
 250              		.align	2
 251              	.LC4:
 252 0000 30782578 		.ascii	"0x%x \000"
 252      2000
 253              		.section	.text.handleMailboxTransmit,"ax",%progbits
 254              		.align	1
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 258              		.fpu fpv4-sp-d16
 260              	handleMailboxTransmit:
 261              	.LVL20:
 262              	.LFB144:
 140:app/tasks/nfc/nfc.c **** 
 141:app/tasks/nfc/nfc.c **** static osStatus_t handleMailboxTransmit(NFC_Actor_t *this, message_t *message) {
 263              		.loc 1 141 80 is_stmt 1 view -0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 0
 266              		@ frame_needed = 0, uses_anonymous_args = 0
 267              		.loc 1 141 80 is_stmt 0 view .LVU59
 268 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  /tmp/cc5eGk6V.s 			page 9


 269              	.LCFI5:
 270              		.cfi_def_cfa_offset 16
 271              		.cfi_offset 3, -16
 272              		.cfi_offset 4, -12
 273              		.cfi_offset 5, -8
 274              		.cfi_offset 14, -4
 142:app/tasks/nfc/nfc.c ****   switch (message->event) {
 275              		.loc 1 142 3 is_stmt 1 view .LVU60
 276              		.loc 1 142 18 is_stmt 0 view .LVU61
 277 0002 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 278              		.loc 1 142 3 view .LVU62
 279 0004 D52B     		cmp	r3, #213
 280 0006 01D0     		beq	.L25
 281              	.LVL21:
 282              	.L21:
 143:app/tasks/nfc/nfc.c ****     case NFC_MAILBOX_HAS_NEW_MESSAGE:
 144:app/tasks/nfc/nfc.c ****       NFC_ReadMailboxTo(&this->st25dv, this->mailboxBuffer);
 145:app/tasks/nfc/nfc.c **** 
 146:app/tasks/nfc/nfc.c ****       // Print for debug purposes
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 148:app/tasks/nfc/nfc.c ****         fprintf(stdout, "0x%x ", this->mailboxBuffer[i]);
 149:app/tasks/nfc/nfc.c ****       }
 150:app/tasks/nfc/nfc.c **** 
 151:app/tasks/nfc/nfc.c ****       return osOK;
 152:app/tasks/nfc/nfc.c ****     default:
 153:app/tasks/nfc/nfc.c ****       return osOK;
 154:app/tasks/nfc/nfc.c ****   }
 155:app/tasks/nfc/nfc.c **** }...
 283              		.loc 1 155 1 view .LVU63
 284 0008 0020     		movs	r0, #0
 285 000a 38BD     		pop	{r3, r4, r5, pc}
 286              	.LVL22:
 287              	.L25:
 288              		.loc 1 155 1 view .LVU64
 289 000c 0546     		mov	r5, r0
 144:app/tasks/nfc/nfc.c ****       NFC_ReadMailboxTo(&this->st25dv, this->mailboxBuffer);
 290              		.loc 1 144 7 is_stmt 1 view .LVU65
 291 000e 00F13C01 		add	r1, r0, #60
 292              	.LVL23:
 144:app/tasks/nfc/nfc.c ****       NFC_ReadMailboxTo(&this->st25dv, this->mailboxBuffer);
 293              		.loc 1 144 7 is_stmt 0 view .LVU66
 294 0012 1430     		adds	r0, r0, #20
 295              	.LVL24:
 144:app/tasks/nfc/nfc.c ****       NFC_ReadMailboxTo(&this->st25dv, this->mailboxBuffer);
 296              		.loc 1 144 7 view .LVU67
 297 0014 FFF7FEFF 		bl	NFC_ReadMailboxTo
 298              	.LVL25:
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 299              		.loc 1 147 7 is_stmt 1 view .LVU68
 300              	.LBB2:
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 301              		.loc 1 147 12 view .LVU69
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 302              		.loc 1 147 16 is_stmt 0 view .LVU70
 303 0018 0024     		movs	r4, #0
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 304              		.loc 1 147 7 view .LVU71
ARM GAS  /tmp/cc5eGk6V.s 			page 10


 305 001a 09E0     		b	.L22
 306              	.LVL26:
 307              	.L23:
 148:app/tasks/nfc/nfc.c ****         fprintf(stdout, "0x%x ", this->mailboxBuffer[i]);
 308              		.loc 1 148 9 is_stmt 1 discriminator 3 view .LVU72
 148:app/tasks/nfc/nfc.c ****         fprintf(stdout, "0x%x ", this->mailboxBuffer[i]);
 309              		.loc 1 148 17 is_stmt 0 discriminator 3 view .LVU73
 310 001c 064B     		ldr	r3, .L26
 311 001e 1B68     		ldr	r3, [r3]
 148:app/tasks/nfc/nfc.c ****         fprintf(stdout, "0x%x ", this->mailboxBuffer[i]);
 312              		.loc 1 148 53 discriminator 3 view .LVU74
 313 0020 2A19     		adds	r2, r5, r4
 148:app/tasks/nfc/nfc.c ****         fprintf(stdout, "0x%x ", this->mailboxBuffer[i]);
 314              		.loc 1 148 9 discriminator 3 view .LVU75
 315 0022 92F83C20 		ldrb	r2, [r2, #60]	@ zero_extendqisi2
 316 0026 0549     		ldr	r1, .L26+4
 317 0028 9868     		ldr	r0, [r3, #8]
 318 002a FFF7FEFF 		bl	fprintf
 319              	.LVL27:
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 320              		.loc 1 147 54 is_stmt 1 discriminator 3 view .LVU76
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 321              		.loc 1 147 55 is_stmt 0 discriminator 3 view .LVU77
 322 002e 0134     		adds	r4, r4, #1
 323              	.LVL28:
 324              	.L22:
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 325              		.loc 1 147 23 is_stmt 1 discriminator 1 view .LVU78
 147:app/tasks/nfc/nfc.c ****       for (int i = 0; i < ST25DV_MAX_MAILBOX_LENGTH; i++) {
 326              		.loc 1 147 7 is_stmt 0 discriminator 1 view .LVU79
 327 0030 FF2C     		cmp	r4, #255
 328 0032 F3DD     		ble	.L23
 329 0034 E8E7     		b	.L21
 330              	.L27:
 331 0036 00BF     		.align	2
 332              	.L26:
 333 0038 00000000 		.word	_impure_ptr
 334 003c 00000000 		.word	.LC4
 335              	.LBE2:
 336              		.cfi_endproc
 337              	.LFE144:
 339              		.section	.text.handleNFCFSM,"ax",%progbits
 340              		.align	1
 341              		.syntax unified
 342              		.thumb
 343              		.thumb_func
 344              		.fpu fpv4-sp-d16
 346              	handleNFCFSM:
 347              	.LVL29:
 348              	.LFB141:
  70:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
 349              		.loc 1 70 71 is_stmt 1 view -0
 350              		.cfi_startproc
 351              		@ args = 0, pretend = 0, frame = 0
 352              		@ frame_needed = 0, uses_anonymous_args = 0
  70:app/tasks/nfc/nfc.c **** static osStatus_t handleNFCFSM(NFC_Actor_t *this, message_t *message) {
 353              		.loc 1 70 71 is_stmt 0 view .LVU81
ARM GAS  /tmp/cc5eGk6V.s 			page 11


 354 0000 08B5     		push	{r3, lr}
 355              	.LCFI6:
 356              		.cfi_def_cfa_offset 8
 357              		.cfi_offset 3, -8
 358              		.cfi_offset 14, -4
  71:app/tasks/nfc/nfc.c ****   switch (this->state) {
 359              		.loc 1 71 3 is_stmt 1 view .LVU82
  71:app/tasks/nfc/nfc.c ****   switch (this->state) {
 360              		.loc 1 71 15 is_stmt 0 view .LVU83
 361 0002 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
  71:app/tasks/nfc/nfc.c ****   switch (this->state) {
 362              		.loc 1 71 3 view .LVU84
 363 0004 012B     		cmp	r3, #1
 364 0006 07D0     		beq	.L29
 365 0008 022B     		cmp	r3, #2
 366 000a 08D0     		beq	.L30
 367 000c 0BB1     		cbz	r3, .L34
 368 000e 0020     		movs	r0, #0
 369              	.LVL30:
 370              	.L28:
  97:app/tasks/nfc/nfc.c **** }
 371              		.loc 1 97 1 view .LVU85
 372 0010 08BD     		pop	{r3, pc}
 373              	.LVL31:
 374              	.L34:
  73:app/tasks/nfc/nfc.c ****       return handleInit(this, message);
 375              		.loc 1 73 7 is_stmt 1 view .LVU86
  73:app/tasks/nfc/nfc.c ****       return handleInit(this, message);
 376              		.loc 1 73 14 is_stmt 0 view .LVU87
 377 0012 FFF7FEFF 		bl	handleInit
 378              	.LVL32:
  73:app/tasks/nfc/nfc.c ****       return handleInit(this, message);
 379              		.loc 1 73 14 view .LVU88
 380 0016 FBE7     		b	.L28
 381              	.LVL33:
 382              	.L29:
  75:app/tasks/nfc/nfc.c ****       return handleStandby(this, message);
 383              		.loc 1 75 7 is_stmt 1 view .LVU89
  75:app/tasks/nfc/nfc.c ****       return handleStandby(this, message);
 384              		.loc 1 75 14 is_stmt 0 view .LVU90
 385 0018 FFF7FEFF 		bl	handleStandby
 386              	.LVL34:
  75:app/tasks/nfc/nfc.c ****       return handleStandby(this, message);
 387              		.loc 1 75 14 view .LVU91
 388 001c F8E7     		b	.L28
 389              	.LVL35:
 390              	.L30:
  77:app/tasks/nfc/nfc.c ****       return handleMailboxTransmit(this, message);
 391              		.loc 1 77 7 is_stmt 1 view .LVU92
  77:app/tasks/nfc/nfc.c ****       return handleMailboxTransmit(this, message);
 392              		.loc 1 77 14 is_stmt 0 view .LVU93
 393 001e FFF7FEFF 		bl	handleMailboxTransmit
 394              	.LVL36:
  77:app/tasks/nfc/nfc.c ****       return handleMailboxTransmit(this, message);
 395              		.loc 1 77 14 view .LVU94
 396 0022 F5E7     		b	.L28
 397              		.cfi_endproc
ARM GAS  /tmp/cc5eGk6V.s 			page 12


 398              	.LFE141:
 400              		.section	.rodata.NFC_Task.str1.4,"aMS",%progbits,1
 401              		.align	2
 402              	.LC5:
 403 0000 4E46435F 		.ascii	"NFC_STATE_ERROR\000"
 403      53544154 
 403      455F4552 
 403      524F5200 
 404              		.section	.text.NFC_Task,"ax",%progbits
 405              		.align	1
 406              		.global	NFC_Task
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 410              		.fpu fpv4-sp-d16
 412              	NFC_Task:
 413              	.LFB140:
  49:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
 414              		.loc 1 49 31 is_stmt 1 view -0
 415              		.cfi_startproc
 416              		@ args = 0, pretend = 0, frame = 24
 417              		@ frame_needed = 0, uses_anonymous_args = 0
 418              	.LVL37:
  49:app/tasks/nfc/nfc.c **** void NFC_Task(void *argument) {
 419              		.loc 1 49 31 is_stmt 0 view .LVU96
 420 0000 00B5     		push	{lr}
 421              	.LCFI7:
 422              		.cfi_def_cfa_offset 4
 423              		.cfi_offset 14, -4
 424 0002 87B0     		sub	sp, sp, #28
 425              	.LCFI8:
 426              		.cfi_def_cfa_offset 32
 427              	.LVL38:
 428              	.L36:
  50:app/tasks/nfc/nfc.c ****   (void) argument; // Avoid unused parameter warning
 429              		.loc 1 50 3 is_stmt 1 view .LVU97
  51:app/tasks/nfc/nfc.c ****   message_t msg;
 430              		.loc 1 51 3 view .LVU98
  56:app/tasks/nfc/nfc.c ****   for (;;) {
 431              		.loc 1 56 3 view .LVU99
  58:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 432              		.loc 1 58 5 view .LVU100
  58:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 433              		.loc 1 58 9 is_stmt 0 view .LVU101
 434 0004 4FF0FF33 		mov	r3, #-1
 435 0008 0022     		movs	r2, #0
 436 000a 6946     		mov	r1, sp
 437 000c 1348     		ldr	r0, .L40
 438 000e 8068     		ldr	r0, [r0, #8]
 439 0010 FFF7FEFF 		bl	osMessageQueueGet
 440              	.LVL39:
  58:app/tasks/nfc/nfc.c ****     if (osMessageQueueGet(NFC_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) {
 441              		.loc 1 58 8 view .LVU102
 442 0014 0028     		cmp	r0, #0
 443 0016 F5D1     		bne	.L36
 444              	.LBB3:
  59:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
ARM GAS  /tmp/cc5eGk6V.s 			page 13


 445              		.loc 1 59 7 is_stmt 1 view .LVU103
  59:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
 446              		.loc 1 59 42 is_stmt 0 view .LVU104
 447 0018 1048     		ldr	r0, .L40
 448 001a C368     		ldr	r3, [r0, #12]
  59:app/tasks/nfc/nfc.c ****       osStatus_t status = NFC_Actor.super.messageHandler((actor_t *) &NFC_Actor, &msg);
 449              		.loc 1 59 27 view .LVU105
 450 001c 6946     		mov	r1, sp
 451 001e 9847     		blx	r3
 452              	.LVL40:
  61:app/tasks/nfc/nfc.c ****       if (status != osOK) {
 453              		.loc 1 61 7 is_stmt 1 view .LVU106
  61:app/tasks/nfc/nfc.c ****       if (status != osOK) {
 454              		.loc 1 61 10 is_stmt 0 view .LVU107
 455 0020 0028     		cmp	r0, #0
 456 0022 EFD0     		beq	.L36
 457              	.LBB4:
  62:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 458              		.loc 1 62 9 is_stmt 1 view .LVU108
  62:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 459              		.loc 1 62 71 is_stmt 0 view .LVU109
 460 0024 0E4B     		ldr	r3, .L40+4
 461 0026 5B68     		ldr	r3, [r3, #4]
  62:app/tasks/nfc/nfc.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 462              		.loc 1 62 28 view .LVU110
 463 0028 9868     		ldr	r0, [r3, #8]
 464              	.LVL41:
  63:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 465              		.loc 1 63 9 is_stmt 1 view .LVU111
  63:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 466              		.loc 1 63 55 is_stmt 0 view .LVU112
 467 002a 0022     		movs	r2, #0
 468 002c 0392     		str	r2, [sp, #12]
 469 002e 0492     		str	r2, [sp, #16]
 470 0030 0592     		str	r2, [sp, #20]
 471 0032 D123     		movs	r3, #209
 472 0034 8DF80C30 		strb	r3, [sp, #12]
 473 0038 0423     		movs	r3, #4
 474 003a 0493     		str	r3, [sp, #16]
  63:app/tasks/nfc/nfc.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = NFC_ACTOR_ID}
 475              		.loc 1 63 9 view .LVU113
 476 003c 1346     		mov	r3, r2
 477 003e 03A9     		add	r1, sp, #12
 478 0040 FFF7FEFF 		bl	osMessageQueuePut
 479              	.LVL42:
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 480              		.loc 1 64 9 is_stmt 1 view .LVU114
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 481              		.loc 1 64 9 view .LVU115
 482 0044 054A     		ldr	r2, .L40
 483 0046 0323     		movs	r3, #3
 484 0048 1374     		strb	r3, [r2, #16]
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 485              		.loc 1 64 9 view .LVU116
 486 004a 064B     		ldr	r3, .L40+8
 487 004c 1868     		ldr	r0, [r3]
 488 004e 064B     		ldr	r3, .L40+12
ARM GAS  /tmp/cc5eGk6V.s 			page 14


 489 0050 1268     		ldr	r2, [r2]
 490 0052 0649     		ldr	r1, .L40+16
 491 0054 8068     		ldr	r0, [r0, #8]
 492 0056 FFF7FEFF 		bl	fprintf
 493              	.LVL43:
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 494              		.loc 1 64 9 view .LVU117
  64:app/tasks/nfc/nfc.c ****         TO_STATE(&NFC_Actor, NFC_STATE_ERROR);
 495              		.loc 1 64 46 view .LVU118
 496 005a D3E7     		b	.L36
 497              	.L41:
 498              		.align	2
 499              	.L40:
 500 005c 00000000 		.word	.LANCHOR0
 501 0060 00000000 		.word	ACTORS_LIST_SystemRegistry
 502 0064 00000000 		.word	_impure_ptr
 503 0068 00000000 		.word	.LC5
 504 006c 38000000 		.word	.LC2
 505              	.LBE4:
 506              	.LBE3:
 507              		.cfi_endproc
 508              	.LFE140:
 510              		.section	.rodata.NFC_TaskInit.str1.4,"aMS",%progbits,1
 511              		.align	2
 512              	.LC6:
 513 0000 6E666351 		.ascii	"nfcQueue\000"
 513      75657565 
 513      00
 514              		.section	.text.NFC_TaskInit,"ax",%progbits
 515              		.align	1
 516              		.global	NFC_TaskInit
 517              		.syntax unified
 518              		.thumb
 519              		.thumb_func
 520              		.fpu fpv4-sp-d16
 522              	NFC_TaskInit:
 523              	.LFB139:
  40:app/tasks/nfc/nfc.c **** actor_t* NFC_TaskInit(void) {
 524              		.loc 1 40 29 view -0
 525              		.cfi_startproc
 526              		@ args = 0, pretend = 0, frame = 24
 527              		@ frame_needed = 0, uses_anonymous_args = 0
 528 0000 30B5     		push	{r4, r5, lr}
 529              	.LCFI9:
 530              		.cfi_def_cfa_offset 12
 531              		.cfi_offset 4, -12
 532              		.cfi_offset 5, -8
 533              		.cfi_offset 14, -4
 534 0002 87B0     		sub	sp, sp, #28
 535              	.LCFI10:
 536              		.cfi_def_cfa_offset 40
  41:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 537              		.loc 1 41 3 view .LVU120
  41:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 538              		.loc 1 41 127 is_stmt 0 view .LVU121
 539 0004 0024     		movs	r4, #0
 540 0006 0094     		str	r4, [sp]
ARM GAS  /tmp/cc5eGk6V.s 			page 15


 541 0008 0194     		str	r4, [sp, #4]
 542 000a 0294     		str	r4, [sp, #8]
 543 000c 0394     		str	r4, [sp, #12]
 544 000e 0494     		str	r4, [sp, #16]
 545 0010 0594     		str	r4, [sp, #20]
 546 0012 094B     		ldr	r3, .L44
 547 0014 0093     		str	r3, [sp]
  41:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 548              		.loc 1 41 38 view .LVU122
 549 0016 6A46     		mov	r2, sp
 550 0018 0C21     		movs	r1, #12
 551 001a 0820     		movs	r0, #8
 552 001c FFF7FEFF 		bl	osMessageQueueNew
 553              	.LVL44:
  41:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE_SI
 554              		.loc 1 41 36 view .LVU123
 555 0020 064D     		ldr	r5, .L44+4
 556 0022 A860     		str	r0, [r5, #8]
  44:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 557              		.loc 1 44 3 is_stmt 1 view .LVU124
  44:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 558              		.loc 1 44 32 is_stmt 0 view .LVU125
 559 0024 064A     		ldr	r2, .L44+8
 560 0026 2146     		mov	r1, r4
 561 0028 0648     		ldr	r0, .L44+12
 562 002a FFF7FEFF 		bl	osThreadNew
 563              	.LVL45:
  44:app/tasks/nfc/nfc.c ****   NFC_Actor.super.osThreadId = osThreadNew(NFC_Task, NULL, &nfcTaskDescription);
 564              		.loc 1 44 30 view .LVU126
 565 002e 6860     		str	r0, [r5, #4]
  46:app/tasks/nfc/nfc.c ****   return (actor_t*) &NFC_Actor;
 566              		.loc 1 46 3 is_stmt 1 view .LVU127
  47:app/tasks/nfc/nfc.c **** }
 567              		.loc 1 47 1 is_stmt 0 view .LVU128
 568 0030 2846     		mov	r0, r5
 569 0032 07B0     		add	sp, sp, #28
 570              	.LCFI11:
 571              		.cfi_def_cfa_offset 12
 572              		@ sp needed
 573 0034 30BD     		pop	{r4, r5, pc}
 574              	.L45:
 575 0036 00BF     		.align	2
 576              	.L44:
 577 0038 00000000 		.word	.LC6
 578 003c 00000000 		.word	.LANCHOR0
 579 0040 00000000 		.word	.LANCHOR1
 580 0044 00000000 		.word	NFC_Task
 581              		.cfi_endproc
 582              	.LFE139:
 584              		.global	nfcTaskDescription
 585              		.section	.rodata.str1.4,"aMS",%progbits,1
 586              		.align	2
 587              	.LC7:
 588 0000 6E666354 		.ascii	"nfcTask\000"
 588      61736B00 
 589              		.global	nfcTaskControlBlock
 590              		.global	nfcTaskBuffer
ARM GAS  /tmp/cc5eGk6V.s 			page 16


 591              		.global	NFC_Actor
 592              		.section	.bss.nfcTaskBuffer,"aw",%nobits
 593              		.align	2
 596              	nfcTaskBuffer:
 597 0000 00000000 		.space	512
 597      00000000 
 597      00000000 
 597      00000000 
 597      00000000 
 598              		.section	.bss.nfcTaskControlBlock,"aw",%nobits
 599              		.align	2
 602              	nfcTaskControlBlock:
 603 0000 00000000 		.space	92
 603      00000000 
 603      00000000 
 603      00000000 
 603      00000000 
 604              		.section	.data.NFC_Actor,"aw"
 605              		.align	2
 606              		.set	.LANCHOR0,. + 0
 609              	NFC_Actor:
 610 0000 04000000 		.word	4
 611 0004 00000000 		.word	0
 612 0008 00000000 		.word	0
 613 000c 00000000 		.word	handleNFCFSM
 614 0010 00       		.byte	0
 615 0011 00000000 		.space	299
 615      00000000 
 615      00000000 
 615      00000000 
 615      00000000 
 616              		.section	.rodata.nfcTaskDescription,"a"
 617              		.align	2
 618              		.set	.LANCHOR1,. + 0
 621              	nfcTaskDescription:
 622 0000 00000000 		.word	.LC7
 623 0004 00000000 		.space	4
 624 0008 00000000 		.word	nfcTaskControlBlock
 625 000c 5C000000 		.word	92
 626 0010 00000000 		.word	nfcTaskBuffer
 627 0014 00020000 		.word	512
 628 0018 18000000 		.word	24
 629 001c 00000000 		.space	8
 629      00000000 
 630              		.text
 631              	.Letext0:
 632              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 633              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 634              		.file 4 "/usr/include/newlib/sys/_types.h"
 635              		.file 5 "/usr/include/newlib/sys/reent.h"
 636              		.file 6 "/usr/include/newlib/sys/lock.h"
 637              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 638              		.file 8 "/usr/include/newlib/sys/types.h"
 639              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 640              		.file 10 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 641              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 642              		.file 12 "app/core/actor/../../config/events_list/events_list.h"
ARM GAS  /tmp/cc5eGk6V.s 			page 17


 643              		.file 13 "app/core/actor/../../config/actors_list/actors_list.h"
 644              		.file 14 "app/core/actor/actor.h"
 645              		.file 15 "Drivers/BSP/Components/ST25DV/st25dv_reg.h"
 646              		.file 16 "Drivers/BSP/Components/ST25DV/st25dv.h"
 647              		.file 17 "app/tasks/nfc/nfc.h"
 648              		.file 18 "/usr/include/newlib/stdio.h"
 649              		.file 19 "app/tasks/nfc/nfc_handlers.h"
ARM GAS  /tmp/cc5eGk6V.s 			page 18


DEFINED SYMBOLS
                            *ABS*:0000000000000000 nfc.c
     /tmp/cc5eGk6V.s:18     .rodata.handleInit.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:28     .text.handleInit:0000000000000000 $t
     /tmp/cc5eGk6V.s:35     .text.handleInit:0000000000000000 handleInit
     /tmp/cc5eGk6V.s:168    .text.handleInit:000000000000007c $d
     /tmp/cc5eGk6V.s:176    .rodata.handleStandby.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:180    .text.handleStandby:0000000000000000 $t
     /tmp/cc5eGk6V.s:186    .text.handleStandby:0000000000000000 handleStandby
     /tmp/cc5eGk6V.s:243    .text.handleStandby:000000000000002c $d
     /tmp/cc5eGk6V.s:250    .rodata.handleMailboxTransmit.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:254    .text.handleMailboxTransmit:0000000000000000 $t
     /tmp/cc5eGk6V.s:260    .text.handleMailboxTransmit:0000000000000000 handleMailboxTransmit
     /tmp/cc5eGk6V.s:333    .text.handleMailboxTransmit:0000000000000038 $d
     /tmp/cc5eGk6V.s:340    .text.handleNFCFSM:0000000000000000 $t
     /tmp/cc5eGk6V.s:346    .text.handleNFCFSM:0000000000000000 handleNFCFSM
     /tmp/cc5eGk6V.s:401    .rodata.NFC_Task.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:405    .text.NFC_Task:0000000000000000 $t
     /tmp/cc5eGk6V.s:412    .text.NFC_Task:0000000000000000 NFC_Task
     /tmp/cc5eGk6V.s:500    .text.NFC_Task:000000000000005c $d
     /tmp/cc5eGk6V.s:511    .rodata.NFC_TaskInit.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:515    .text.NFC_TaskInit:0000000000000000 $t
     /tmp/cc5eGk6V.s:522    .text.NFC_TaskInit:0000000000000000 NFC_TaskInit
     /tmp/cc5eGk6V.s:577    .text.NFC_TaskInit:0000000000000038 $d
     /tmp/cc5eGk6V.s:621    .rodata.nfcTaskDescription:0000000000000000 nfcTaskDescription
     /tmp/cc5eGk6V.s:586    .rodata.str1.4:0000000000000000 $d
     /tmp/cc5eGk6V.s:602    .bss.nfcTaskControlBlock:0000000000000000 nfcTaskControlBlock
     /tmp/cc5eGk6V.s:596    .bss.nfcTaskBuffer:0000000000000000 nfcTaskBuffer
     /tmp/cc5eGk6V.s:609    .data.NFC_Actor:0000000000000000 NFC_Actor
     /tmp/cc5eGk6V.s:593    .bss.nfcTaskBuffer:0000000000000000 $d
     /tmp/cc5eGk6V.s:599    .bss.nfcTaskControlBlock:0000000000000000 $d
     /tmp/cc5eGk6V.s:605    .data.NFC_Actor:0000000000000000 $d
     /tmp/cc5eGk6V.s:617    .rodata.nfcTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
NFC_ST25DVInit
ST25DV_PresentI2CPassword
ST25DV_ReadUID
fprintf
_impure_ptr
NFC_HandleGPOInterrupt
NFC_ReadMailboxTo
osMessageQueueGet
osMessageQueuePut
ACTORS_LIST_SystemRegistry
osMessageQueueNew
osThreadNew
