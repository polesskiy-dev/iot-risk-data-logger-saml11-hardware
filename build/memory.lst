ARM GAS  /tmp/ccghtGyI.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"memory.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.handleMemoryFSM,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	handleMemoryFSM:
  26              	.LVL0:
  27              	.LFB142:
  28              		.file 1 "app/tasks/memory/memory.c"
   1:app/tasks/memory/memory.c **** /*!
   2:app/tasks/memory/memory.c ****  * @file memory.c
   3:app/tasks/memory/memory.c ****  * @brief implementation of memory
   4:app/tasks/memory/memory.c ****  *
   5:app/tasks/memory/memory.c ****  * Detailed description of the implementation file.
   6:app/tasks/memory/memory.c ****  *
   7:app/tasks/memory/memory.c ****  * @date 14/08/2024
   8:app/tasks/memory/memory.c ****  * @author artempolisskyi
   9:app/tasks/memory/memory.c ****  */
  10:app/tasks/memory/memory.c **** 
  11:app/tasks/memory/memory.c **** #include "memory.h"
  12:app/tasks/memory/memory.c **** #include "usbd_msc.h"
  13:app/tasks/memory/memory.c **** 
  14:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message);
  15:app/tasks/memory/memory.c **** 
  16:app/tasks/memory/memory.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  17:app/tasks/memory/memory.c **** 
  18:app/tasks/memory/memory.c **** extern USBD_StorageTypeDef USBD_Storage_Interface_fops_FS;
  19:app/tasks/memory/memory.c **** 
  20:app/tasks/memory/memory.c **** /**
  21:app/tasks/memory/memory.c ****  * @brief Memory actor struct representing NOR Flash storage
  22:app/tasks/memory/memory.c ****  * @extends actor_t
  23:app/tasks/memory/memory.c ****  */
  24:app/tasks/memory/memory.c **** MEMORY_Actor_t MEMORY_Actor = {
  25:app/tasks/memory/memory.c ****         .super = {
  26:app/tasks/memory/memory.c ****                 .actorId = MEMORY_ACTOR_ID,
  27:app/tasks/memory/memory.c ****                 .messageHandler = (messageHandler_t) handleMemoryFSM,
  28:app/tasks/memory/memory.c ****                 .osMessageQueueId = NULL,
  29:app/tasks/memory/memory.c ****                 .osThreadId = NULL,
  30:app/tasks/memory/memory.c ****         },
ARM GAS  /tmp/ccghtGyI.s 			page 2


  31:app/tasks/memory/memory.c ****         .state = MEMORY_NO_STATE
  32:app/tasks/memory/memory.c **** };
  33:app/tasks/memory/memory.c **** 
  34:app/tasks/memory/memory.c **** // task description required for static task creation
  35:app/tasks/memory/memory.c **** uint32_t memoryTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  36:app/tasks/memory/memory.c **** StaticTask_t memoryTaskControlBlock;
  37:app/tasks/memory/memory.c **** const osThreadAttr_t memoryTaskDescription = {
  38:app/tasks/memory/memory.c ****         .name = "memoryTask",
  39:app/tasks/memory/memory.c ****         .cb_mem = &memoryTaskControlBlock,
  40:app/tasks/memory/memory.c ****         .cb_size = sizeof(memoryTaskControlBlock),
  41:app/tasks/memory/memory.c ****         .stack_mem = &memoryTaskBuffer[0],
  42:app/tasks/memory/memory.c ****         .stack_size = sizeof(memoryTaskBuffer),
  43:app/tasks/memory/memory.c ****         .priority = (osPriority_t) osPriorityNormal,
  44:app/tasks/memory/memory.c **** };
  45:app/tasks/memory/memory.c **** 
  46:app/tasks/memory/memory.c **** W25Q_HandleTypeDef MEMORY_W25QHandle = {
  47:app/tasks/memory/memory.c ****         .hqspi = &hqspi,
  48:app/tasks/memory/memory.c ****         .geometry = {
  49:app/tasks/memory/memory.c ****                 .flashSize      = W25Q64JV_FLASH_SIZE,
  50:app/tasks/memory/memory.c ****                 .sectorSize     = W25Q64JV_SECTOR_SIZE,
  51:app/tasks/memory/memory.c ****                 .subSectorSize  = W25Q64JV_SUBSECTOR_SIZE,
  52:app/tasks/memory/memory.c ****                 .pageSize       = W25Q64JV_PAGE_SIZE,
  53:app/tasks/memory/memory.c ****                 .blockSize32K   = W25Q64JV_BLOCK_SIZE_32K,
  54:app/tasks/memory/memory.c ****                 .blockSize64K   = W25Q64JV_BLOCK_SIZE_64K
  55:app/tasks/memory/memory.c ****         },
  56:app/tasks/memory/memory.c ****         .status.status1Reg      = 0x00,
  57:app/tasks/memory/memory.c ****         .busyWaitCycles         = FLASH_BUSY_WAIT_CYCLES
  58:app/tasks/memory/memory.c **** };
  59:app/tasks/memory/memory.c **** 
  60:app/tasks/memory/memory.c **** /**
  61:app/tasks/memory/memory.c ****  * @brief Initializes the Memory Sensor task.
  62:app/tasks/memory/memory.c ****  * @return {actor_t*} - pointer to the actor base struct
  63:app/tasks/memory/memory.c ****  */
  64:app/tasks/memory/memory.c **** actor_t* MEMORY_TaskInit(void) {
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
  66:app/tasks/memory/memory.c ****           .name = "memoryQueue"
  67:app/tasks/memory/memory.c ****   });
  68:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
  69:app/tasks/memory/memory.c **** 
  70:app/tasks/memory/memory.c ****   return (actor_t*) &MEMORY_Actor;
  71:app/tasks/memory/memory.c **** }
  72:app/tasks/memory/memory.c **** 
  73:app/tasks/memory/memory.c **** /**
  74:app/tasks/memory/memory.c ****  * @brief Memory (NOR Flash) task
  75:app/tasks/memory/memory.c ****  * Waits for message from the queue and proceed it in FSM
  76:app/tasks/memory/memory.c ****  * Enters ERROR state if message handling failed
  77:app/tasks/memory/memory.c ****  */
  78:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  79:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  80:app/tasks/memory/memory.c ****   message_t msg;
  81:app/tasks/memory/memory.c **** 
  82:app/tasks/memory/memory.c ****   HAL_StatusTypeDef status = HAL_OK;
  83:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  84:app/tasks/memory/memory.c ****   const char *dummyToWrite = "Hello, World!";
  85:app/tasks/memory/memory.c ****   uint8_t dummyToRead[16] = {0};
  86:app/tasks/memory/memory.c **** 
  87:app/tasks/memory/memory.c ****   status = W25Q_EraseSector(&MEMORY_W25QHandle, 0);
ARM GAS  /tmp/ccghtGyI.s 			page 3


  88:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  89:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
  90:app/tasks/memory/memory.c ****   }
  91:app/tasks/memory/memory.c **** 
  92:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *)dummyToWrite, 0, 13);
  93:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  94:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
  95:app/tasks/memory/memory.c ****   }
  96:app/tasks/memory/memory.c **** 
  97:app/tasks/memory/memory.c ****   status = W25Q_ReadData(&MEMORY_W25QHandle, dummyToRead, 0, 16);
  98:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  99:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 100:app/tasks/memory/memory.c ****   }
 101:app/tasks/memory/memory.c **** 
 102:app/tasks/memory/memory.c ****   status = W25Q_ReadStatusReg(&MEMORY_W25QHandle);
 103:app/tasks/memory/memory.c **** 
 104:app/tasks/memory/memory.c ****   // init usb msd TODO move to more suitable place
 105:app/tasks/memory/memory.c **** 
 106:app/tasks/memory/memory.c **** 
 107:app/tasks/memory/memory.c ****   #ifdef DEBUG
 108:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
 109:app/tasks/memory/memory.c ****   #endif
 110:app/tasks/memory/memory.c **** 
 111:app/tasks/memory/memory.c ****   for (;;) {
 112:app/tasks/memory/memory.c ****     // Wait for messages from the queue
 113:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
 114:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 115:app/tasks/memory/memory.c **** 
 116:app/tasks/memory/memory.c ****       if (status != osOK) {
 117:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 118:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 119:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 120:app/tasks/memory/memory.c ****       }
 121:app/tasks/memory/memory.c ****     }
 122:app/tasks/memory/memory.c ****   }
 123:app/tasks/memory/memory.c **** }
 124:app/tasks/memory/memory.c **** 
 125:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message) {
  29              		.loc 1 125 77 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 126:app/tasks/memory/memory.c ****   return osOK;
  34              		.loc 1 126 3 view .LVU1
 127:app/tasks/memory/memory.c **** }
  35              		.loc 1 127 1 is_stmt 0 view .LVU2
  36 0000 0020     		movs	r0, #0
  37              	.LVL1:
  38              		.loc 1 127 1 view .LVU3
  39 0002 7047     		bx	lr
  40              		.cfi_endproc
  41              	.LFE142:
  43              		.section	.rodata.MEMORY_Task.str1.4,"aMS",%progbits,1
  44              		.align	2
  45              	.LC0:
  46 0000 6D656D6F 		.ascii	"memory error\000"
ARM GAS  /tmp/ccghtGyI.s 			page 4


  46      72792065 
  46      72726F72 
  46      00
  47 000d 000000   		.align	2
  48              	.LC1:
  49 0010 48656C6C 		.ascii	"Hello, World!\000"
  49      6F2C2057 
  49      6F726C64 
  49      2100
  50 001e 0000     		.align	2
  51              	.LC2:
  52 0020 4D656D6F 		.ascii	"Memory task initialized\012\000"
  52      72792074 
  52      61736B20 
  52      696E6974 
  52      69616C69 
  53 0039 000000   		.align	2
  54              	.LC3:
  55 003c 4D454D4F 		.ascii	"MEMORY_STATE_ERROR\000"
  55      52595F53 
  55      54415445 
  55      5F455252 
  55      4F5200
  56 004f 00       		.align	2
  57              	.LC4:
  58 0050 256C753A 		.ascii	"%lu: %s\012\000"
  58      2025730A 
  58      00
  59              		.section	.text.MEMORY_Task,"ax",%progbits
  60              		.align	1
  61              		.global	MEMORY_Task
  62              		.syntax unified
  63              		.thumb
  64              		.thumb_func
  65              		.fpu fpv4-sp-d16
  67              	MEMORY_Task:
  68              	.LVL2:
  69              	.LFB141:
  78:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  70              		.loc 1 78 34 is_stmt 1 view -0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 48
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  78:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  74              		.loc 1 78 34 is_stmt 0 view .LVU5
  75 0000 00B5     		push	{lr}
  76              	.LCFI0:
  77              		.cfi_def_cfa_offset 4
  78              		.cfi_offset 14, -4
  79 0002 8DB0     		sub	sp, sp, #52
  80              	.LCFI1:
  81              		.cfi_def_cfa_offset 56
  79:app/tasks/memory/memory.c ****   message_t msg;
  82              		.loc 1 79 3 is_stmt 1 view .LVU6
  80:app/tasks/memory/memory.c **** 
  83              		.loc 1 80 3 view .LVU7
  82:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
ARM GAS  /tmp/ccghtGyI.s 			page 5


  84              		.loc 1 82 3 view .LVU8
  85              	.LVL3:
  83:app/tasks/memory/memory.c ****   const char *dummyToWrite = "Hello, World!";
  86              		.loc 1 83 3 view .LVU9
  83:app/tasks/memory/memory.c ****   const char *dummyToWrite = "Hello, World!";
  87              		.loc 1 83 11 is_stmt 0 view .LVU10
  88 0004 0021     		movs	r1, #0
  89 0006 ADF81410 		strh	r1, [sp, #20]	@ movhi
  84:app/tasks/memory/memory.c ****   uint8_t dummyToRead[16] = {0};
  90              		.loc 1 84 3 is_stmt 1 view .LVU11
  91              	.LVL4:
  85:app/tasks/memory/memory.c **** 
  92              		.loc 1 85 3 view .LVU12
  85:app/tasks/memory/memory.c **** 
  93              		.loc 1 85 11 is_stmt 0 view .LVU13
  94 000a 0191     		str	r1, [sp, #4]
  95 000c 0291     		str	r1, [sp, #8]
  96 000e 0391     		str	r1, [sp, #12]
  97 0010 0491     		str	r1, [sp, #16]
  87:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  98              		.loc 1 87 3 is_stmt 1 view .LVU14
  87:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  99              		.loc 1 87 12 is_stmt 0 view .LVU15
 100 0012 3348     		ldr	r0, .L13
 101              	.LVL5:
  87:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 102              		.loc 1 87 12 view .LVU16
 103 0014 FFF7FEFF 		bl	W25Q_EraseSector
 104              	.LVL6:
  88:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 105              		.loc 1 88 3 is_stmt 1 view .LVU17
  88:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 106              		.loc 1 88 6 is_stmt 0 view .LVU18
 107 0018 0028     		cmp	r0, #0
 108 001a 46D1     		bne	.L10
 109              	.LVL7:
 110              	.L3:
  92:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 111              		.loc 1 92 3 is_stmt 1 view .LVU19
  92:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 112              		.loc 1 92 12 is_stmt 0 view .LVU20
 113 001c 0D23     		movs	r3, #13
 114 001e 0022     		movs	r2, #0
 115 0020 3049     		ldr	r1, .L13+4
 116 0022 2F48     		ldr	r0, .L13
 117 0024 FFF7FEFF 		bl	W25Q_WriteData
 118              	.LVL8:
  93:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 119              		.loc 1 93 3 is_stmt 1 view .LVU21
  93:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 120              		.loc 1 93 6 is_stmt 0 view .LVU22
 121 0028 0028     		cmp	r0, #0
 122 002a 47D1     		bne	.L11
 123              	.LVL9:
 124              	.L4:
  97:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 125              		.loc 1 97 3 is_stmt 1 view .LVU23
ARM GAS  /tmp/ccghtGyI.s 			page 6


  97:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 126              		.loc 1 97 12 is_stmt 0 view .LVU24
 127 002c 1023     		movs	r3, #16
 128 002e 0022     		movs	r2, #0
 129 0030 01A9     		add	r1, sp, #4
 130 0032 2B48     		ldr	r0, .L13
 131 0034 FFF7FEFF 		bl	W25Q_ReadData
 132              	.LVL10:
  98:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 133              		.loc 1 98 3 is_stmt 1 view .LVU25
  98:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 134              		.loc 1 98 6 is_stmt 0 view .LVU26
 135 0038 0028     		cmp	r0, #0
 136 003a 48D1     		bne	.L12
 137              	.LVL11:
 138              	.L5:
 102:app/tasks/memory/memory.c **** 
 139              		.loc 1 102 3 is_stmt 1 view .LVU27
 102:app/tasks/memory/memory.c **** 
 140              		.loc 1 102 12 is_stmt 0 view .LVU28
 141 003c 2848     		ldr	r0, .L13
 142 003e FFF7FEFF 		bl	W25Q_ReadStatusReg
 143              	.LVL12:
 108:app/tasks/memory/memory.c ****   #endif
 144              		.loc 1 108 5 is_stmt 1 view .LVU29
 108:app/tasks/memory/memory.c ****   #endif
 145              		.loc 1 108 13 is_stmt 0 view .LVU30
 146 0042 294B     		ldr	r3, .L13+8
 147 0044 1B68     		ldr	r3, [r3]
 108:app/tasks/memory/memory.c ****   #endif
 148              		.loc 1 108 5 view .LVU31
 149 0046 9B68     		ldr	r3, [r3, #8]
 150 0048 1822     		movs	r2, #24
 151 004a 0121     		movs	r1, #1
 152 004c 2748     		ldr	r0, .L13+12
 153 004e FFF7FEFF 		bl	fwrite
 154              	.LVL13:
 155              	.L6:
 111:app/tasks/memory/memory.c ****     // Wait for messages from the queue
 156              		.loc 1 111 3 is_stmt 1 view .LVU32
 113:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 157              		.loc 1 113 5 view .LVU33
 113:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 158              		.loc 1 113 9 is_stmt 0 view .LVU34
 159 0052 4FF0FF33 		mov	r3, #-1
 160 0056 0022     		movs	r2, #0
 161 0058 06A9     		add	r1, sp, #24
 162 005a 2548     		ldr	r0, .L13+16
 163 005c 8068     		ldr	r0, [r0, #8]
 164 005e FFF7FEFF 		bl	osMessageQueueGet
 165              	.LVL14:
 113:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 166              		.loc 1 113 8 view .LVU35
 167 0062 0028     		cmp	r0, #0
 168 0064 F5D1     		bne	.L6
 169              	.LBB2:
 114:app/tasks/memory/memory.c **** 
ARM GAS  /tmp/ccghtGyI.s 			page 7


 170              		.loc 1 114 7 is_stmt 1 view .LVU36
 114:app/tasks/memory/memory.c **** 
 171              		.loc 1 114 45 is_stmt 0 view .LVU37
 172 0066 2248     		ldr	r0, .L13+16
 173 0068 C368     		ldr	r3, [r0, #12]
 114:app/tasks/memory/memory.c **** 
 174              		.loc 1 114 27 view .LVU38
 175 006a 06A9     		add	r1, sp, #24
 176 006c 9847     		blx	r3
 177              	.LVL15:
 116:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 178              		.loc 1 116 7 is_stmt 1 view .LVU39
 116:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 179              		.loc 1 116 10 is_stmt 0 view .LVU40
 180 006e 0028     		cmp	r0, #0
 181 0070 EFD0     		beq	.L6
 182              	.LBB3:
 117:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 183              		.loc 1 117 9 is_stmt 1 view .LVU41
 117:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 184              		.loc 1 117 71 is_stmt 0 view .LVU42
 185 0072 204B     		ldr	r3, .L13+20
 186 0074 5B68     		ldr	r3, [r3, #4]
 117:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 187              		.loc 1 117 28 view .LVU43
 188 0076 9868     		ldr	r0, [r3, #8]
 189              	.LVL16:
 118:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 190              		.loc 1 118 9 is_stmt 1 view .LVU44
 118:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 191              		.loc 1 118 55 is_stmt 0 view .LVU45
 192 0078 0022     		movs	r2, #0
 193 007a 0992     		str	r2, [sp, #36]
 194 007c 0A92     		str	r2, [sp, #40]
 195 007e 0B92     		str	r2, [sp, #44]
 196 0080 0C23     		movs	r3, #12
 197 0082 8DF82430 		strb	r3, [sp, #36]
 198 0086 0823     		movs	r3, #8
 199 0088 0A93     		str	r3, [sp, #40]
 118:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 200              		.loc 1 118 9 view .LVU46
 201 008a 1346     		mov	r3, r2
 202 008c 09A9     		add	r1, sp, #36
 203 008e FFF7FEFF 		bl	osMessageQueuePut
 204              	.LVL17:
 119:app/tasks/memory/memory.c ****       }
 205              		.loc 1 119 9 is_stmt 1 view .LVU47
 119:app/tasks/memory/memory.c ****       }
 206              		.loc 1 119 9 view .LVU48
 207 0092 174A     		ldr	r2, .L13+16
 208 0094 0123     		movs	r3, #1
 209 0096 1374     		strb	r3, [r2, #16]
 119:app/tasks/memory/memory.c ****       }
 210              		.loc 1 119 9 view .LVU49
 211 0098 134B     		ldr	r3, .L13+8
 212 009a 1868     		ldr	r0, [r3]
 213 009c 164B     		ldr	r3, .L13+24
ARM GAS  /tmp/ccghtGyI.s 			page 8


 214 009e 1268     		ldr	r2, [r2]
 215 00a0 1649     		ldr	r1, .L13+28
 216 00a2 8068     		ldr	r0, [r0, #8]
 217 00a4 FFF7FEFF 		bl	fprintf
 218              	.LVL18:
 119:app/tasks/memory/memory.c ****       }
 219              		.loc 1 119 9 view .LVU50
 119:app/tasks/memory/memory.c ****       }
 220              		.loc 1 119 52 view .LVU51
 221 00a8 D3E7     		b	.L6
 222              	.LVL19:
 223              	.L10:
 119:app/tasks/memory/memory.c ****       }
 224              		.loc 1 119 52 is_stmt 0 view .LVU52
 225              	.LBE3:
 226              	.LBE2:
  89:app/tasks/memory/memory.c ****   }
 227              		.loc 1 89 5 is_stmt 1 view .LVU53
  89:app/tasks/memory/memory.c ****   }
 228              		.loc 1 89 13 is_stmt 0 view .LVU54
 229 00aa 0F4B     		ldr	r3, .L13+8
 230 00ac 1B68     		ldr	r3, [r3]
  89:app/tasks/memory/memory.c ****   }
 231              		.loc 1 89 5 view .LVU55
 232 00ae DB68     		ldr	r3, [r3, #12]
 233 00b0 0C22     		movs	r2, #12
 234 00b2 0121     		movs	r1, #1
 235 00b4 1248     		ldr	r0, .L13+32
 236              	.LVL20:
  89:app/tasks/memory/memory.c ****   }
 237              		.loc 1 89 5 view .LVU56
 238 00b6 FFF7FEFF 		bl	fwrite
 239              	.LVL21:
 240 00ba AFE7     		b	.L3
 241              	.LVL22:
 242              	.L11:
  94:app/tasks/memory/memory.c ****   }
 243              		.loc 1 94 5 is_stmt 1 view .LVU57
  94:app/tasks/memory/memory.c ****   }
 244              		.loc 1 94 13 is_stmt 0 view .LVU58
 245 00bc 0A4B     		ldr	r3, .L13+8
 246 00be 1B68     		ldr	r3, [r3]
  94:app/tasks/memory/memory.c ****   }
 247              		.loc 1 94 5 view .LVU59
 248 00c0 DB68     		ldr	r3, [r3, #12]
 249 00c2 0C22     		movs	r2, #12
 250 00c4 0121     		movs	r1, #1
 251 00c6 0E48     		ldr	r0, .L13+32
 252              	.LVL23:
  94:app/tasks/memory/memory.c ****   }
 253              		.loc 1 94 5 view .LVU60
 254 00c8 FFF7FEFF 		bl	fwrite
 255              	.LVL24:
 256 00cc AEE7     		b	.L4
 257              	.LVL25:
 258              	.L12:
  99:app/tasks/memory/memory.c ****   }
ARM GAS  /tmp/ccghtGyI.s 			page 9


 259              		.loc 1 99 5 is_stmt 1 view .LVU61
  99:app/tasks/memory/memory.c ****   }
 260              		.loc 1 99 13 is_stmt 0 view .LVU62
 261 00ce 064B     		ldr	r3, .L13+8
 262 00d0 1B68     		ldr	r3, [r3]
  99:app/tasks/memory/memory.c ****   }
 263              		.loc 1 99 5 view .LVU63
 264 00d2 DB68     		ldr	r3, [r3, #12]
 265 00d4 0C22     		movs	r2, #12
 266 00d6 0121     		movs	r1, #1
 267 00d8 0948     		ldr	r0, .L13+32
 268              	.LVL26:
  99:app/tasks/memory/memory.c ****   }
 269              		.loc 1 99 5 view .LVU64
 270 00da FFF7FEFF 		bl	fwrite
 271              	.LVL27:
 272 00de ADE7     		b	.L5
 273              	.L14:
 274              		.align	2
 275              	.L13:
 276 00e0 00000000 		.word	.LANCHOR0
 277 00e4 10000000 		.word	.LC1
 278 00e8 00000000 		.word	_impure_ptr
 279 00ec 20000000 		.word	.LC2
 280 00f0 00000000 		.word	.LANCHOR1
 281 00f4 00000000 		.word	ACTORS_LIST_SystemRegistry
 282 00f8 3C000000 		.word	.LC3
 283 00fc 50000000 		.word	.LC4
 284 0100 00000000 		.word	.LC0
 285              		.cfi_endproc
 286              	.LFE141:
 288              		.section	.rodata.MEMORY_TaskInit.str1.4,"aMS",%progbits,1
 289              		.align	2
 290              	.LC5:
 291 0000 6D656D6F 		.ascii	"memoryQueue\000"
 291      72795175 
 291      65756500 
 292              		.section	.text.MEMORY_TaskInit,"ax",%progbits
 293              		.align	1
 294              		.global	MEMORY_TaskInit
 295              		.syntax unified
 296              		.thumb
 297              		.thumb_func
 298              		.fpu fpv4-sp-d16
 300              	MEMORY_TaskInit:
 301              	.LFB140:
  64:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 302              		.loc 1 64 32 is_stmt 1 view -0
 303              		.cfi_startproc
 304              		@ args = 0, pretend = 0, frame = 24
 305              		@ frame_needed = 0, uses_anonymous_args = 0
 306 0000 30B5     		push	{r4, r5, lr}
 307              	.LCFI2:
 308              		.cfi_def_cfa_offset 12
 309              		.cfi_offset 4, -12
 310              		.cfi_offset 5, -8
 311              		.cfi_offset 14, -4
ARM GAS  /tmp/ccghtGyI.s 			page 10


 312 0002 87B0     		sub	sp, sp, #28
 313              	.LCFI3:
 314              		.cfi_def_cfa_offset 40
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 315              		.loc 1 65 3 view .LVU66
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 316              		.loc 1 65 130 is_stmt 0 view .LVU67
 317 0004 0024     		movs	r4, #0
 318 0006 0094     		str	r4, [sp]
 319 0008 0194     		str	r4, [sp, #4]
 320 000a 0294     		str	r4, [sp, #8]
 321 000c 0394     		str	r4, [sp, #12]
 322 000e 0494     		str	r4, [sp, #16]
 323 0010 0594     		str	r4, [sp, #20]
 324 0012 094B     		ldr	r3, .L17
 325 0014 0093     		str	r3, [sp]
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 326              		.loc 1 65 41 view .LVU68
 327 0016 6A46     		mov	r2, sp
 328 0018 0C21     		movs	r1, #12
 329 001a 0820     		movs	r0, #8
 330 001c FFF7FEFF 		bl	osMessageQueueNew
 331              	.LVL28:
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 332              		.loc 1 65 39 view .LVU69
 333 0020 064D     		ldr	r5, .L17+4
 334 0022 A860     		str	r0, [r5, #8]
  68:app/tasks/memory/memory.c **** 
 335              		.loc 1 68 3 is_stmt 1 view .LVU70
  68:app/tasks/memory/memory.c **** 
 336              		.loc 1 68 35 is_stmt 0 view .LVU71
 337 0024 064A     		ldr	r2, .L17+8
 338 0026 2146     		mov	r1, r4
 339 0028 0648     		ldr	r0, .L17+12
 340 002a FFF7FEFF 		bl	osThreadNew
 341              	.LVL29:
  68:app/tasks/memory/memory.c **** 
 342              		.loc 1 68 33 view .LVU72
 343 002e 6860     		str	r0, [r5, #4]
  70:app/tasks/memory/memory.c **** }
 344              		.loc 1 70 3 is_stmt 1 view .LVU73
  71:app/tasks/memory/memory.c **** 
 345              		.loc 1 71 1 is_stmt 0 view .LVU74
 346 0030 2846     		mov	r0, r5
 347 0032 07B0     		add	sp, sp, #28
 348              	.LCFI4:
 349              		.cfi_def_cfa_offset 12
 350              		@ sp needed
 351 0034 30BD     		pop	{r4, r5, pc}
 352              	.L18:
 353 0036 00BF     		.align	2
 354              	.L17:
 355 0038 00000000 		.word	.LC5
 356 003c 00000000 		.word	.LANCHOR1
 357 0040 00000000 		.word	.LANCHOR2
 358 0044 00000000 		.word	MEMORY_Task
 359              		.cfi_endproc
ARM GAS  /tmp/ccghtGyI.s 			page 11


 360              	.LFE140:
 362              		.section	.rodata.HAL_GPIO_EXTI_Callback.str1.4,"aMS",%progbits,1
 363              		.align	2
 364              	.LC6:
 365 0000 55534220 		.ascii	"USB connected\012\000"
 365      636F6E6E 
 365      65637465 
 365      640A00
 366 000f 00       		.align	2
 367              	.LC7:
 368 0010 55534220 		.ascii	"USB disconnected\012\000"
 368      64697363 
 368      6F6E6E65 
 368      63746564 
 368      0A00
 369 0022 0000     		.align	2
 370              	.LC8:
 371 0024 4E464320 		.ascii	"NFC GPO Interrupt\012\000"
 371      47504F20 
 371      496E7465 
 371      72727570 
 371      740A00
 372              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
 373              		.align	1
 374              		.global	HAL_GPIO_EXTI_Callback
 375              		.syntax unified
 376              		.thumb
 377              		.thumb_func
 378              		.fpu fpv4-sp-d16
 380              	HAL_GPIO_EXTI_Callback:
 381              	.LVL30:
 382              	.LFB143:
 128:app/tasks/memory/memory.c **** 
 129:app/tasks/memory/memory.c **** // TODO move to more suitable place
 130:app/tasks/memory/memory.c **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin) {
 383              		.loc 1 130 48 is_stmt 1 view -0
 384              		.cfi_startproc
 385              		@ args = 0, pretend = 0, frame = 40
 386              		@ frame_needed = 0, uses_anonymous_args = 0
 387              		.loc 1 130 48 is_stmt 0 view .LVU76
 388 0000 30B5     		push	{r4, r5, lr}
 389              	.LCFI5:
 390              		.cfi_def_cfa_offset 12
 391              		.cfi_offset 4, -12
 392              		.cfi_offset 5, -8
 393              		.cfi_offset 14, -4
 394 0002 8BB0     		sub	sp, sp, #44
 395              	.LCFI6:
 396              		.cfi_def_cfa_offset 56
 397 0004 0446     		mov	r4, r0
 131:app/tasks/memory/memory.c ****   if (GPIO_Pin == USB_VBUS_SENSE_Pin) {
 398              		.loc 1 131 3 is_stmt 1 view .LVU77
 399              		.loc 1 131 6 is_stmt 0 view .LVU78
 400 0006 B0F5807F 		cmp	r0, #256
 401 000a 03D0     		beq	.L24
 402              	.LVL31:
 403              	.L20:
ARM GAS  /tmp/ccghtGyI.s 			page 12


 132:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 133:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 134:app/tasks/memory/memory.c **** 
 135:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 136:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 137:app/tasks/memory/memory.c ****       #if DEBUG
 138:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 139:app/tasks/memory/memory.c ****       #endif
 140:app/tasks/memory/memory.c ****     } else {
 141:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 142:app/tasks/memory/memory.c ****       #if DEBUG
 143:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 144:app/tasks/memory/memory.c ****       #endif
 145:app/tasks/memory/memory.c ****     }
 146:app/tasks/memory/memory.c ****   }
 147:app/tasks/memory/memory.c **** 
 148:app/tasks/memory/memory.c ****   if (GPIO_Pin == _NFC_INT_Pin) {
 404              		.loc 1 148 3 is_stmt 1 view .LVU79
 405              		.loc 1 148 6 is_stmt 0 view .LVU80
 406 000c 012C     		cmp	r4, #1
 407 000e 36D0     		beq	.L25
 408              	.L19:
 149:app/tasks/memory/memory.c ****     #ifdef DEBUG
 150:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 151:app/tasks/memory/memory.c ****     #endif
 152:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 153:app/tasks/memory/memory.c ****   }
 154:app/tasks/memory/memory.c **** }...
 409              		.loc 1 154 1 view .LVU81
 410 0010 0BB0     		add	sp, sp, #44
 411              	.LCFI7:
 412              		.cfi_remember_state
 413              		.cfi_def_cfa_offset 12
 414              		@ sp needed
 415 0012 30BD     		pop	{r4, r5, pc}
 416              	.LVL32:
 417              	.L24:
 418              	.LCFI8:
 419              		.cfi_restore_state
 420              	.LBB4:
 132:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 421              		.loc 1 132 5 is_stmt 1 view .LVU82
 132:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 422              		.loc 1 132 32 is_stmt 0 view .LVU83
 423 0014 4FF48071 		mov	r1, #256
 424 0018 4FF09040 		mov	r0, #1207959552
 425              	.LVL33:
 132:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 426              		.loc 1 132 32 view .LVU84
 427 001c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 428              	.LVL34:
 133:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 429              		.loc 1 133 5 is_stmt 1 view .LVU85
 133:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 430              		.loc 1 133 67 is_stmt 0 view .LVU86
 431 0020 224B     		ldr	r3, .L27
 432 0022 5B68     		ldr	r3, [r3, #4]
ARM GAS  /tmp/ccghtGyI.s 			page 13


 133:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 433              		.loc 1 133 24 view .LVU87
 434 0024 9D68     		ldr	r5, [r3, #8]
 435              	.LVL35:
 135:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 436              		.loc 1 135 5 is_stmt 1 view .LVU88
 135:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 437              		.loc 1 135 8 is_stmt 0 view .LVU89
 438 0026 0128     		cmp	r0, #1
 439 0028 14D0     		beq	.L26
 440              	.LBB5:
 141:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 441              		.loc 1 141 7 is_stmt 1 view .LVU90
 141:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 442              		.loc 1 141 54 is_stmt 0 view .LVU91
 443 002a 0022     		movs	r2, #0
 444 002c 0492     		str	r2, [sp, #16]
 445 002e 0592     		str	r2, [sp, #20]
 446 0030 0692     		str	r2, [sp, #24]
 447 0032 1C23     		movs	r3, #28
 448 0034 8DF81030 		strb	r3, [sp, #16]
 141:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 449              		.loc 1 141 7 view .LVU92
 450 0038 1346     		mov	r3, r2
 451 003a 04A9     		add	r1, sp, #16
 452 003c 2846     		mov	r0, r5
 453              	.LVL36:
 141:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 454              		.loc 1 141 7 view .LVU93
 455 003e FFF7FEFF 		bl	osMessageQueuePut
 456              	.LVL37:
 143:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 457              		.loc 1 143 13 is_stmt 1 view .LVU94
 143:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 458              		.loc 1 143 21 is_stmt 0 view .LVU95
 459 0042 1B4B     		ldr	r3, .L27+4
 460 0044 1B68     		ldr	r3, [r3]
 143:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 461              		.loc 1 143 13 view .LVU96
 462 0046 9B68     		ldr	r3, [r3, #8]
 463 0048 1122     		movs	r2, #17
 464 004a 0121     		movs	r1, #1
 465 004c 1948     		ldr	r0, .L27+8
 466 004e FFF7FEFF 		bl	fwrite
 467              	.LVL38:
 468 0052 DBE7     		b	.L20
 469              	.LVL39:
 470              	.L26:
 143:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 471              		.loc 1 143 13 view .LVU97
 472              	.LBE5:
 473              	.LBB6:
 136:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 474              		.loc 1 136 7 is_stmt 1 view .LVU98
 136:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 475              		.loc 1 136 54 is_stmt 0 view .LVU99
 476 0054 0022     		movs	r2, #0
ARM GAS  /tmp/ccghtGyI.s 			page 14


 477 0056 0192     		str	r2, [sp, #4]
 478 0058 0292     		str	r2, [sp, #8]
 479 005a 0392     		str	r2, [sp, #12]
 480 005c 1B23     		movs	r3, #27
 481 005e 8DF80430 		strb	r3, [sp, #4]
 136:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 482              		.loc 1 136 7 view .LVU100
 483 0062 1346     		mov	r3, r2
 484 0064 01A9     		add	r1, sp, #4
 485 0066 2846     		mov	r0, r5
 486              	.LVL40:
 136:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 487              		.loc 1 136 7 view .LVU101
 488 0068 FFF7FEFF 		bl	osMessageQueuePut
 489              	.LVL41:
 138:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 490              		.loc 1 138 13 is_stmt 1 view .LVU102
 138:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 491              		.loc 1 138 21 is_stmt 0 view .LVU103
 492 006c 104B     		ldr	r3, .L27+4
 493 006e 1B68     		ldr	r3, [r3]
 138:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 494              		.loc 1 138 13 view .LVU104
 495 0070 9B68     		ldr	r3, [r3, #8]
 496 0072 0E22     		movs	r2, #14
 497 0074 0121     		movs	r1, #1
 498 0076 1048     		ldr	r0, .L27+12
 499 0078 FFF7FEFF 		bl	fwrite
 500              	.LVL42:
 501              	.LBE6:
 502 007c C6E7     		b	.L20
 503              	.LVL43:
 504              	.L25:
 138:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 505              		.loc 1 138 13 view .LVU105
 506              	.LBE4:
 507              	.LBB7:
 150:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 508              		.loc 1 150 9 is_stmt 1 view .LVU106
 150:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 509              		.loc 1 150 17 is_stmt 0 view .LVU107
 510 007e 0C4B     		ldr	r3, .L27+4
 511 0080 1B68     		ldr	r3, [r3]
 150:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 512              		.loc 1 150 9 view .LVU108
 513 0082 9B68     		ldr	r3, [r3, #8]
 514 0084 1222     		movs	r2, #18
 515 0086 0121     		movs	r1, #1
 516 0088 0C48     		ldr	r0, .L27+16
 517 008a FFF7FEFF 		bl	fwrite
 518              	.LVL44:
 152:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 519              		.loc 1 152 5 is_stmt 1 view .LVU109
 152:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 520              		.loc 1 152 69 is_stmt 0 view .LVU110
 521 008e 0022     		movs	r2, #0
 522 0090 0792     		str	r2, [sp, #28]
ARM GAS  /tmp/ccghtGyI.s 			page 15


 523 0092 0892     		str	r2, [sp, #32]
 524 0094 0992     		str	r2, [sp, #36]
 525 0096 0F23     		movs	r3, #15
 526 0098 8DF81C30 		strb	r3, [sp, #28]
 152:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 527              		.loc 1 152 5 view .LVU111
 528 009c 1346     		mov	r3, r2
 529 009e 07A9     		add	r1, sp, #28
 530 00a0 0748     		ldr	r0, .L27+20
 531 00a2 8068     		ldr	r0, [r0, #8]
 532 00a4 FFF7FEFF 		bl	osMessageQueuePut
 533              	.LVL45:
 534              	.LBE7:
 535              		.loc 1 154 1 view .LVU112
 536 00a8 B2E7     		b	.L19
 537              	.L28:
 538 00aa 00BF     		.align	2
 539              	.L27:
 540 00ac 00000000 		.word	ACTORS_LIST_SystemRegistry
 541 00b0 00000000 		.word	_impure_ptr
 542 00b4 10000000 		.word	.LC7
 543 00b8 00000000 		.word	.LC6
 544 00bc 24000000 		.word	.LC8
 545 00c0 00000000 		.word	NFC_Actor
 546              		.cfi_endproc
 547              	.LFE143:
 549              		.global	MEMORY_W25QHandle
 550              		.global	memoryTaskDescription
 551              		.section	.rodata.str1.4,"aMS",%progbits,1
 552              		.align	2
 553              	.LC9:
 554 0000 6D656D6F 		.ascii	"memoryTask\000"
 554      72795461 
 554      736B00
 555              		.global	memoryTaskControlBlock
 556              		.global	memoryTaskBuffer
 557              		.global	MEMORY_Actor
 558              		.section	.bss.memoryTaskBuffer,"aw",%nobits
 559              		.align	2
 562              	memoryTaskBuffer:
 563 0000 00000000 		.space	512
 563      00000000 
 563      00000000 
 563      00000000 
 563      00000000 
 564              		.section	.bss.memoryTaskControlBlock,"aw",%nobits
 565              		.align	2
 568              	memoryTaskControlBlock:
 569 0000 00000000 		.space	92
 569      00000000 
 569      00000000 
 569      00000000 
 569      00000000 
 570              		.section	.data.MEMORY_Actor,"aw"
 571              		.align	2
 572              		.set	.LANCHOR1,. + 0
 575              	MEMORY_Actor:
ARM GAS  /tmp/ccghtGyI.s 			page 16


 576 0000 08000000 		.word	8
 577 0004 00000000 		.word	0
 578 0008 00000000 		.word	0
 579 000c 00000000 		.word	handleMemoryFSM
 580 0010 00       		.byte	0
 581 0011 000000   		.space	3
 582              		.section	.data.MEMORY_W25QHandle,"aw"
 583              		.align	2
 584              		.set	.LANCHOR0,. + 0
 587              	MEMORY_W25QHandle:
 588 0000 00000000 		.word	hqspi
 589 0004 00000000 		.space	8
 589      00000000 
 590 000c 00008000 		.word	8388608
 591 0010 00100000 		.word	4096
 592 0014 00010000 		.word	256
 593 0018 00010000 		.word	256
 594 001c 00800000 		.word	32768
 595 0020 00000100 		.word	65536
 596 0024 00       		.byte	0
 597 0025 00       		.space	1
 598 0026 FFFF     		.short	-1
 599              		.section	.rodata.memoryTaskDescription,"a"
 600              		.align	2
 601              		.set	.LANCHOR2,. + 0
 604              	memoryTaskDescription:
 605 0000 00000000 		.word	.LC9
 606 0004 00000000 		.space	4
 607 0008 00000000 		.word	memoryTaskControlBlock
 608 000c 5C000000 		.word	92
 609 0010 00000000 		.word	memoryTaskBuffer
 610 0014 00020000 		.word	512
 611 0018 18000000 		.word	24
 612 001c 00000000 		.space	8
 612      00000000 
 613              		.text
 614              	.Letext0:
 615              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 616              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 617              		.file 4 "/usr/include/newlib/sys/_types.h"
 618              		.file 5 "/usr/include/newlib/sys/reent.h"
 619              		.file 6 "/usr/include/newlib/sys/lock.h"
 620              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 621              		.file 8 "/usr/include/newlib/sys/types.h"
 622              		.file 9 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l412xx.h"
 623              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 624              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 625              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 626              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_qspi.h"
 627              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 628              		.file 15 "app/core/actor/../../config/events_list/events_list.h"
 629              		.file 16 "app/core/actor/../../config/actors_list/actors_list.h"
 630              		.file 17 "app/core/actor/actor.h"
 631              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 632              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 633              		.file 20 "Drivers/BSP/Components/ST25DV/st25dv_reg.h"
 634              		.file 21 "Drivers/BSP/Components/ST25DV/st25dv.h"
ARM GAS  /tmp/ccghtGyI.s 			page 17


 635              		.file 22 "app/tasks/nfc/nfc.h"
 636              		.file 23 "Core/Inc/quadspi.h"
 637              		.file 24 "app/drivers/w25q/w25q.h"
 638              		.file 25 "app/tasks/memory/memory.h"
 639              		.file 26 "/usr/include/newlib/stdio.h"
 640              		.file 27 "<built-in>"
ARM GAS  /tmp/ccghtGyI.s 			page 18


DEFINED SYMBOLS
                            *ABS*:0000000000000000 memory.c
     /tmp/ccghtGyI.s:18     .text.handleMemoryFSM:0000000000000000 $t
     /tmp/ccghtGyI.s:25     .text.handleMemoryFSM:0000000000000000 handleMemoryFSM
     /tmp/ccghtGyI.s:44     .rodata.MEMORY_Task.str1.4:0000000000000000 $d
     /tmp/ccghtGyI.s:60     .text.MEMORY_Task:0000000000000000 $t
     /tmp/ccghtGyI.s:67     .text.MEMORY_Task:0000000000000000 MEMORY_Task
     /tmp/ccghtGyI.s:276    .text.MEMORY_Task:00000000000000e0 $d
     /tmp/ccghtGyI.s:289    .rodata.MEMORY_TaskInit.str1.4:0000000000000000 $d
     /tmp/ccghtGyI.s:293    .text.MEMORY_TaskInit:0000000000000000 $t
     /tmp/ccghtGyI.s:300    .text.MEMORY_TaskInit:0000000000000000 MEMORY_TaskInit
     /tmp/ccghtGyI.s:355    .text.MEMORY_TaskInit:0000000000000038 $d
     /tmp/ccghtGyI.s:363    .rodata.HAL_GPIO_EXTI_Callback.str1.4:0000000000000000 $d
     /tmp/ccghtGyI.s:373    .text.HAL_GPIO_EXTI_Callback:0000000000000000 $t
     /tmp/ccghtGyI.s:380    .text.HAL_GPIO_EXTI_Callback:0000000000000000 HAL_GPIO_EXTI_Callback
     /tmp/ccghtGyI.s:540    .text.HAL_GPIO_EXTI_Callback:00000000000000ac $d
     /tmp/ccghtGyI.s:587    .data.MEMORY_W25QHandle:0000000000000000 MEMORY_W25QHandle
     /tmp/ccghtGyI.s:604    .rodata.memoryTaskDescription:0000000000000000 memoryTaskDescription
     /tmp/ccghtGyI.s:552    .rodata.str1.4:0000000000000000 $d
     /tmp/ccghtGyI.s:568    .bss.memoryTaskControlBlock:0000000000000000 memoryTaskControlBlock
     /tmp/ccghtGyI.s:562    .bss.memoryTaskBuffer:0000000000000000 memoryTaskBuffer
     /tmp/ccghtGyI.s:575    .data.MEMORY_Actor:0000000000000000 MEMORY_Actor
     /tmp/ccghtGyI.s:559    .bss.memoryTaskBuffer:0000000000000000 $d
     /tmp/ccghtGyI.s:565    .bss.memoryTaskControlBlock:0000000000000000 $d
     /tmp/ccghtGyI.s:571    .data.MEMORY_Actor:0000000000000000 $d
     /tmp/ccghtGyI.s:583    .data.MEMORY_W25QHandle:0000000000000000 $d
     /tmp/ccghtGyI.s:600    .rodata.memoryTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
W25Q_EraseSector
W25Q_WriteData
W25Q_ReadData
W25Q_ReadStatusReg
fwrite
osMessageQueueGet
osMessageQueuePut
fprintf
_impure_ptr
ACTORS_LIST_SystemRegistry
osMessageQueueNew
osThreadNew
HAL_GPIO_ReadPin
NFC_Actor
hqspi
