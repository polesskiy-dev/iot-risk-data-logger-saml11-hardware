ARM GAS  /tmp/ccQZStK8.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"memory.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.handleMemoryFSM,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	handleMemoryFSM:
  26              	.LVL0:
  27              	.LFB141:
  28              		.file 1 "app/tasks/memory/memory.c"
   1:app/tasks/memory/memory.c **** /*!
   2:app/tasks/memory/memory.c ****  * @file memory.c
   3:app/tasks/memory/memory.c ****  * @brief implementation of memory
   4:app/tasks/memory/memory.c ****  *
   5:app/tasks/memory/memory.c ****  * Detailed description of the implementation file.
   6:app/tasks/memory/memory.c ****  *
   7:app/tasks/memory/memory.c ****  * @date 14/08/2024
   8:app/tasks/memory/memory.c ****  * @author artempolisskyi
   9:app/tasks/memory/memory.c ****  */
  10:app/tasks/memory/memory.c **** 
  11:app/tasks/memory/memory.c **** #include "memory.h"
  12:app/tasks/memory/memory.c **** 
  13:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message);
  14:app/tasks/memory/memory.c **** 
  15:app/tasks/memory/memory.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  16:app/tasks/memory/memory.c **** 
  17:app/tasks/memory/memory.c **** /**
  18:app/tasks/memory/memory.c ****  * @brief Memory actor struct representing NOR Flash storage
  19:app/tasks/memory/memory.c ****  * @extends actor_t
  20:app/tasks/memory/memory.c ****  */
  21:app/tasks/memory/memory.c **** MEMORY_Actor_t MEMORY_Actor = {
  22:app/tasks/memory/memory.c ****         .super = {
  23:app/tasks/memory/memory.c ****                 .actorId = MEMORY_ACTOR_ID,
  24:app/tasks/memory/memory.c ****                 .messageHandler = (messageHandler_t) handleMemoryFSM,
  25:app/tasks/memory/memory.c ****                 .osMessageQueueId = NULL,
  26:app/tasks/memory/memory.c ****                 .osThreadId = NULL,
  27:app/tasks/memory/memory.c ****         },
  28:app/tasks/memory/memory.c ****         .state = MEMORY_NO_STATE
  29:app/tasks/memory/memory.c **** };
  30:app/tasks/memory/memory.c **** 
ARM GAS  /tmp/ccQZStK8.s 			page 2


  31:app/tasks/memory/memory.c **** // task description required for static task creation
  32:app/tasks/memory/memory.c **** uint32_t memoryTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  33:app/tasks/memory/memory.c **** StaticTask_t memoryTaskControlBlock;
  34:app/tasks/memory/memory.c **** const osThreadAttr_t memoryTaskDescription = {
  35:app/tasks/memory/memory.c ****         .name = "memoryTask",
  36:app/tasks/memory/memory.c ****         .cb_mem = &memoryTaskControlBlock,
  37:app/tasks/memory/memory.c ****         .cb_size = sizeof(memoryTaskControlBlock),
  38:app/tasks/memory/memory.c ****         .stack_mem = &memoryTaskBuffer[0],
  39:app/tasks/memory/memory.c ****         .stack_size = sizeof(memoryTaskBuffer),
  40:app/tasks/memory/memory.c ****         .priority = (osPriority_t) osPriorityNormal,
  41:app/tasks/memory/memory.c **** };
  42:app/tasks/memory/memory.c **** 
  43:app/tasks/memory/memory.c **** W25Q_HandleTypeDef MEMORY_W25QHandle = {
  44:app/tasks/memory/memory.c ****         .hqspi = &hqspi,
  45:app/tasks/memory/memory.c ****         .geometry = {
  46:app/tasks/memory/memory.c ****                 .flashSize      = W25Q64JV_FLASH_SIZE,
  47:app/tasks/memory/memory.c ****                 .sectorSize     = W25Q64JV_SECTOR_SIZE,
  48:app/tasks/memory/memory.c ****                 .subSectorSize  = W25Q64JV_SUBSECTOR_SIZE,
  49:app/tasks/memory/memory.c ****                 .pageSize       = W25Q64JV_PAGE_SIZE,
  50:app/tasks/memory/memory.c ****                 .blockSize32K   = W25Q64JV_BLOCK_SIZE_32K,
  51:app/tasks/memory/memory.c ****                 .blockSize64K   = W25Q64JV_BLOCK_SIZE_64K
  52:app/tasks/memory/memory.c ****         },
  53:app/tasks/memory/memory.c ****         .status.status1Reg      = 0x00,
  54:app/tasks/memory/memory.c ****         .busyWaitCycles         = FLASH_BUSY_WAIT_CYCLES
  55:app/tasks/memory/memory.c **** };
  56:app/tasks/memory/memory.c **** 
  57:app/tasks/memory/memory.c **** /**
  58:app/tasks/memory/memory.c ****  * @brief Initializes the Memory Sensor task.
  59:app/tasks/memory/memory.c ****  * @return {actor_t*} - pointer to the actor base struct
  60:app/tasks/memory/memory.c ****  */
  61:app/tasks/memory/memory.c **** actor_t* MEMORY_TaskInit(void) {
  62:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
  63:app/tasks/memory/memory.c ****           .name = "memoryQueue"
  64:app/tasks/memory/memory.c ****   });
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
  66:app/tasks/memory/memory.c **** 
  67:app/tasks/memory/memory.c ****   return (actor_t*) &MEMORY_Actor;
  68:app/tasks/memory/memory.c **** }
  69:app/tasks/memory/memory.c **** 
  70:app/tasks/memory/memory.c **** /**
  71:app/tasks/memory/memory.c ****  * @brief Memory (NOR Flash) task
  72:app/tasks/memory/memory.c ****  * Waits for message from the queue and proceed it in FSM
  73:app/tasks/memory/memory.c ****  * Enters ERROR state if message handling failed
  74:app/tasks/memory/memory.c ****  */
  75:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  76:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  77:app/tasks/memory/memory.c ****   message_t msg;
  78:app/tasks/memory/memory.c **** 
  79:app/tasks/memory/memory.c ****   HAL_StatusTypeDef status = HAL_OK;
  80:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  81:app/tasks/memory/memory.c ****   char *dummyToWrite = "Hello, World!";
  82:app/tasks/memory/memory.c ****   uint8_t dummyToRead[32] = {0};
  83:app/tasks/memory/memory.c **** 
  84:app/tasks/memory/memory.c ****   W25Q_Init(&MEMORY_W25QHandle);
  85:app/tasks/memory/memory.c **** 
  86:app/tasks/memory/memory.c ****   status = W25Q_EraseSector(&MEMORY_W25QHandle, 0);
  87:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *)dummyToWrite, 0, 13);
ARM GAS  /tmp/ccQZStK8.s 			page 3


  88:app/tasks/memory/memory.c ****   status = W25Q_ReadData(&MEMORY_W25QHandle, dummyToRead, 0, 32);
  89:app/tasks/memory/memory.c ****   status = W25Q_ReadStatusReg(&MEMORY_W25QHandle);
  90:app/tasks/memory/memory.c **** 
  91:app/tasks/memory/memory.c ****   #ifdef DEBUG
  92:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
  93:app/tasks/memory/memory.c ****   #endif
  94:app/tasks/memory/memory.c **** 
  95:app/tasks/memory/memory.c ****   for (;;) {
  96:app/tasks/memory/memory.c ****     // Wait for messages from the queue
  97:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
  98:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
  99:app/tasks/memory/memory.c **** 
 100:app/tasks/memory/memory.c ****       if (status != osOK) {
 101:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 102:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 104:app/tasks/memory/memory.c ****       }
 105:app/tasks/memory/memory.c ****     }
 106:app/tasks/memory/memory.c ****   }
 107:app/tasks/memory/memory.c **** }
 108:app/tasks/memory/memory.c **** 
 109:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message) {
  29              		.loc 1 109 77 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 110:app/tasks/memory/memory.c ****   return osOK;
  34              		.loc 1 110 3 view .LVU1
 111:app/tasks/memory/memory.c **** }...
  35              		.loc 1 111 1 is_stmt 0 view .LVU2
  36 0000 0020     		movs	r0, #0
  37              	.LVL1:
  38              		.loc 1 111 1 view .LVU3
  39 0002 7047     		bx	lr
  40              		.cfi_endproc
  41              	.LFE141:
  43              		.section	.rodata.MEMORY_Task.str1.4,"aMS",%progbits,1
  44              		.align	2
  45              	.LC0:
  46 0000 48656C6C 		.ascii	"Hello, World!\000"
  46      6F2C2057 
  46      6F726C64 
  46      2100
  47 000e 0000     		.align	2
  48              	.LC1:
  49 0010 4D656D6F 		.ascii	"Memory task initialized\012\000"
  49      72792074 
  49      61736B20 
  49      696E6974 
  49      69616C69 
  50 0029 000000   		.align	2
  51              	.LC2:
  52 002c 4D454D4F 		.ascii	"MEMORY_STATE_ERROR\000"
  52      52595F53 
  52      54415445 
  52      5F455252 
ARM GAS  /tmp/ccQZStK8.s 			page 4


  52      4F5200
  53 003f 00       		.align	2
  54              	.LC3:
  55 0040 256C753A 		.ascii	"%lu: %s\012\000"
  55      2025730A 
  55      00
  56              		.section	.text.MEMORY_Task,"ax",%progbits
  57              		.align	1
  58              		.global	MEMORY_Task
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu fpv4-sp-d16
  64              	MEMORY_Task:
  65              	.LVL2:
  66              	.LFB140:
  75:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  67              		.loc 1 75 34 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 64
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  75:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  71              		.loc 1 75 34 is_stmt 0 view .LVU5
  72 0000 30B5     		push	{r4, r5, lr}
  73              	.LCFI0:
  74              		.cfi_def_cfa_offset 12
  75              		.cfi_offset 4, -12
  76              		.cfi_offset 5, -8
  77              		.cfi_offset 14, -4
  78 0002 91B0     		sub	sp, sp, #68
  79              	.LCFI1:
  80              		.cfi_def_cfa_offset 80
  76:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  81              		.loc 1 76 3 is_stmt 1 view .LVU6
  77:app/tasks/memory/memory.c ****   message_t msg;
  82              		.loc 1 77 3 view .LVU7
  79:app/tasks/memory/memory.c ****   HAL_StatusTypeDef status = HAL_OK;
  83              		.loc 1 79 3 view .LVU8
  84              	.LVL3:
  80:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  85              		.loc 1 80 3 view .LVU9
  80:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  86              		.loc 1 80 11 is_stmt 0 view .LVU10
  87 0004 0024     		movs	r4, #0
  88 0006 ADF82440 		strh	r4, [sp, #36]	@ movhi
  81:app/tasks/memory/memory.c ****   char *dummyToWrite = "Hello, World!";
  89              		.loc 1 81 3 is_stmt 1 view .LVU11
  90              	.LVL4:
  82:app/tasks/memory/memory.c ****   uint8_t dummyToRead[32] = {0};
  91              		.loc 1 82 3 view .LVU12
  82:app/tasks/memory/memory.c ****   uint8_t dummyToRead[32] = {0};
  92              		.loc 1 82 11 is_stmt 0 view .LVU13
  93 000a 0194     		str	r4, [sp, #4]
  94 000c 0294     		str	r4, [sp, #8]
  95 000e 0394     		str	r4, [sp, #12]
  96 0010 0494     		str	r4, [sp, #16]
  97 0012 0594     		str	r4, [sp, #20]
ARM GAS  /tmp/ccQZStK8.s 			page 5


  98 0014 0694     		str	r4, [sp, #24]
  99 0016 0794     		str	r4, [sp, #28]
 100 0018 0894     		str	r4, [sp, #32]
  84:app/tasks/memory/memory.c ****   W25Q_Init(&MEMORY_W25QHandle);
 101              		.loc 1 84 3 is_stmt 1 view .LVU14
 102 001a 254D     		ldr	r5, .L7
 103 001c 2846     		mov	r0, r5
 104              	.LVL5:
  84:app/tasks/memory/memory.c ****   W25Q_Init(&MEMORY_W25QHandle);
 105              		.loc 1 84 3 is_stmt 0 view .LVU15
 106 001e FFF7FEFF 		bl	W25Q_Init
 107              	.LVL6:
  86:app/tasks/memory/memory.c ****   status = W25Q_EraseSector(&MEMORY_W25QHandle, 0);
 108              		.loc 1 86 3 is_stmt 1 view .LVU16
  86:app/tasks/memory/memory.c ****   status = W25Q_EraseSector(&MEMORY_W25QHandle, 0);
 109              		.loc 1 86 12 is_stmt 0 view .LVU17
 110 0022 2146     		mov	r1, r4
 111 0024 2846     		mov	r0, r5
 112 0026 FFF7FEFF 		bl	W25Q_EraseSector
 113              	.LVL7:
  87:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *)dummyToWrite, 0, 13);
 114              		.loc 1 87 3 is_stmt 1 view .LVU18
  87:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *)dummyToWrite, 0, 13);
 115              		.loc 1 87 12 is_stmt 0 view .LVU19
 116 002a 0D23     		movs	r3, #13
 117 002c 2246     		mov	r2, r4
 118 002e 2149     		ldr	r1, .L7+4
 119 0030 2846     		mov	r0, r5
 120 0032 FFF7FEFF 		bl	W25Q_WriteData
 121              	.LVL8:
  88:app/tasks/memory/memory.c ****   status = W25Q_ReadData(&MEMORY_W25QHandle, dummyToRead, 0, 32);
 122              		.loc 1 88 3 is_stmt 1 view .LVU20
  88:app/tasks/memory/memory.c ****   status = W25Q_ReadData(&MEMORY_W25QHandle, dummyToRead, 0, 32);
 123              		.loc 1 88 12 is_stmt 0 view .LVU21
 124 0036 2023     		movs	r3, #32
 125 0038 2246     		mov	r2, r4
 126 003a 01A9     		add	r1, sp, #4
 127 003c 2846     		mov	r0, r5
 128 003e FFF7FEFF 		bl	W25Q_ReadData
 129              	.LVL9:
  89:app/tasks/memory/memory.c ****   status = W25Q_ReadStatusReg(&MEMORY_W25QHandle);
 130              		.loc 1 89 3 is_stmt 1 view .LVU22
  89:app/tasks/memory/memory.c ****   status = W25Q_ReadStatusReg(&MEMORY_W25QHandle);
 131              		.loc 1 89 12 is_stmt 0 view .LVU23
 132 0042 2846     		mov	r0, r5
 133 0044 FFF7FEFF 		bl	W25Q_ReadStatusReg
 134              	.LVL10:
  92:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
 135              		.loc 1 92 5 is_stmt 1 view .LVU24
  92:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
 136              		.loc 1 92 13 is_stmt 0 view .LVU25
 137 0048 1B4B     		ldr	r3, .L7+8
 138 004a 1B68     		ldr	r3, [r3]
  92:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
 139              		.loc 1 92 5 view .LVU26
 140 004c 9B68     		ldr	r3, [r3, #8]
 141 004e 1822     		movs	r2, #24
ARM GAS  /tmp/ccQZStK8.s 			page 6


 142 0050 0121     		movs	r1, #1
 143 0052 1A48     		ldr	r0, .L7+12
 144 0054 FFF7FEFF 		bl	fwrite
 145              	.LVL11:
 146              	.L3:
  95:app/tasks/memory/memory.c ****   for (;;) {
 147              		.loc 1 95 3 is_stmt 1 view .LVU27
  97:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
 148              		.loc 1 97 5 view .LVU28
  97:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
 149              		.loc 1 97 9 is_stmt 0 view .LVU29
 150 0058 4FF0FF33 		mov	r3, #-1
 151 005c 0022     		movs	r2, #0
 152 005e 0AA9     		add	r1, sp, #40
 153 0060 1748     		ldr	r0, .L7+16
 154 0062 8068     		ldr	r0, [r0, #8]
 155 0064 FFF7FEFF 		bl	osMessageQueueGet
 156              	.LVL12:
  97:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
 157              		.loc 1 97 8 view .LVU30
 158 0068 0028     		cmp	r0, #0
 159 006a F5D1     		bne	.L3
 160              	.LBB2:
  98:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 161              		.loc 1 98 7 is_stmt 1 view .LVU31
  98:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 162              		.loc 1 98 45 is_stmt 0 view .LVU32
 163 006c 1448     		ldr	r0, .L7+16
 164 006e C368     		ldr	r3, [r0, #12]
  98:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 165              		.loc 1 98 27 view .LVU33
 166 0070 0AA9     		add	r1, sp, #40
 167 0072 9847     		blx	r3
 168              	.LVL13:
 100:app/tasks/memory/memory.c ****       if (status != osOK) {
 169              		.loc 1 100 7 is_stmt 1 view .LVU34
 100:app/tasks/memory/memory.c ****       if (status != osOK) {
 170              		.loc 1 100 10 is_stmt 0 view .LVU35
 171 0074 0028     		cmp	r0, #0
 172 0076 EFD0     		beq	.L3
 173              	.LBB3:
 101:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 174              		.loc 1 101 9 is_stmt 1 view .LVU36
 101:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 175              		.loc 1 101 71 is_stmt 0 view .LVU37
 176 0078 124B     		ldr	r3, .L7+20
 177 007a 5B68     		ldr	r3, [r3, #4]
 101:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 178              		.loc 1 101 28 view .LVU38
 179 007c 9868     		ldr	r0, [r3, #8]
 180              	.LVL14:
 102:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 181              		.loc 1 102 9 is_stmt 1 view .LVU39
 102:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 182              		.loc 1 102 55 is_stmt 0 view .LVU40
 183 007e 0022     		movs	r2, #0
 184 0080 0D92     		str	r2, [sp, #52]
ARM GAS  /tmp/ccQZStK8.s 			page 7


 185 0082 0E92     		str	r2, [sp, #56]
 186 0084 0F92     		str	r2, [sp, #60]
 187 0086 0C23     		movs	r3, #12
 188 0088 8DF83430 		strb	r3, [sp, #52]
 189 008c 0823     		movs	r3, #8
 190 008e 0E93     		str	r3, [sp, #56]
 102:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 191              		.loc 1 102 9 view .LVU41
 192 0090 1346     		mov	r3, r2
 193 0092 0DA9     		add	r1, sp, #52
 194 0094 FFF7FEFF 		bl	osMessageQueuePut
 195              	.LVL15:
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 196              		.loc 1 103 9 is_stmt 1 view .LVU42
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 197              		.loc 1 103 9 view .LVU43
 198 0098 094A     		ldr	r2, .L7+16
 199 009a 0123     		movs	r3, #1
 200 009c 1374     		strb	r3, [r2, #16]
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 201              		.loc 1 103 9 view .LVU44
 202 009e 064B     		ldr	r3, .L7+8
 203 00a0 1868     		ldr	r0, [r3]
 204 00a2 094B     		ldr	r3, .L7+24
 205 00a4 1268     		ldr	r2, [r2]
 206 00a6 0949     		ldr	r1, .L7+28
 207 00a8 8068     		ldr	r0, [r0, #8]
 208 00aa FFF7FEFF 		bl	fprintf
 209              	.LVL16:
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 210              		.loc 1 103 9 view .LVU45
 103:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 211              		.loc 1 103 52 view .LVU46
 212 00ae D3E7     		b	.L3
 213              	.L8:
 214              		.align	2
 215              	.L7:
 216 00b0 00000000 		.word	.LANCHOR0
 217 00b4 00000000 		.word	.LC0
 218 00b8 00000000 		.word	_impure_ptr
 219 00bc 10000000 		.word	.LC1
 220 00c0 00000000 		.word	.LANCHOR1
 221 00c4 00000000 		.word	ACTORS_LIST_SystemRegistry
 222 00c8 2C000000 		.word	.LC2
 223 00cc 40000000 		.word	.LC3
 224              	.LBE3:
 225              	.LBE2:
 226              		.cfi_endproc
 227              	.LFE140:
 229              		.section	.rodata.MEMORY_TaskInit.str1.4,"aMS",%progbits,1
 230              		.align	2
 231              	.LC4:
 232 0000 6D656D6F 		.ascii	"memoryQueue\000"
 232      72795175 
 232      65756500 
 233              		.section	.text.MEMORY_TaskInit,"ax",%progbits
 234              		.align	1
ARM GAS  /tmp/ccQZStK8.s 			page 8


 235              		.global	MEMORY_TaskInit
 236              		.syntax unified
 237              		.thumb
 238              		.thumb_func
 239              		.fpu fpv4-sp-d16
 241              	MEMORY_TaskInit:
 242              	.LFB139:
  61:app/tasks/memory/memory.c **** actor_t* MEMORY_TaskInit(void) {
 243              		.loc 1 61 32 view -0
 244              		.cfi_startproc
 245              		@ args = 0, pretend = 0, frame = 24
 246              		@ frame_needed = 0, uses_anonymous_args = 0
 247 0000 30B5     		push	{r4, r5, lr}
 248              	.LCFI2:
 249              		.cfi_def_cfa_offset 12
 250              		.cfi_offset 4, -12
 251              		.cfi_offset 5, -8
 252              		.cfi_offset 14, -4
 253 0002 87B0     		sub	sp, sp, #28
 254              	.LCFI3:
 255              		.cfi_def_cfa_offset 40
  62:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 256              		.loc 1 62 3 view .LVU48
  62:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 257              		.loc 1 62 130 is_stmt 0 view .LVU49
 258 0004 0024     		movs	r4, #0
 259 0006 0094     		str	r4, [sp]
 260 0008 0194     		str	r4, [sp, #4]
 261 000a 0294     		str	r4, [sp, #8]
 262 000c 0394     		str	r4, [sp, #12]
 263 000e 0494     		str	r4, [sp, #16]
 264 0010 0594     		str	r4, [sp, #20]
 265 0012 094B     		ldr	r3, .L11
 266 0014 0093     		str	r3, [sp]
  62:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 267              		.loc 1 62 41 view .LVU50
 268 0016 6A46     		mov	r2, sp
 269 0018 0C21     		movs	r1, #12
 270 001a 0820     		movs	r0, #8
 271 001c FFF7FEFF 		bl	osMessageQueueNew
 272              	.LVL17:
  62:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 273              		.loc 1 62 39 view .LVU51
 274 0020 064D     		ldr	r5, .L11+4
 275 0022 A860     		str	r0, [r5, #8]
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
 276              		.loc 1 65 3 is_stmt 1 view .LVU52
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
 277              		.loc 1 65 35 is_stmt 0 view .LVU53
 278 0024 064A     		ldr	r2, .L11+8
 279 0026 2146     		mov	r1, r4
 280 0028 0648     		ldr	r0, .L11+12
 281 002a FFF7FEFF 		bl	osThreadNew
 282              	.LVL18:
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
 283              		.loc 1 65 33 view .LVU54
 284 002e 6860     		str	r0, [r5, #4]
ARM GAS  /tmp/ccQZStK8.s 			page 9


  67:app/tasks/memory/memory.c ****   return (actor_t*) &MEMORY_Actor;
 285              		.loc 1 67 3 is_stmt 1 view .LVU55
  68:app/tasks/memory/memory.c **** }
 286              		.loc 1 68 1 is_stmt 0 view .LVU56
 287 0030 2846     		mov	r0, r5
 288 0032 07B0     		add	sp, sp, #28
 289              	.LCFI4:
 290              		.cfi_def_cfa_offset 12
 291              		@ sp needed
 292 0034 30BD     		pop	{r4, r5, pc}
 293              	.L12:
 294 0036 00BF     		.align	2
 295              	.L11:
 296 0038 00000000 		.word	.LC4
 297 003c 00000000 		.word	.LANCHOR1
 298 0040 00000000 		.word	.LANCHOR2
 299 0044 00000000 		.word	MEMORY_Task
 300              		.cfi_endproc
 301              	.LFE139:
 303              		.global	MEMORY_W25QHandle
 304              		.global	memoryTaskDescription
 305              		.section	.rodata.str1.4,"aMS",%progbits,1
 306              		.align	2
 307              	.LC5:
 308 0000 6D656D6F 		.ascii	"memoryTask\000"
 308      72795461 
 308      736B00
 309              		.global	memoryTaskControlBlock
 310              		.global	memoryTaskBuffer
 311              		.global	MEMORY_Actor
 312              		.section	.bss.memoryTaskBuffer,"aw",%nobits
 313              		.align	2
 316              	memoryTaskBuffer:
 317 0000 00000000 		.space	512
 317      00000000 
 317      00000000 
 317      00000000 
 317      00000000 
 318              		.section	.bss.memoryTaskControlBlock,"aw",%nobits
 319              		.align	2
 322              	memoryTaskControlBlock:
 323 0000 00000000 		.space	92
 323      00000000 
 323      00000000 
 323      00000000 
 323      00000000 
 324              		.section	.data.MEMORY_Actor,"aw"
 325              		.align	2
 326              		.set	.LANCHOR1,. + 0
 329              	MEMORY_Actor:
 330 0000 08000000 		.word	8
 331 0004 00000000 		.word	0
 332 0008 00000000 		.word	0
 333 000c 00000000 		.word	handleMemoryFSM
 334 0010 00       		.byte	0
 335 0011 000000   		.space	3
 336              		.section	.data.MEMORY_W25QHandle,"aw"
ARM GAS  /tmp/ccQZStK8.s 			page 10


 337              		.align	2
 338              		.set	.LANCHOR0,. + 0
 341              	MEMORY_W25QHandle:
 342 0000 00000000 		.word	hqspi
 343 0004 00000000 		.space	8
 343      00000000 
 344 000c 00008000 		.word	8388608
 345 0010 00100000 		.word	4096
 346 0014 00010000 		.word	256
 347 0018 00010000 		.word	256
 348 001c 00800000 		.word	32768
 349 0020 00000100 		.word	65536
 350 0024 00       		.byte	0
 351 0025 05       		.byte	5
 352 0026 0000     		.space	2
 353              		.section	.rodata.memoryTaskDescription,"a"
 354              		.align	2
 355              		.set	.LANCHOR2,. + 0
 358              	memoryTaskDescription:
 359 0000 00000000 		.word	.LC5
 360 0004 00000000 		.space	4
 361 0008 00000000 		.word	memoryTaskControlBlock
 362 000c 5C000000 		.word	92
 363 0010 00000000 		.word	memoryTaskBuffer
 364 0014 00020000 		.word	512
 365 0018 18000000 		.word	24
 366 001c 00000000 		.space	8
 366      00000000 
 367              		.text
 368              	.Letext0:
 369              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 370              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 371              		.file 4 "/usr/include/newlib/sys/_types.h"
 372              		.file 5 "/usr/include/newlib/sys/reent.h"
 373              		.file 6 "/usr/include/newlib/sys/lock.h"
 374              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 375              		.file 8 "/usr/include/newlib/sys/types.h"
 376              		.file 9 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l412xx.h"
 377              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 378              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 379              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_qspi.h"
 380              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 381              		.file 14 "app/core/actor/../../config/events_list/events_list.h"
 382              		.file 15 "app/core/actor/../../config/actors_list/actors_list.h"
 383              		.file 16 "app/core/actor/actor.h"
 384              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 385              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 386              		.file 19 "Core/Inc/quadspi.h"
 387              		.file 20 "app/drivers/w25q/w25q.h"
 388              		.file 21 "app/tasks/memory/memory.h"
 389              		.file 22 "/usr/include/newlib/stdio.h"
 390              		.file 23 "<built-in>"
ARM GAS  /tmp/ccQZStK8.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 memory.c
     /tmp/ccQZStK8.s:18     .text.handleMemoryFSM:0000000000000000 $t
     /tmp/ccQZStK8.s:25     .text.handleMemoryFSM:0000000000000000 handleMemoryFSM
     /tmp/ccQZStK8.s:44     .rodata.MEMORY_Task.str1.4:0000000000000000 $d
     /tmp/ccQZStK8.s:57     .text.MEMORY_Task:0000000000000000 $t
     /tmp/ccQZStK8.s:64     .text.MEMORY_Task:0000000000000000 MEMORY_Task
     /tmp/ccQZStK8.s:216    .text.MEMORY_Task:00000000000000b0 $d
     /tmp/ccQZStK8.s:230    .rodata.MEMORY_TaskInit.str1.4:0000000000000000 $d
     /tmp/ccQZStK8.s:234    .text.MEMORY_TaskInit:0000000000000000 $t
     /tmp/ccQZStK8.s:241    .text.MEMORY_TaskInit:0000000000000000 MEMORY_TaskInit
     /tmp/ccQZStK8.s:296    .text.MEMORY_TaskInit:0000000000000038 $d
     /tmp/ccQZStK8.s:341    .data.MEMORY_W25QHandle:0000000000000000 MEMORY_W25QHandle
     /tmp/ccQZStK8.s:358    .rodata.memoryTaskDescription:0000000000000000 memoryTaskDescription
     /tmp/ccQZStK8.s:306    .rodata.str1.4:0000000000000000 $d
     /tmp/ccQZStK8.s:322    .bss.memoryTaskControlBlock:0000000000000000 memoryTaskControlBlock
     /tmp/ccQZStK8.s:316    .bss.memoryTaskBuffer:0000000000000000 memoryTaskBuffer
     /tmp/ccQZStK8.s:329    .data.MEMORY_Actor:0000000000000000 MEMORY_Actor
     /tmp/ccQZStK8.s:313    .bss.memoryTaskBuffer:0000000000000000 $d
     /tmp/ccQZStK8.s:319    .bss.memoryTaskControlBlock:0000000000000000 $d
     /tmp/ccQZStK8.s:325    .data.MEMORY_Actor:0000000000000000 $d
     /tmp/ccQZStK8.s:337    .data.MEMORY_W25QHandle:0000000000000000 $d
     /tmp/ccQZStK8.s:354    .rodata.memoryTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
W25Q_Init
W25Q_EraseSector
W25Q_WriteData
W25Q_ReadData
W25Q_ReadStatusReg
fwrite
osMessageQueueGet
osMessageQueuePut
fprintf
_impure_ptr
ACTORS_LIST_SystemRegistry
osMessageQueueNew
osThreadNew
hqspi
