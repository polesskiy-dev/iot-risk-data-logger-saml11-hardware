ARM GAS  /tmp/ccClX78K.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"memory.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.handleMemoryFSM,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	handleMemoryFSM:
  26              	.LVL0:
  27              	.LFB142:
  28              		.file 1 "app/tasks/memory/memory.c"
   1:app/tasks/memory/memory.c **** /*!
   2:app/tasks/memory/memory.c ****  * @file memory.c
   3:app/tasks/memory/memory.c ****  * @brief implementation of memory
   4:app/tasks/memory/memory.c ****  *
   5:app/tasks/memory/memory.c ****  * Detailed description of the implementation file.
   6:app/tasks/memory/memory.c ****  *
   7:app/tasks/memory/memory.c ****  * @date 14/08/2024
   8:app/tasks/memory/memory.c ****  * @author artempolisskyi
   9:app/tasks/memory/memory.c ****  */
  10:app/tasks/memory/memory.c **** 
  11:app/tasks/memory/memory.c **** #include "memory.h"
  12:app/tasks/memory/memory.c **** #include "usbd_msc.h"
  13:app/tasks/memory/memory.c **** 
  14:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message);
  15:app/tasks/memory/memory.c **** 
  16:app/tasks/memory/memory.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  17:app/tasks/memory/memory.c **** 
  18:app/tasks/memory/memory.c **** extern USBD_StorageTypeDef USBD_Storage_Interface_fops_FS;
  19:app/tasks/memory/memory.c **** 
  20:app/tasks/memory/memory.c **** /**
  21:app/tasks/memory/memory.c ****  * @brief Memory actor struct representing NOR Flash storage
  22:app/tasks/memory/memory.c ****  * @extends actor_t
  23:app/tasks/memory/memory.c ****  */
  24:app/tasks/memory/memory.c **** MEMORY_Actor_t MEMORY_Actor = {
  25:app/tasks/memory/memory.c ****         .super = {
  26:app/tasks/memory/memory.c ****                 .actorId = MEMORY_ACTOR_ID,
  27:app/tasks/memory/memory.c ****                 .messageHandler = (messageHandler_t) handleMemoryFSM,
  28:app/tasks/memory/memory.c ****                 .osMessageQueueId = NULL,
  29:app/tasks/memory/memory.c ****                 .osThreadId = NULL,
  30:app/tasks/memory/memory.c ****         },
ARM GAS  /tmp/ccClX78K.s 			page 2


  31:app/tasks/memory/memory.c ****         .state = MEMORY_NO_STATE
  32:app/tasks/memory/memory.c **** };
  33:app/tasks/memory/memory.c **** 
  34:app/tasks/memory/memory.c **** // task description required for static task creation
  35:app/tasks/memory/memory.c **** uint32_t memoryTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  36:app/tasks/memory/memory.c **** StaticTask_t memoryTaskControlBlock;
  37:app/tasks/memory/memory.c **** const osThreadAttr_t memoryTaskDescription = {
  38:app/tasks/memory/memory.c ****         .name = "memoryTask",
  39:app/tasks/memory/memory.c ****         .cb_mem = &memoryTaskControlBlock,
  40:app/tasks/memory/memory.c ****         .cb_size = sizeof(memoryTaskControlBlock),
  41:app/tasks/memory/memory.c ****         .stack_mem = &memoryTaskBuffer[0],
  42:app/tasks/memory/memory.c ****         .stack_size = sizeof(memoryTaskBuffer),
  43:app/tasks/memory/memory.c ****         .priority = (osPriority_t) osPriorityNormal,
  44:app/tasks/memory/memory.c **** };
  45:app/tasks/memory/memory.c **** 
  46:app/tasks/memory/memory.c **** W25Q_HandleTypeDef MEMORY_W25QHandle = {
  47:app/tasks/memory/memory.c ****         .hqspi = &hqspi,
  48:app/tasks/memory/memory.c ****         .geometry = {
  49:app/tasks/memory/memory.c ****                 .flashSize      = W25Q64JV_FLASH_SIZE,
  50:app/tasks/memory/memory.c ****                 .sectorSize     = W25Q64JV_SECTOR_SIZE,
  51:app/tasks/memory/memory.c ****                 .subSectorSize  = W25Q64JV_SUBSECTOR_SIZE,
  52:app/tasks/memory/memory.c ****                 .pageSize       = W25Q64JV_PAGE_SIZE,
  53:app/tasks/memory/memory.c ****                 .blockSize32K   = W25Q64JV_BLOCK_SIZE_32K,
  54:app/tasks/memory/memory.c ****                 .blockSize64K   = W25Q64JV_BLOCK_SIZE_64K
  55:app/tasks/memory/memory.c ****         },
  56:app/tasks/memory/memory.c ****         .status.status1Reg      = 0x00,
  57:app/tasks/memory/memory.c ****         .busyWaitCycles         = FLASH_BUSY_WAIT_CYCLES
  58:app/tasks/memory/memory.c **** };
  59:app/tasks/memory/memory.c **** 
  60:app/tasks/memory/memory.c **** /**
  61:app/tasks/memory/memory.c ****  * @brief Initializes the Memory Sensor task.
  62:app/tasks/memory/memory.c ****  * @return {actor_t*} - pointer to the actor base struct
  63:app/tasks/memory/memory.c ****  */
  64:app/tasks/memory/memory.c **** actor_t* MEMORY_TaskInit(void) {
  65:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
  66:app/tasks/memory/memory.c ****           .name = "memoryQueue"
  67:app/tasks/memory/memory.c ****   });
  68:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
  69:app/tasks/memory/memory.c **** 
  70:app/tasks/memory/memory.c ****   return (actor_t*) &MEMORY_Actor;
  71:app/tasks/memory/memory.c **** }
  72:app/tasks/memory/memory.c **** 
  73:app/tasks/memory/memory.c **** /**
  74:app/tasks/memory/memory.c ****  * @brief Memory (NOR Flash) task
  75:app/tasks/memory/memory.c ****  * Waits for message from the queue and proceed it in FSM
  76:app/tasks/memory/memory.c ****  * Enters ERROR state if message handling failed
  77:app/tasks/memory/memory.c ****  */
  78:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  79:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  80:app/tasks/memory/memory.c ****   message_t msg;
  81:app/tasks/memory/memory.c **** 
  82:app/tasks/memory/memory.c ****   HAL_StatusTypeDef status = HAL_OK;
  83:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  84:app/tasks/memory/memory.c ****   char *dummyToWrite = "Hello, World!";
  85:app/tasks/memory/memory.c ****   uint8_t dummyToRead[32] = {0};
  86:app/tasks/memory/memory.c **** 
  87:app/tasks/memory/memory.c ****   W25Q_Init(&MEMORY_W25QHandle);
ARM GAS  /tmp/ccClX78K.s 			page 3


  88:app/tasks/memory/memory.c **** 
  89:app/tasks/memory/memory.c ****   status = W25Q_EraseSector(&MEMORY_W25QHandle, 0);
  90:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  91:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
  92:app/tasks/memory/memory.c ****   }
  93:app/tasks/memory/memory.c **** 
  94:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *)dummyToWrite, 0, 13);
  95:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
  96:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
  97:app/tasks/memory/memory.c ****   }
  98:app/tasks/memory/memory.c **** 
  99:app/tasks/memory/memory.c ****   status = W25Q_ReadData(&MEMORY_W25QHandle, dummyToRead, 0, 32);
 100:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 101:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 102:app/tasks/memory/memory.c ****   }
 103:app/tasks/memory/memory.c **** 
 104:app/tasks/memory/memory.c ****   status = W25Q_ReadStatusReg(&MEMORY_W25QHandle);
 105:app/tasks/memory/memory.c **** 
 106:app/tasks/memory/memory.c ****   // init usb msd TODO move to more suitable place
 107:app/tasks/memory/memory.c **** 
 108:app/tasks/memory/memory.c **** 
 109:app/tasks/memory/memory.c ****   #ifdef DEBUG
 110:app/tasks/memory/memory.c ****     fprintf(stdout, "Memory task initialized\n");
 111:app/tasks/memory/memory.c ****   #endif
 112:app/tasks/memory/memory.c **** 
 113:app/tasks/memory/memory.c ****   for (;;) {
 114:app/tasks/memory/memory.c ****     // Wait for messages from the queue
 115:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
 116:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 117:app/tasks/memory/memory.c **** 
 118:app/tasks/memory/memory.c ****       if (status != osOK) {
 119:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 120:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 121:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 122:app/tasks/memory/memory.c ****       }
 123:app/tasks/memory/memory.c ****     }
 124:app/tasks/memory/memory.c ****   }
 125:app/tasks/memory/memory.c **** }
 126:app/tasks/memory/memory.c **** 
 127:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message) {
  29              		.loc 1 127 77 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 128:app/tasks/memory/memory.c ****   return osOK;
  34              		.loc 1 128 3 view .LVU1
 129:app/tasks/memory/memory.c **** }
  35              		.loc 1 129 1 is_stmt 0 view .LVU2
  36 0000 0020     		movs	r0, #0
  37              	.LVL1:
  38              		.loc 1 129 1 view .LVU3
  39 0002 7047     		bx	lr
  40              		.cfi_endproc
  41              	.LFE142:
  43              		.section	.rodata.MEMORY_Task.str1.4,"aMS",%progbits,1
  44              		.align	2
ARM GAS  /tmp/ccClX78K.s 			page 4


  45              	.LC0:
  46 0000 6D656D6F 		.ascii	"memory error\000"
  46      72792065 
  46      72726F72 
  46      00
  47 000d 000000   		.align	2
  48              	.LC1:
  49 0010 48656C6C 		.ascii	"Hello, World!\000"
  49      6F2C2057 
  49      6F726C64 
  49      2100
  50 001e 0000     		.align	2
  51              	.LC2:
  52 0020 4D656D6F 		.ascii	"Memory task initialized\012\000"
  52      72792074 
  52      61736B20 
  52      696E6974 
  52      69616C69 
  53 0039 000000   		.align	2
  54              	.LC3:
  55 003c 4D454D4F 		.ascii	"MEMORY_STATE_ERROR\000"
  55      52595F53 
  55      54415445 
  55      5F455252 
  55      4F5200
  56 004f 00       		.align	2
  57              	.LC4:
  58 0050 256C753A 		.ascii	"%lu: %s\012\000"
  58      2025730A 
  58      00
  59              		.section	.text.MEMORY_Task,"ax",%progbits
  60              		.align	1
  61              		.global	MEMORY_Task
  62              		.syntax unified
  63              		.thumb
  64              		.thumb_func
  65              		.fpu fpv4-sp-d16
  67              	MEMORY_Task:
  68              	.LVL2:
  69              	.LFB141:
  78:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  70              		.loc 1 78 34 is_stmt 1 view -0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 64
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  78:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  74              		.loc 1 78 34 is_stmt 0 view .LVU5
  75 0000 30B5     		push	{r4, r5, lr}
  76              	.LCFI0:
  77              		.cfi_def_cfa_offset 12
  78              		.cfi_offset 4, -12
  79              		.cfi_offset 5, -8
  80              		.cfi_offset 14, -4
  81 0002 91B0     		sub	sp, sp, #68
  82              	.LCFI1:
  83              		.cfi_def_cfa_offset 80
  79:app/tasks/memory/memory.c ****   message_t msg;
ARM GAS  /tmp/ccClX78K.s 			page 5


  84              		.loc 1 79 3 is_stmt 1 view .LVU6
  80:app/tasks/memory/memory.c **** 
  85              		.loc 1 80 3 view .LVU7
  82:app/tasks/memory/memory.c ****   uint8_t id[W25Q_ID_SIZE] = {0x00, 0x00 };
  86              		.loc 1 82 3 view .LVU8
  87              	.LVL3:
  83:app/tasks/memory/memory.c ****   char *dummyToWrite = "Hello, World!";
  88              		.loc 1 83 3 view .LVU9
  83:app/tasks/memory/memory.c ****   char *dummyToWrite = "Hello, World!";
  89              		.loc 1 83 11 is_stmt 0 view .LVU10
  90 0004 0024     		movs	r4, #0
  91 0006 ADF82440 		strh	r4, [sp, #36]	@ movhi
  84:app/tasks/memory/memory.c ****   uint8_t dummyToRead[32] = {0};
  92              		.loc 1 84 3 is_stmt 1 view .LVU11
  93              	.LVL4:
  85:app/tasks/memory/memory.c **** 
  94              		.loc 1 85 3 view .LVU12
  85:app/tasks/memory/memory.c **** 
  95              		.loc 1 85 11 is_stmt 0 view .LVU13
  96 000a 0194     		str	r4, [sp, #4]
  97 000c 0294     		str	r4, [sp, #8]
  98 000e 0394     		str	r4, [sp, #12]
  99 0010 0494     		str	r4, [sp, #16]
 100 0012 0594     		str	r4, [sp, #20]
 101 0014 0694     		str	r4, [sp, #24]
 102 0016 0794     		str	r4, [sp, #28]
 103 0018 0894     		str	r4, [sp, #32]
  87:app/tasks/memory/memory.c **** 
 104              		.loc 1 87 3 is_stmt 1 view .LVU14
 105 001a 364D     		ldr	r5, .L13
 106 001c 2846     		mov	r0, r5
 107              	.LVL5:
  87:app/tasks/memory/memory.c **** 
 108              		.loc 1 87 3 is_stmt 0 view .LVU15
 109 001e FFF7FEFF 		bl	W25Q_Init
 110              	.LVL6:
  89:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 111              		.loc 1 89 3 is_stmt 1 view .LVU16
  89:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 112              		.loc 1 89 12 is_stmt 0 view .LVU17
 113 0022 2146     		mov	r1, r4
 114 0024 2846     		mov	r0, r5
 115 0026 FFF7FEFF 		bl	W25Q_EraseSector
 116              	.LVL7:
  90:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 117              		.loc 1 90 3 is_stmt 1 view .LVU18
  90:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 118              		.loc 1 90 6 is_stmt 0 view .LVU19
 119 002a 0028     		cmp	r0, #0
 120 002c 46D1     		bne	.L10
 121              	.LVL8:
 122              	.L3:
  94:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 123              		.loc 1 94 3 is_stmt 1 view .LVU20
  94:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 124              		.loc 1 94 12 is_stmt 0 view .LVU21
 125 002e 0D23     		movs	r3, #13
ARM GAS  /tmp/ccClX78K.s 			page 6


 126 0030 0022     		movs	r2, #0
 127 0032 3149     		ldr	r1, .L13+4
 128 0034 2F48     		ldr	r0, .L13
 129 0036 FFF7FEFF 		bl	W25Q_WriteData
 130              	.LVL9:
  95:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 131              		.loc 1 95 3 is_stmt 1 view .LVU22
  95:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 132              		.loc 1 95 6 is_stmt 0 view .LVU23
 133 003a 0028     		cmp	r0, #0
 134 003c 47D1     		bne	.L11
 135              	.LVL10:
 136              	.L4:
  99:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 137              		.loc 1 99 3 is_stmt 1 view .LVU24
  99:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 138              		.loc 1 99 12 is_stmt 0 view .LVU25
 139 003e 2023     		movs	r3, #32
 140 0040 0022     		movs	r2, #0
 141 0042 01A9     		add	r1, sp, #4
 142 0044 2B48     		ldr	r0, .L13
 143 0046 FFF7FEFF 		bl	W25Q_ReadData
 144              	.LVL11:
 100:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 145              		.loc 1 100 3 is_stmt 1 view .LVU26
 100:app/tasks/memory/memory.c ****     fprintf(stderr, "memory error");
 146              		.loc 1 100 6 is_stmt 0 view .LVU27
 147 004a 0028     		cmp	r0, #0
 148 004c 48D1     		bne	.L12
 149              	.LVL12:
 150              	.L5:
 104:app/tasks/memory/memory.c **** 
 151              		.loc 1 104 3 is_stmt 1 view .LVU28
 104:app/tasks/memory/memory.c **** 
 152              		.loc 1 104 12 is_stmt 0 view .LVU29
 153 004e 2948     		ldr	r0, .L13
 154 0050 FFF7FEFF 		bl	W25Q_ReadStatusReg
 155              	.LVL13:
 110:app/tasks/memory/memory.c ****   #endif
 156              		.loc 1 110 5 is_stmt 1 view .LVU30
 110:app/tasks/memory/memory.c ****   #endif
 157              		.loc 1 110 13 is_stmt 0 view .LVU31
 158 0054 294B     		ldr	r3, .L13+8
 159 0056 1B68     		ldr	r3, [r3]
 110:app/tasks/memory/memory.c ****   #endif
 160              		.loc 1 110 5 view .LVU32
 161 0058 9B68     		ldr	r3, [r3, #8]
 162 005a 1822     		movs	r2, #24
 163 005c 0121     		movs	r1, #1
 164 005e 2848     		ldr	r0, .L13+12
 165 0060 FFF7FEFF 		bl	fwrite
 166              	.LVL14:
 167              	.L6:
 113:app/tasks/memory/memory.c ****     // Wait for messages from the queue
 168              		.loc 1 113 3 is_stmt 1 view .LVU33
 115:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 169              		.loc 1 115 5 view .LVU34
ARM GAS  /tmp/ccClX78K.s 			page 7


 115:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 170              		.loc 1 115 9 is_stmt 0 view .LVU35
 171 0064 4FF0FF33 		mov	r3, #-1
 172 0068 0022     		movs	r2, #0
 173 006a 0AA9     		add	r1, sp, #40
 174 006c 2548     		ldr	r0, .L13+16
 175 006e 8068     		ldr	r0, [r0, #8]
 176 0070 FFF7FEFF 		bl	osMessageQueueGet
 177              	.LVL15:
 115:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 178              		.loc 1 115 8 view .LVU36
 179 0074 0028     		cmp	r0, #0
 180 0076 F5D1     		bne	.L6
 181              	.LBB2:
 116:app/tasks/memory/memory.c **** 
 182              		.loc 1 116 7 is_stmt 1 view .LVU37
 116:app/tasks/memory/memory.c **** 
 183              		.loc 1 116 45 is_stmt 0 view .LVU38
 184 0078 2248     		ldr	r0, .L13+16
 185 007a C368     		ldr	r3, [r0, #12]
 116:app/tasks/memory/memory.c **** 
 186              		.loc 1 116 27 view .LVU39
 187 007c 0AA9     		add	r1, sp, #40
 188 007e 9847     		blx	r3
 189              	.LVL16:
 118:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 190              		.loc 1 118 7 is_stmt 1 view .LVU40
 118:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 191              		.loc 1 118 10 is_stmt 0 view .LVU41
 192 0080 0028     		cmp	r0, #0
 193 0082 EFD0     		beq	.L6
 194              	.LBB3:
 119:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 195              		.loc 1 119 9 is_stmt 1 view .LVU42
 119:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 196              		.loc 1 119 71 is_stmt 0 view .LVU43
 197 0084 204B     		ldr	r3, .L13+20
 198 0086 5B68     		ldr	r3, [r3, #4]
 119:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 199              		.loc 1 119 28 view .LVU44
 200 0088 9868     		ldr	r0, [r3, #8]
 201              	.LVL17:
 120:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 202              		.loc 1 120 9 is_stmt 1 view .LVU45
 120:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 203              		.loc 1 120 55 is_stmt 0 view .LVU46
 204 008a 0022     		movs	r2, #0
 205 008c 0D92     		str	r2, [sp, #52]
 206 008e 0E92     		str	r2, [sp, #56]
 207 0090 0F92     		str	r2, [sp, #60]
 208 0092 0C23     		movs	r3, #12
 209 0094 8DF83430 		strb	r3, [sp, #52]
 210 0098 0823     		movs	r3, #8
 211 009a 0E93     		str	r3, [sp, #56]
 120:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 212              		.loc 1 120 9 view .LVU47
 213 009c 1346     		mov	r3, r2
ARM GAS  /tmp/ccClX78K.s 			page 8


 214 009e 0DA9     		add	r1, sp, #52
 215 00a0 FFF7FEFF 		bl	osMessageQueuePut
 216              	.LVL18:
 121:app/tasks/memory/memory.c ****       }
 217              		.loc 1 121 9 is_stmt 1 view .LVU48
 121:app/tasks/memory/memory.c ****       }
 218              		.loc 1 121 9 view .LVU49
 219 00a4 174A     		ldr	r2, .L13+16
 220 00a6 0123     		movs	r3, #1
 221 00a8 1374     		strb	r3, [r2, #16]
 121:app/tasks/memory/memory.c ****       }
 222              		.loc 1 121 9 view .LVU50
 223 00aa 144B     		ldr	r3, .L13+8
 224 00ac 1868     		ldr	r0, [r3]
 225 00ae 174B     		ldr	r3, .L13+24
 226 00b0 1268     		ldr	r2, [r2]
 227 00b2 1749     		ldr	r1, .L13+28
 228 00b4 8068     		ldr	r0, [r0, #8]
 229 00b6 FFF7FEFF 		bl	fprintf
 230              	.LVL19:
 121:app/tasks/memory/memory.c ****       }
 231              		.loc 1 121 9 view .LVU51
 121:app/tasks/memory/memory.c ****       }
 232              		.loc 1 121 52 view .LVU52
 233 00ba D3E7     		b	.L6
 234              	.LVL20:
 235              	.L10:
 121:app/tasks/memory/memory.c ****       }
 236              		.loc 1 121 52 is_stmt 0 view .LVU53
 237              	.LBE3:
 238              	.LBE2:
  91:app/tasks/memory/memory.c ****   }
 239              		.loc 1 91 5 is_stmt 1 view .LVU54
  91:app/tasks/memory/memory.c ****   }
 240              		.loc 1 91 13 is_stmt 0 view .LVU55
 241 00bc 0F4B     		ldr	r3, .L13+8
 242 00be 1B68     		ldr	r3, [r3]
  91:app/tasks/memory/memory.c ****   }
 243              		.loc 1 91 5 view .LVU56
 244 00c0 DB68     		ldr	r3, [r3, #12]
 245 00c2 0C22     		movs	r2, #12
 246 00c4 0121     		movs	r1, #1
 247 00c6 1348     		ldr	r0, .L13+32
 248              	.LVL21:
  91:app/tasks/memory/memory.c ****   }
 249              		.loc 1 91 5 view .LVU57
 250 00c8 FFF7FEFF 		bl	fwrite
 251              	.LVL22:
 252 00cc AFE7     		b	.L3
 253              	.LVL23:
 254              	.L11:
  96:app/tasks/memory/memory.c ****   }
 255              		.loc 1 96 5 is_stmt 1 view .LVU58
  96:app/tasks/memory/memory.c ****   }
 256              		.loc 1 96 13 is_stmt 0 view .LVU59
 257 00ce 0B4B     		ldr	r3, .L13+8
 258 00d0 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccClX78K.s 			page 9


  96:app/tasks/memory/memory.c ****   }
 259              		.loc 1 96 5 view .LVU60
 260 00d2 DB68     		ldr	r3, [r3, #12]
 261 00d4 0C22     		movs	r2, #12
 262 00d6 0121     		movs	r1, #1
 263 00d8 0E48     		ldr	r0, .L13+32
 264              	.LVL24:
  96:app/tasks/memory/memory.c ****   }
 265              		.loc 1 96 5 view .LVU61
 266 00da FFF7FEFF 		bl	fwrite
 267              	.LVL25:
 268 00de AEE7     		b	.L4
 269              	.LVL26:
 270              	.L12:
 101:app/tasks/memory/memory.c ****   }
 271              		.loc 1 101 5 is_stmt 1 view .LVU62
 101:app/tasks/memory/memory.c ****   }
 272              		.loc 1 101 13 is_stmt 0 view .LVU63
 273 00e0 064B     		ldr	r3, .L13+8
 274 00e2 1B68     		ldr	r3, [r3]
 101:app/tasks/memory/memory.c ****   }
 275              		.loc 1 101 5 view .LVU64
 276 00e4 DB68     		ldr	r3, [r3, #12]
 277 00e6 0C22     		movs	r2, #12
 278 00e8 0121     		movs	r1, #1
 279 00ea 0A48     		ldr	r0, .L13+32
 280              	.LVL27:
 101:app/tasks/memory/memory.c ****   }
 281              		.loc 1 101 5 view .LVU65
 282 00ec FFF7FEFF 		bl	fwrite
 283              	.LVL28:
 284 00f0 ADE7     		b	.L5
 285              	.L14:
 286 00f2 00BF     		.align	2
 287              	.L13:
 288 00f4 00000000 		.word	.LANCHOR0
 289 00f8 10000000 		.word	.LC1
 290 00fc 00000000 		.word	_impure_ptr
 291 0100 20000000 		.word	.LC2
 292 0104 00000000 		.word	.LANCHOR1
 293 0108 00000000 		.word	ACTORS_LIST_SystemRegistry
 294 010c 3C000000 		.word	.LC3
 295 0110 50000000 		.word	.LC4
 296 0114 00000000 		.word	.LC0
 297              		.cfi_endproc
 298              	.LFE141:
 300              		.section	.rodata.MEMORY_TaskInit.str1.4,"aMS",%progbits,1
 301              		.align	2
 302              	.LC5:
 303 0000 6D656D6F 		.ascii	"memoryQueue\000"
 303      72795175 
 303      65756500 
 304              		.section	.text.MEMORY_TaskInit,"ax",%progbits
 305              		.align	1
 306              		.global	MEMORY_TaskInit
 307              		.syntax unified
 308              		.thumb
ARM GAS  /tmp/ccClX78K.s 			page 10


 309              		.thumb_func
 310              		.fpu fpv4-sp-d16
 312              	MEMORY_TaskInit:
 313              	.LFB140:
  64:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 314              		.loc 1 64 32 is_stmt 1 view -0
 315              		.cfi_startproc
 316              		@ args = 0, pretend = 0, frame = 24
 317              		@ frame_needed = 0, uses_anonymous_args = 0
 318 0000 30B5     		push	{r4, r5, lr}
 319              	.LCFI2:
 320              		.cfi_def_cfa_offset 12
 321              		.cfi_offset 4, -12
 322              		.cfi_offset 5, -8
 323              		.cfi_offset 14, -4
 324 0002 87B0     		sub	sp, sp, #28
 325              	.LCFI3:
 326              		.cfi_def_cfa_offset 40
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 327              		.loc 1 65 3 view .LVU67
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 328              		.loc 1 65 130 is_stmt 0 view .LVU68
 329 0004 0024     		movs	r4, #0
 330 0006 0094     		str	r4, [sp]
 331 0008 0194     		str	r4, [sp, #4]
 332 000a 0294     		str	r4, [sp, #8]
 333 000c 0394     		str	r4, [sp, #12]
 334 000e 0494     		str	r4, [sp, #16]
 335 0010 0594     		str	r4, [sp, #20]
 336 0012 094B     		ldr	r3, .L17
 337 0014 0093     		str	r3, [sp]
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 338              		.loc 1 65 41 view .LVU69
 339 0016 6A46     		mov	r2, sp
 340 0018 0C21     		movs	r1, #12
 341 001a 0820     		movs	r0, #8
 342 001c FFF7FEFF 		bl	osMessageQueueNew
 343              	.LVL29:
  65:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 344              		.loc 1 65 39 view .LVU70
 345 0020 064D     		ldr	r5, .L17+4
 346 0022 A860     		str	r0, [r5, #8]
  68:app/tasks/memory/memory.c **** 
 347              		.loc 1 68 3 is_stmt 1 view .LVU71
  68:app/tasks/memory/memory.c **** 
 348              		.loc 1 68 35 is_stmt 0 view .LVU72
 349 0024 064A     		ldr	r2, .L17+8
 350 0026 2146     		mov	r1, r4
 351 0028 0648     		ldr	r0, .L17+12
 352 002a FFF7FEFF 		bl	osThreadNew
 353              	.LVL30:
  68:app/tasks/memory/memory.c **** 
 354              		.loc 1 68 33 view .LVU73
 355 002e 6860     		str	r0, [r5, #4]
  70:app/tasks/memory/memory.c **** }
 356              		.loc 1 70 3 is_stmt 1 view .LVU74
  71:app/tasks/memory/memory.c **** 
ARM GAS  /tmp/ccClX78K.s 			page 11


 357              		.loc 1 71 1 is_stmt 0 view .LVU75
 358 0030 2846     		mov	r0, r5
 359 0032 07B0     		add	sp, sp, #28
 360              	.LCFI4:
 361              		.cfi_def_cfa_offset 12
 362              		@ sp needed
 363 0034 30BD     		pop	{r4, r5, pc}
 364              	.L18:
 365 0036 00BF     		.align	2
 366              	.L17:
 367 0038 00000000 		.word	.LC5
 368 003c 00000000 		.word	.LANCHOR1
 369 0040 00000000 		.word	.LANCHOR2
 370 0044 00000000 		.word	MEMORY_Task
 371              		.cfi_endproc
 372              	.LFE140:
 374              		.section	.rodata.HAL_GPIO_EXTI_Callback.str1.4,"aMS",%progbits,1
 375              		.align	2
 376              	.LC6:
 377 0000 55534220 		.ascii	"USB connected\012\000"
 377      636F6E6E 
 377      65637465 
 377      640A00
 378 000f 00       		.align	2
 379              	.LC7:
 380 0010 55534220 		.ascii	"USB disconnected\012\000"
 380      64697363 
 380      6F6E6E65 
 380      63746564 
 380      0A00
 381 0022 0000     		.align	2
 382              	.LC8:
 383 0024 4E464320 		.ascii	"NFC GPO Interrupt\012\000"
 383      47504F20 
 383      496E7465 
 383      72727570 
 383      740A00
 384              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
 385              		.align	1
 386              		.global	HAL_GPIO_EXTI_Callback
 387              		.syntax unified
 388              		.thumb
 389              		.thumb_func
 390              		.fpu fpv4-sp-d16
 392              	HAL_GPIO_EXTI_Callback:
 393              	.LVL31:
 394              	.LFB143:
 130:app/tasks/memory/memory.c **** 
 131:app/tasks/memory/memory.c **** // TODO move to more suitable place
 132:app/tasks/memory/memory.c **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin) {
 395              		.loc 1 132 48 is_stmt 1 view -0
 396              		.cfi_startproc
 397              		@ args = 0, pretend = 0, frame = 40
 398              		@ frame_needed = 0, uses_anonymous_args = 0
 399              		.loc 1 132 48 is_stmt 0 view .LVU77
 400 0000 30B5     		push	{r4, r5, lr}
 401              	.LCFI5:
ARM GAS  /tmp/ccClX78K.s 			page 12


 402              		.cfi_def_cfa_offset 12
 403              		.cfi_offset 4, -12
 404              		.cfi_offset 5, -8
 405              		.cfi_offset 14, -4
 406 0002 8BB0     		sub	sp, sp, #44
 407              	.LCFI6:
 408              		.cfi_def_cfa_offset 56
 409 0004 0446     		mov	r4, r0
 133:app/tasks/memory/memory.c ****   if (GPIO_Pin == USB_VBUS_SENSE_Pin) {
 410              		.loc 1 133 3 is_stmt 1 view .LVU78
 411              		.loc 1 133 6 is_stmt 0 view .LVU79
 412 0006 B0F5807F 		cmp	r0, #256
 413 000a 03D0     		beq	.L24
 414              	.LVL32:
 415              	.L20:
 134:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 135:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 136:app/tasks/memory/memory.c **** 
 137:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 138:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 139:app/tasks/memory/memory.c ****       #if DEBUG
 140:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 141:app/tasks/memory/memory.c ****       #endif
 142:app/tasks/memory/memory.c ****     } else {
 143:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 144:app/tasks/memory/memory.c ****       #if DEBUG
 145:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 146:app/tasks/memory/memory.c ****       #endif
 147:app/tasks/memory/memory.c ****     }
 148:app/tasks/memory/memory.c ****   }
 149:app/tasks/memory/memory.c **** 
 150:app/tasks/memory/memory.c ****   if (GPIO_Pin == _NFC_INT_Pin) {
 416              		.loc 1 150 3 is_stmt 1 view .LVU80
 417              		.loc 1 150 6 is_stmt 0 view .LVU81
 418 000c 012C     		cmp	r4, #1
 419 000e 36D0     		beq	.L25
 420              	.L19:
 151:app/tasks/memory/memory.c ****     #ifdef DEBUG
 152:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 153:app/tasks/memory/memory.c ****     #endif
 154:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 155:app/tasks/memory/memory.c ****   }
 156:app/tasks/memory/memory.c **** }...
 421              		.loc 1 156 1 view .LVU82
 422 0010 0BB0     		add	sp, sp, #44
 423              	.LCFI7:
 424              		.cfi_remember_state
 425              		.cfi_def_cfa_offset 12
 426              		@ sp needed
 427 0012 30BD     		pop	{r4, r5, pc}
 428              	.LVL33:
 429              	.L24:
 430              	.LCFI8:
 431              		.cfi_restore_state
 432              	.LBB4:
 134:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 433              		.loc 1 134 5 is_stmt 1 view .LVU83
ARM GAS  /tmp/ccClX78K.s 			page 13


 134:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 434              		.loc 1 134 32 is_stmt 0 view .LVU84
 435 0014 4FF48071 		mov	r1, #256
 436 0018 4FF09040 		mov	r0, #1207959552
 437              	.LVL34:
 134:app/tasks/memory/memory.c ****     GPIO_PinState usbVBusPin = HAL_GPIO_ReadPin(USB_VBUS_SENSE_GPIO_Port, USB_VBUS_SENSE_Pin);
 438              		.loc 1 134 32 view .LVU85
 439 001c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 440              	.LVL35:
 135:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 441              		.loc 1 135 5 is_stmt 1 view .LVU86
 135:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 442              		.loc 1 135 67 is_stmt 0 view .LVU87
 443 0020 224B     		ldr	r3, .L27
 444 0022 5B68     		ldr	r3, [r3, #4]
 135:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 445              		.loc 1 135 24 view .LVU88
 446 0024 9D68     		ldr	r5, [r3, #8]
 447              	.LVL36:
 137:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 448              		.loc 1 137 5 is_stmt 1 view .LVU89
 137:app/tasks/memory/memory.c ****     if (usbVBusPin == GPIO_PIN_SET) {
 449              		.loc 1 137 8 is_stmt 0 view .LVU90
 450 0026 0128     		cmp	r0, #1
 451 0028 14D0     		beq	.L26
 452              	.LBB5:
 143:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 453              		.loc 1 143 7 is_stmt 1 view .LVU91
 143:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 454              		.loc 1 143 54 is_stmt 0 view .LVU92
 455 002a 0022     		movs	r2, #0
 456 002c 0492     		str	r2, [sp, #16]
 457 002e 0592     		str	r2, [sp, #20]
 458 0030 0692     		str	r2, [sp, #24]
 459 0032 1C23     		movs	r3, #28
 460 0034 8DF81030 		strb	r3, [sp, #16]
 143:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 461              		.loc 1 143 7 view .LVU93
 462 0038 1346     		mov	r3, r2
 463 003a 04A9     		add	r1, sp, #16
 464 003c 2846     		mov	r0, r5
 465              	.LVL37:
 143:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_DISCONNECTED}, 0, 0);
 466              		.loc 1 143 7 view .LVU94
 467 003e FFF7FEFF 		bl	osMessageQueuePut
 468              	.LVL38:
 145:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 469              		.loc 1 145 13 is_stmt 1 view .LVU95
 145:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 470              		.loc 1 145 21 is_stmt 0 view .LVU96
 471 0042 1B4B     		ldr	r3, .L27+4
 472 0044 1B68     		ldr	r3, [r3]
 145:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 473              		.loc 1 145 13 view .LVU97
 474 0046 9B68     		ldr	r3, [r3, #8]
 475 0048 1122     		movs	r2, #17
 476 004a 0121     		movs	r1, #1
ARM GAS  /tmp/ccClX78K.s 			page 14


 477 004c 1948     		ldr	r0, .L27+8
 478 004e FFF7FEFF 		bl	fwrite
 479              	.LVL39:
 480 0052 DBE7     		b	.L20
 481              	.LVL40:
 482              	.L26:
 145:app/tasks/memory/memory.c ****             fprintf(stdout, "USB disconnected\n");
 483              		.loc 1 145 13 view .LVU98
 484              	.LBE5:
 485              	.LBB6:
 138:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 486              		.loc 1 138 7 is_stmt 1 view .LVU99
 138:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 487              		.loc 1 138 54 is_stmt 0 view .LVU100
 488 0054 0022     		movs	r2, #0
 489 0056 0192     		str	r2, [sp, #4]
 490 0058 0292     		str	r2, [sp, #8]
 491 005a 0392     		str	r2, [sp, #12]
 492 005c 1B23     		movs	r3, #27
 493 005e 8DF80430 		strb	r3, [sp, #4]
 138:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 494              		.loc 1 138 7 view .LVU101
 495 0062 1346     		mov	r3, r2
 496 0064 01A9     		add	r1, sp, #4
 497 0066 2846     		mov	r0, r5
 498              	.LVL41:
 138:app/tasks/memory/memory.c ****       osMessageQueuePut(evManagerQueue, &(message_t) {USB_CONNECTED}, 0, 0);
 499              		.loc 1 138 7 view .LVU102
 500 0068 FFF7FEFF 		bl	osMessageQueuePut
 501              	.LVL42:
 140:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 502              		.loc 1 140 13 is_stmt 1 view .LVU103
 140:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 503              		.loc 1 140 21 is_stmt 0 view .LVU104
 504 006c 104B     		ldr	r3, .L27+4
 505 006e 1B68     		ldr	r3, [r3]
 140:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 506              		.loc 1 140 13 view .LVU105
 507 0070 9B68     		ldr	r3, [r3, #8]
 508 0072 0E22     		movs	r2, #14
 509 0074 0121     		movs	r1, #1
 510 0076 1048     		ldr	r0, .L27+12
 511 0078 FFF7FEFF 		bl	fwrite
 512              	.LVL43:
 513              	.LBE6:
 514 007c C6E7     		b	.L20
 515              	.LVL44:
 516              	.L25:
 140:app/tasks/memory/memory.c ****             fprintf(stdout, "USB connected\n");
 517              		.loc 1 140 13 view .LVU106
 518              	.LBE4:
 519              	.LBB7:
 152:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 520              		.loc 1 152 9 is_stmt 1 view .LVU107
 152:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 521              		.loc 1 152 17 is_stmt 0 view .LVU108
 522 007e 0C4B     		ldr	r3, .L27+4
ARM GAS  /tmp/ccClX78K.s 			page 15


 523 0080 1B68     		ldr	r3, [r3]
 152:app/tasks/memory/memory.c ****         fprintf(stdout, "NFC GPO Interrupt\n");
 524              		.loc 1 152 9 view .LVU109
 525 0082 9B68     		ldr	r3, [r3, #8]
 526 0084 1222     		movs	r2, #18
 527 0086 0121     		movs	r1, #1
 528 0088 0C48     		ldr	r0, .L27+16
 529 008a FFF7FEFF 		bl	fwrite
 530              	.LVL45:
 154:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 531              		.loc 1 154 5 is_stmt 1 view .LVU110
 154:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 532              		.loc 1 154 69 is_stmt 0 view .LVU111
 533 008e 0022     		movs	r2, #0
 534 0090 0792     		str	r2, [sp, #28]
 535 0092 0892     		str	r2, [sp, #32]
 536 0094 0992     		str	r2, [sp, #36]
 537 0096 0F23     		movs	r3, #15
 538 0098 8DF81C30 		strb	r3, [sp, #28]
 154:app/tasks/memory/memory.c ****     osMessageQueuePut(NFC_Actor.super.osMessageQueueId, &(message_t){NFC_GPO_INTERRUPT}, 0, 0);
 539              		.loc 1 154 5 view .LVU112
 540 009c 1346     		mov	r3, r2
 541 009e 07A9     		add	r1, sp, #28
 542 00a0 0748     		ldr	r0, .L27+20
 543 00a2 8068     		ldr	r0, [r0, #8]
 544 00a4 FFF7FEFF 		bl	osMessageQueuePut
 545              	.LVL46:
 546              	.LBE7:
 547              		.loc 1 156 1 view .LVU113
 548 00a8 B2E7     		b	.L19
 549              	.L28:
 550 00aa 00BF     		.align	2
 551              	.L27:
 552 00ac 00000000 		.word	ACTORS_LIST_SystemRegistry
 553 00b0 00000000 		.word	_impure_ptr
 554 00b4 10000000 		.word	.LC7
 555 00b8 00000000 		.word	.LC6
 556 00bc 24000000 		.word	.LC8
 557 00c0 00000000 		.word	NFC_Actor
 558              		.cfi_endproc
 559              	.LFE143:
 561              		.global	MEMORY_W25QHandle
 562              		.global	memoryTaskDescription
 563              		.section	.rodata.str1.4,"aMS",%progbits,1
 564              		.align	2
 565              	.LC9:
 566 0000 6D656D6F 		.ascii	"memoryTask\000"
 566      72795461 
 566      736B00
 567              		.global	memoryTaskControlBlock
 568              		.global	memoryTaskBuffer
 569              		.global	MEMORY_Actor
 570              		.section	.bss.memoryTaskBuffer,"aw",%nobits
 571              		.align	2
 574              	memoryTaskBuffer:
 575 0000 00000000 		.space	512
 575      00000000 
ARM GAS  /tmp/ccClX78K.s 			page 16


 575      00000000 
 575      00000000 
 575      00000000 
 576              		.section	.bss.memoryTaskControlBlock,"aw",%nobits
 577              		.align	2
 580              	memoryTaskControlBlock:
 581 0000 00000000 		.space	92
 581      00000000 
 581      00000000 
 581      00000000 
 581      00000000 
 582              		.section	.data.MEMORY_Actor,"aw"
 583              		.align	2
 584              		.set	.LANCHOR1,. + 0
 587              	MEMORY_Actor:
 588 0000 08000000 		.word	8
 589 0004 00000000 		.word	0
 590 0008 00000000 		.word	0
 591 000c 00000000 		.word	handleMemoryFSM
 592 0010 00       		.byte	0
 593 0011 000000   		.space	3
 594              		.section	.data.MEMORY_W25QHandle,"aw"
 595              		.align	2
 596              		.set	.LANCHOR0,. + 0
 599              	MEMORY_W25QHandle:
 600 0000 00000000 		.word	hqspi
 601 0004 00000000 		.space	8
 601      00000000 
 602 000c 00008000 		.word	8388608
 603 0010 00100000 		.word	4096
 604 0014 00010000 		.word	256
 605 0018 00010000 		.word	256
 606 001c 00800000 		.word	32768
 607 0020 00000100 		.word	65536
 608 0024 00       		.byte	0
 609 0025 05       		.byte	5
 610 0026 0000     		.space	2
 611              		.section	.rodata.memoryTaskDescription,"a"
 612              		.align	2
 613              		.set	.LANCHOR2,. + 0
 616              	memoryTaskDescription:
 617 0000 00000000 		.word	.LC9
 618 0004 00000000 		.space	4
 619 0008 00000000 		.word	memoryTaskControlBlock
 620 000c 5C000000 		.word	92
 621 0010 00000000 		.word	memoryTaskBuffer
 622 0014 00020000 		.word	512
 623 0018 18000000 		.word	24
 624 001c 00000000 		.space	8
 624      00000000 
 625              		.text
 626              	.Letext0:
 627              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 628              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 629              		.file 4 "/usr/include/newlib/sys/_types.h"
 630              		.file 5 "/usr/include/newlib/sys/reent.h"
 631              		.file 6 "/usr/include/newlib/sys/lock.h"
ARM GAS  /tmp/ccClX78K.s 			page 17


 632              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 633              		.file 8 "/usr/include/newlib/sys/types.h"
 634              		.file 9 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l412xx.h"
 635              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 636              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 637              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 638              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_qspi.h"
 639              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 640              		.file 15 "app/core/actor/../../config/events_list/events_list.h"
 641              		.file 16 "app/core/actor/../../config/actors_list/actors_list.h"
 642              		.file 17 "app/core/actor/actor.h"
 643              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 644              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 645              		.file 20 "Drivers/BSP/Components/ST25DV/st25dv_reg.h"
 646              		.file 21 "Drivers/BSP/Components/ST25DV/st25dv.h"
 647              		.file 22 "app/tasks/nfc/nfc.h"
 648              		.file 23 "Core/Inc/quadspi.h"
 649              		.file 24 "app/drivers/w25q/w25q.h"
 650              		.file 25 "app/tasks/memory/memory.h"
 651              		.file 26 "/usr/include/newlib/stdio.h"
 652              		.file 27 "<built-in>"
ARM GAS  /tmp/ccClX78K.s 			page 18


DEFINED SYMBOLS
                            *ABS*:0000000000000000 memory.c
     /tmp/ccClX78K.s:18     .text.handleMemoryFSM:0000000000000000 $t
     /tmp/ccClX78K.s:25     .text.handleMemoryFSM:0000000000000000 handleMemoryFSM
     /tmp/ccClX78K.s:44     .rodata.MEMORY_Task.str1.4:0000000000000000 $d
     /tmp/ccClX78K.s:60     .text.MEMORY_Task:0000000000000000 $t
     /tmp/ccClX78K.s:67     .text.MEMORY_Task:0000000000000000 MEMORY_Task
     /tmp/ccClX78K.s:288    .text.MEMORY_Task:00000000000000f4 $d
     /tmp/ccClX78K.s:301    .rodata.MEMORY_TaskInit.str1.4:0000000000000000 $d
     /tmp/ccClX78K.s:305    .text.MEMORY_TaskInit:0000000000000000 $t
     /tmp/ccClX78K.s:312    .text.MEMORY_TaskInit:0000000000000000 MEMORY_TaskInit
     /tmp/ccClX78K.s:367    .text.MEMORY_TaskInit:0000000000000038 $d
     /tmp/ccClX78K.s:375    .rodata.HAL_GPIO_EXTI_Callback.str1.4:0000000000000000 $d
     /tmp/ccClX78K.s:385    .text.HAL_GPIO_EXTI_Callback:0000000000000000 $t
     /tmp/ccClX78K.s:392    .text.HAL_GPIO_EXTI_Callback:0000000000000000 HAL_GPIO_EXTI_Callback
     /tmp/ccClX78K.s:552    .text.HAL_GPIO_EXTI_Callback:00000000000000ac $d
     /tmp/ccClX78K.s:599    .data.MEMORY_W25QHandle:0000000000000000 MEMORY_W25QHandle
     /tmp/ccClX78K.s:616    .rodata.memoryTaskDescription:0000000000000000 memoryTaskDescription
     /tmp/ccClX78K.s:564    .rodata.str1.4:0000000000000000 $d
     /tmp/ccClX78K.s:580    .bss.memoryTaskControlBlock:0000000000000000 memoryTaskControlBlock
     /tmp/ccClX78K.s:574    .bss.memoryTaskBuffer:0000000000000000 memoryTaskBuffer
     /tmp/ccClX78K.s:587    .data.MEMORY_Actor:0000000000000000 MEMORY_Actor
     /tmp/ccClX78K.s:571    .bss.memoryTaskBuffer:0000000000000000 $d
     /tmp/ccClX78K.s:577    .bss.memoryTaskControlBlock:0000000000000000 $d
     /tmp/ccClX78K.s:583    .data.MEMORY_Actor:0000000000000000 $d
     /tmp/ccClX78K.s:595    .data.MEMORY_W25QHandle:0000000000000000 $d
     /tmp/ccClX78K.s:612    .rodata.memoryTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
W25Q_Init
W25Q_EraseSector
W25Q_WriteData
W25Q_ReadData
W25Q_ReadStatusReg
fwrite
osMessageQueueGet
osMessageQueuePut
fprintf
_impure_ptr
ACTORS_LIST_SystemRegistry
osMessageQueueNew
osThreadNew
HAL_GPIO_ReadPin
NFC_Actor
hqspi
