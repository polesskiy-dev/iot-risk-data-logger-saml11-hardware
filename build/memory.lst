ARM GAS  /tmp/ccVXdcqd.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"memory.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.handleWrite.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 4D454D4F 		.ascii	"MEMORY_SLEEP_STATE\000"
  20      52595F53 
  20      4C454550 
  20      5F535441 
  20      544500
  21 0013 00       		.align	2
  22              	.LC1:
  23 0014 256C753A 		.ascii	"%lu: %s\012\000"
  23      2025730A 
  23      00
  24 001d 000000   		.align	2
  25              	.LC2:
  26 0020 4D454D4F 		.ascii	"MEMORY_WRITE_STATE\000"
  26      52595F57 
  26      52495445 
  26      5F535441 
  26      544500
  27              		.section	.text.handleWrite,"ax",%progbits
  28              		.align	1
  29              		.arch armv7e-m
  30              		.syntax unified
  31              		.thumb
  32              		.thumb_func
  33              		.fpu fpv4-sp-d16
  35              	handleWrite:
  36              	.LVL0:
  37              	.LFB147:
  38              		.file 1 "app/tasks/memory/memory.c"
   1:app/tasks/memory/memory.c **** /*!
   2:app/tasks/memory/memory.c ****  * @file memory.c
   3:app/tasks/memory/memory.c ****  * @brief implementation of memory
   4:app/tasks/memory/memory.c ****  *
   5:app/tasks/memory/memory.c ****  * Detailed description of the implementation file.
   6:app/tasks/memory/memory.c ****  *
   7:app/tasks/memory/memory.c ****  * @date 14/08/2024
   8:app/tasks/memory/memory.c ****  * @author artempolisskyi
   9:app/tasks/memory/memory.c ****  */
  10:app/tasks/memory/memory.c **** 
ARM GAS  /tmp/ccVXdcqd.s 			page 2


  11:app/tasks/memory/memory.c **** #include "memory.h"
  12:app/tasks/memory/memory.c **** #include "usbd_msc.h"
  13:app/tasks/memory/memory.c **** 
  14:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message);
  15:app/tasks/memory/memory.c **** static osStatus_t handleInit(MEMORY_Actor_t *this, message_t *message);
  16:app/tasks/memory/memory.c **** static osStatus_t handleSleep(MEMORY_Actor_t *this, message_t *message);
  17:app/tasks/memory/memory.c **** static osStatus_t handleWrite(MEMORY_Actor_t *this, message_t *message);
  18:app/tasks/memory/memory.c **** static osStatus_t writeFAT12BootSector(MEMORY_Actor_t *this);
  19:app/tasks/memory/memory.c **** static void publishMemoryWriteOnMeasurementsReady(MEMORY_Actor_t *this);
  20:app/tasks/memory/memory.c **** static osStatus_t appendMeasurementsToNORFlashLogTail(MEMORY_Actor_t *this);
  21:app/tasks/memory/memory.c **** 
  22:app/tasks/memory/memory.c **** extern actor_t* ACTORS_LIST_SystemRegistry[MAX_ACTORS];
  23:app/tasks/memory/memory.c **** extern uint8_t FAT12_BootSector[FAT12_BOOT_SECTOR_SIZE];
  24:app/tasks/memory/memory.c **** 
  25:app/tasks/memory/memory.c **** extern USBD_StorageTypeDef USBD_Storage_Interface_fops_FS;
  26:app/tasks/memory/memory.c **** 
  27:app/tasks/memory/memory.c **** osEventFlagsId_t measurementsReadyEventFlags;
  28:app/tasks/memory/memory.c **** 
  29:app/tasks/memory/memory.c **** /**
  30:app/tasks/memory/memory.c ****  * @brief Memory actor struct representing NOR Flash storage
  31:app/tasks/memory/memory.c ****  * @extends actor_t
  32:app/tasks/memory/memory.c ****  */
  33:app/tasks/memory/memory.c **** MEMORY_Actor_t MEMORY_Actor = {
  34:app/tasks/memory/memory.c ****         .super = {
  35:app/tasks/memory/memory.c ****                 .actorId = MEMORY_ACTOR_ID,
  36:app/tasks/memory/memory.c ****                 .messageHandler = (messageHandler_t) handleMemoryFSM,
  37:app/tasks/memory/memory.c ****                 .osMessageQueueId = NULL,
  38:app/tasks/memory/memory.c ****                 .osThreadId = NULL,
  39:app/tasks/memory/memory.c ****         },
  40:app/tasks/memory/memory.c ****         .logFileTailAddress = FAT12_BOOT_SECTOR_SIZE + 1,
  41:app/tasks/memory/memory.c ****         .state = MEMORY_NO_STATE
  42:app/tasks/memory/memory.c **** };
  43:app/tasks/memory/memory.c **** 
  44:app/tasks/memory/memory.c **** // task description required for static task creation
  45:app/tasks/memory/memory.c **** uint32_t memoryTaskBuffer[DEFAULT_TASK_STACK_SIZE_WORDS];
  46:app/tasks/memory/memory.c **** StaticTask_t memoryTaskControlBlock;
  47:app/tasks/memory/memory.c **** const osThreadAttr_t memoryTaskDescription = {
  48:app/tasks/memory/memory.c ****         .name = "memoryTask",
  49:app/tasks/memory/memory.c ****         .cb_mem = &memoryTaskControlBlock,
  50:app/tasks/memory/memory.c ****         .cb_size = sizeof(memoryTaskControlBlock),
  51:app/tasks/memory/memory.c ****         .stack_mem = &memoryTaskBuffer[0],
  52:app/tasks/memory/memory.c ****         .stack_size = sizeof(memoryTaskBuffer),
  53:app/tasks/memory/memory.c ****         .priority = (osPriority_t) osPriorityNormal,
  54:app/tasks/memory/memory.c **** };
  55:app/tasks/memory/memory.c **** 
  56:app/tasks/memory/memory.c **** W25Q_HandleTypeDef MEMORY_W25QHandle = {
  57:app/tasks/memory/memory.c ****         .hqspi = &hqspi,
  58:app/tasks/memory/memory.c ****         .geometry = {
  59:app/tasks/memory/memory.c ****                 .flashSize      = W25Q64JV_FLASH_SIZE,
  60:app/tasks/memory/memory.c ****                 .sectorSize     = W25Q64JV_SECTOR_SIZE,
  61:app/tasks/memory/memory.c ****                 .subSectorSize  = W25Q64JV_SUBSECTOR_SIZE,
  62:app/tasks/memory/memory.c ****                 .pageSize       = W25Q64JV_PAGE_SIZE,
  63:app/tasks/memory/memory.c ****                 .blockSize32K   = W25Q64JV_BLOCK_SIZE_32K,
  64:app/tasks/memory/memory.c ****                 .blockSize64K   = W25Q64JV_BLOCK_SIZE_64K
  65:app/tasks/memory/memory.c ****         },
  66:app/tasks/memory/memory.c ****         .status.status1Reg      = 0x00,
  67:app/tasks/memory/memory.c ****         .busyWaitCycles         = FLASH_BUSY_WAIT_CYCLES
ARM GAS  /tmp/ccVXdcqd.s 			page 3


  68:app/tasks/memory/memory.c **** };
  69:app/tasks/memory/memory.c **** 
  70:app/tasks/memory/memory.c **** /**
  71:app/tasks/memory/memory.c ****  * @brief Initializes the Memory Sensor task.
  72:app/tasks/memory/memory.c ****  * @return {actor_t*} - pointer to the actor base struct
  73:app/tasks/memory/memory.c ****  */
  74:app/tasks/memory/memory.c **** actor_t* MEMORY_TaskInit(void) {
  75:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
  76:app/tasks/memory/memory.c ****           .name = "memoryQueue"
  77:app/tasks/memory/memory.c ****   });
  78:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osThreadId = osThreadNew(MEMORY_Task, NULL, &memoryTaskDescription);
  79:app/tasks/memory/memory.c **** 
  80:app/tasks/memory/memory.c ****   measurementsReadyEventFlags = osEventFlagsNew(NULL);
  81:app/tasks/memory/memory.c **** 
  82:app/tasks/memory/memory.c ****   return (actor_t*) &MEMORY_Actor;
  83:app/tasks/memory/memory.c **** }
  84:app/tasks/memory/memory.c **** 
  85:app/tasks/memory/memory.c **** /**
  86:app/tasks/memory/memory.c ****  * @brief Memory (NOR Flash) task
  87:app/tasks/memory/memory.c ****  * Waits for message from the queue and proceed it in FSM
  88:app/tasks/memory/memory.c ****  * Enters ERROR state if message handling failed
  89:app/tasks/memory/memory.c ****  */
  90:app/tasks/memory/memory.c **** void MEMORY_Task(void *argument) {
  91:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
  92:app/tasks/memory/memory.c ****   message_t msg;
  93:app/tasks/memory/memory.c **** 
  94:app/tasks/memory/memory.c ****   for (;;) {
  95:app/tasks/memory/memory.c ****     // Wait for messages from the queue
  96:app/tasks/memory/memory.c ****     if (osMessageQueueGet(MEMORY_Actor.super.osMessageQueueId, &msg, NULL, osWaitForever) == osOK) 
  97:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
  98:app/tasks/memory/memory.c **** 
  99:app/tasks/memory/memory.c ****       if (status != osOK) {
 100:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 101:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 102:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 103:app/tasks/memory/memory.c ****       }
 104:app/tasks/memory/memory.c ****     }
 105:app/tasks/memory/memory.c ****   }
 106:app/tasks/memory/memory.c **** }
 107:app/tasks/memory/memory.c **** 
 108:app/tasks/memory/memory.c **** static osStatus_t handleMemoryFSM(MEMORY_Actor_t *this, message_t *message) {
 109:app/tasks/memory/memory.c ****   switch (this->state) {
 110:app/tasks/memory/memory.c ****     case MEMORY_NO_STATE:
 111:app/tasks/memory/memory.c ****       return handleInit(this, message);
 112:app/tasks/memory/memory.c ****     case MEMORY_SLEEP_STATE:
 113:app/tasks/memory/memory.c ****       return handleSleep(this, message);
 114:app/tasks/memory/memory.c ****     case MEMORY_WRITE_STATE:
 115:app/tasks/memory/memory.c ****       return handleWrite(this, message);
 116:app/tasks/memory/memory.c ****     default:
 117:app/tasks/memory/memory.c ****       return osOK;
 118:app/tasks/memory/memory.c ****   }
 119:app/tasks/memory/memory.c **** 
 120:app/tasks/memory/memory.c ****   return osOK;
 121:app/tasks/memory/memory.c **** }
 122:app/tasks/memory/memory.c **** 
 123:app/tasks/memory/memory.c **** uint32_t MEMORY_SeekFreeSpaceAddress(void) {
 124:app/tasks/memory/memory.c ****   uint8_t readBuff[MEMORY_LOG_ENTRY_SIZE] = {0};
ARM GAS  /tmp/ccVXdcqd.s 			page 4


 125:app/tasks/memory/memory.c ****   uint8_t emptyLogEntryTemplate[MEMORY_LOG_ENTRY_SIZE] = {0xFF};
 126:app/tasks/memory/memory.c ****   const uint32_t startAddress = FAT12_BOOT_SECTOR_SIZE + 1;
 127:app/tasks/memory/memory.c ****   const uint8_t stepSize = MEMORY_LOG_ENTRY_SIZE;
 128:app/tasks/memory/memory.c **** 
 129:app/tasks/memory/memory.c ****   uint32_t offset = 0;
 130:app/tasks/memory/memory.c ****   uint32_t stepNumber = 0;
 131:app/tasks/memory/memory.c ****   uint32_t addr = 0;
 132:app/tasks/memory/memory.c ****   bool isFreeSpaceForLog = false; // does read log entry contains data other than 0xFF (0xFF means 
 133:app/tasks/memory/memory.c **** 
 134:app/tasks/memory/memory.c ****   // create an empty log entry template to compare with
 135:app/tasks/memory/memory.c ****   memset(emptyLogEntryTemplate, 0xFF, MEMORY_LOG_ENTRY_SIZE);
 136:app/tasks/memory/memory.c **** 
 137:app/tasks/memory/memory.c ****   do {
 138:app/tasks/memory/memory.c ****     // address offset from FS boot sector
 139:app/tasks/memory/memory.c ****     offset = stepNumber * stepSize;
 140:app/tasks/memory/memory.c ****     addr = startAddress + offset;
 141:app/tasks/memory/memory.c **** 
 142:app/tasks/memory/memory.c ****     // read data chunk equal to log entry
 143:app/tasks/memory/memory.c ****     W25Q_ReadData(&MEMORY_W25QHandle, readBuff, addr, stepSize); // @warning: io status check is om
 144:app/tasks/memory/memory.c **** 
 145:app/tasks/memory/memory.c ****     // check if space for log entry don't contain any data
 146:app/tasks/memory/memory.c ****     isFreeSpaceForLog = MEMORY_CHUNKS_ARE_EQUAL == memcmp(readBuff, emptyLogEntryTemplate, MEMORY_L
 147:app/tasks/memory/memory.c **** 
 148:app/tasks/memory/memory.c ****     if (isFreeSpaceForLog) {
 149:app/tasks/memory/memory.c ****       return addr;
 150:app/tasks/memory/memory.c ****     }
 151:app/tasks/memory/memory.c **** 
 152:app/tasks/memory/memory.c ****     stepNumber++;
 153:app/tasks/memory/memory.c **** 
 154:app/tasks/memory/memory.c ****   } while (addr < W25Q64JV_FLASH_SIZE);
 155:app/tasks/memory/memory.c **** 
 156:app/tasks/memory/memory.c ****   return addr;
 157:app/tasks/memory/memory.c **** }
 158:app/tasks/memory/memory.c **** 
 159:app/tasks/memory/memory.c **** 
 160:app/tasks/memory/memory.c **** /**
 161:app/tasks/memory/memory.c ****  * @brief Writes FAT12 boot sector to the NOR Flash
 162:app/tasks/memory/memory.c ****  * Required for USB MSD to work
 163:app/tasks/memory/memory.c ****  */
 164:app/tasks/memory/memory.c **** static osStatus_t writeFAT12BootSector(MEMORY_Actor_t *this) {
 165:app/tasks/memory/memory.c ****   // erase chip
 166:app/tasks/memory/memory.c ****   HAL_StatusTypeDef status = W25Q_EraseChip(&MEMORY_W25QHandle);
 167:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 168:app/tasks/memory/memory.c ****     #ifdef DEBUG
 169:app/tasks/memory/memory.c ****       fprintf(stderr,  "memory error on chip erase");
 170:app/tasks/memory/memory.c ****     #endif
 171:app/tasks/memory/memory.c ****     return status;
 172:app/tasks/memory/memory.c ****   }
 173:app/tasks/memory/memory.c **** 
 174:app/tasks/memory/memory.c ****   // flash FAT12 boot sector
 175:app/tasks/memory/memory.c ****   status = W25Q_WriteData(&MEMORY_W25QHandle, FAT12_BootSector, 0, FAT12_BOOT_SECTOR_SIZE);
 176:app/tasks/memory/memory.c ****   if (status != HAL_OK) {
 177:app/tasks/memory/memory.c ****     #ifdef DEBUG
 178:app/tasks/memory/memory.c ****       fprintf(stderr,  "memory error on FAT12 write");
 179:app/tasks/memory/memory.c ****     #endif
 180:app/tasks/memory/memory.c ****     return status;
 181:app/tasks/memory/memory.c ****   }
ARM GAS  /tmp/ccVXdcqd.s 			page 5


 182:app/tasks/memory/memory.c **** 
 183:app/tasks/memory/memory.c ****   #ifdef DEBUG
 184:app/tasks/memory/memory.c ****     fprintf(stdout,  "FS FAT12 boot sector has been written on NOR Flash");
 185:app/tasks/memory/memory.c ****   #endif
 186:app/tasks/memory/memory.c **** 
 187:app/tasks/memory/memory.c ****   return status;
 188:app/tasks/memory/memory.c **** }
 189:app/tasks/memory/memory.c **** 
 190:app/tasks/memory/memory.c **** static osStatus_t handleInit(MEMORY_Actor_t *this, message_t *message) {
 191:app/tasks/memory/memory.c ****   if (GLOBAL_CMD_INITIALIZE == message->event) {
 192:app/tasks/memory/memory.c ****     uint8_t norFlashID[W25Q_ID_SIZE] = {0x00, 0x00};
 193:app/tasks/memory/memory.c **** 
 194:app/tasks/memory/memory.c ****     // wake up the chip
 195:app/tasks/memory/memory.c ****     osStatus_t ioStatus = W25Q_WakeUp(&MEMORY_W25QHandle);
 196:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 197:app/tasks/memory/memory.c **** 
 198:app/tasks/memory/memory.c ****     // read ID
 199:app/tasks/memory/memory.c ****     ioStatus = W25Q_ReadID(&MEMORY_W25QHandle, norFlashID);
 200:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 201:app/tasks/memory/memory.c **** 
 202:app/tasks/memory/memory.c ****     #ifdef DEBUG
 203:app/tasks/memory/memory.c ****         fprintf(stdout, "W25Q NOR MF ID: 0x%x, Device ID: 0x%x\n", norFlashID[0], norFlashID[1]);
 204:app/tasks/memory/memory.c ****     #endif
 205:app/tasks/memory/memory.c **** 
 206:app/tasks/memory/memory.c ****     #ifdef FLASH_ERASE_CHIP_AND_WRITE_FAT12_BOOT_SECTOR
 207:app/tasks/memory/memory.c ****         writeFAT12BootSector(&MEMORY_Actor);
 208:app/tasks/memory/memory.c ****     #endif
 209:app/tasks/memory/memory.c **** 
 210:app/tasks/memory/memory.c ****     // find the first free space address on NOR flash (to append log to)
 211:app/tasks/memory/memory.c ****     uint32_t freeSpaceAddress = MEMORY_SeekFreeSpaceAddress();
 212:app/tasks/memory/memory.c ****     MEMORY_Actor.logFileTailAddress = freeSpaceAddress;
 213:app/tasks/memory/memory.c **** 
 214:app/tasks/memory/memory.c ****     // put memory to sleep
 215:app/tasks/memory/memory.c ****     ioStatus = W25Q_Sleep(&MEMORY_W25QHandle);
 216:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 217:app/tasks/memory/memory.c **** 
 218:app/tasks/memory/memory.c ****     // publish to event manager that memory is initialized
 219:app/tasks/memory/memory.c ****     osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMessageQ
 220:app/tasks/memory/memory.c ****     osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_INITIALIZE_SUCCESS, .payload.value = MEMO
 221:app/tasks/memory/memory.c **** 
 222:app/tasks/memory/memory.c ****     #ifdef DEBUG
 223:app/tasks/memory/memory.c ****         fprintf(stdout, "First free space address: %x\n", freeSpaceAddress);
 224:app/tasks/memory/memory.c ****         fprintf(stdout, "Memory task initialized\n");
 225:app/tasks/memory/memory.c ****     #endif
 226:app/tasks/memory/memory.c **** 
 227:app/tasks/memory/memory.c ****     TO_STATE(this, MEMORY_SLEEP_STATE);
 228:app/tasks/memory/memory.c ****     return osOK;
 229:app/tasks/memory/memory.c ****   }
 230:app/tasks/memory/memory.c **** };
 231:app/tasks/memory/memory.c **** 
 232:app/tasks/memory/memory.c **** static osStatus_t handleSleep(MEMORY_Actor_t *this, message_t *message) {
 233:app/tasks/memory/memory.c ****   osStatus_t ioStatus = osOK;
 234:app/tasks/memory/memory.c **** 
 235:app/tasks/memory/memory.c ****   switch (message->event) {
 236:app/tasks/memory/memory.c ****     case GLOBAL_TEMPERATURE_HUMIDITY_MEASUREMENTS_READY:
 237:app/tasks/memory/memory.c ****       // set appropriate event flag
 238:app/tasks/memory/memory.c ****       osEventFlagsSet(measurementsReadyEventFlags, TEMPERATURE_HUMIDITY_MEASUREMENTS_READY_EVENT_FL
ARM GAS  /tmp/ccVXdcqd.s 			page 6


 239:app/tasks/memory/memory.c **** 
 240:app/tasks/memory/memory.c ****       // if both measurements are ready, emit write to the memory message
 241:app/tasks/memory/memory.c ****       publishMemoryWriteOnMeasurementsReady(this);
 242:app/tasks/memory/memory.c **** 
 243:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_SLEEP_STATE);
 244:app/tasks/memory/memory.c ****       return osOK;
 245:app/tasks/memory/memory.c **** 
 246:app/tasks/memory/memory.c ****     case GLOBAL_LIGHT_MEASUREMENTS_READY:
 247:app/tasks/memory/memory.c ****       // set appropriate event flag
 248:app/tasks/memory/memory.c ****       osEventFlagsSet(measurementsReadyEventFlags, LIGHT_MEASUREMENTS_READY_EVENT_FLAG);
 249:app/tasks/memory/memory.c **** 
 250:app/tasks/memory/memory.c ****       // if both measurements are ready, emit write to the memory message
 251:app/tasks/memory/memory.c ****       publishMemoryWriteOnMeasurementsReady(this);
 252:app/tasks/memory/memory.c **** 
 253:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_SLEEP_STATE);
 254:app/tasks/memory/memory.c ****       return osOK;
 255:app/tasks/memory/memory.c **** 
 256:app/tasks/memory/memory.c ****     case MEMORY_MEASUREMENTS_WRITE:
 257:app/tasks/memory/memory.c ****       // wake up the chip
 258:app/tasks/memory/memory.c ****       W25Q_WakeUp(&MEMORY_W25QHandle);
 259:app/tasks/memory/memory.c **** 
 260:app/tasks/memory/memory.c ****       // save measurements to the memory, increment log tail address
 261:app/tasks/memory/memory.c ****       ioStatus = appendMeasurementsToNORFlashLogTail(this);
 262:app/tasks/memory/memory.c **** 
 263:app/tasks/memory/memory.c ****       osMessageQueuePut(this->super.osMessageQueueId, &(message_t) {GLOBAL_MEASUREMENTS_WRITE_SUCCE
 264:app/tasks/memory/memory.c **** 
 265:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_WRITE_STATE);
 266:app/tasks/memory/memory.c ****       return ioStatus;
 267:app/tasks/memory/memory.c **** 
 268:app/tasks/memory/memory.c ****     default:
 269:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_SLEEP_STATE);
 270:app/tasks/memory/memory.c ****       return osOK;
 271:app/tasks/memory/memory.c ****   }
 272:app/tasks/memory/memory.c **** };
 273:app/tasks/memory/memory.c **** 
 274:app/tasks/memory/memory.c **** static osStatus_t handleWrite(MEMORY_Actor_t *this, message_t *message) {
  39              		.loc 1 274 73 view -0
  40              		.cfi_startproc
  41              		@ args = 0, pretend = 0, frame = 0
  42              		@ frame_needed = 0, uses_anonymous_args = 0
  43              		.loc 1 274 73 is_stmt 0 view .LVU1
  44 0000 38B5     		push	{r3, r4, r5, lr}
  45              	.LCFI0:
  46              		.cfi_def_cfa_offset 16
  47              		.cfi_offset 3, -16
  48              		.cfi_offset 4, -12
  49              		.cfi_offset 5, -8
  50              		.cfi_offset 14, -4
  51 0002 0446     		mov	r4, r0
 275:app/tasks/memory/memory.c ****   osStatus_t ioStatus = osOK;
  52              		.loc 1 275 3 is_stmt 1 view .LVU2
  53              	.LVL1:
 276:app/tasks/memory/memory.c **** 
 277:app/tasks/memory/memory.c ****   switch (message->event) {
  54              		.loc 1 277 3 view .LVU3
  55              		.loc 1 277 18 is_stmt 0 view .LVU4
  56 0004 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
ARM GAS  /tmp/ccVXdcqd.s 			page 7


  57              		.loc 1 277 3 view .LVU5
  58 0006 CA2B     		cmp	r3, #202
  59 0008 0CD0     		beq	.L5
 278:app/tasks/memory/memory.c ****     case GLOBAL_MEASUREMENTS_WRITE_SUCCESS:
 279:app/tasks/memory/memory.c ****       ioStatus = W25Q_Sleep(&MEMORY_W25QHandle);
 280:app/tasks/memory/memory.c **** 
 281:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_SLEEP_STATE);
 282:app/tasks/memory/memory.c ****       return ioStatus;
 283:app/tasks/memory/memory.c **** 
 284:app/tasks/memory/memory.c ****     default:
 285:app/tasks/memory/memory.c ****       TO_STATE(this, MEMORY_WRITE_STATE);
  60              		.loc 1 285 7 is_stmt 1 view .LVU6
  61              		.loc 1 285 7 view .LVU7
  62 000a 0223     		movs	r3, #2
  63 000c 0374     		strb	r3, [r0, #16]
  64              		.loc 1 285 7 view .LVU8
  65 000e 0D4B     		ldr	r3, .L6
  66 0010 1868     		ldr	r0, [r3]
  67              	.LVL2:
  68              		.loc 1 285 7 is_stmt 0 view .LVU9
  69 0012 0D4B     		ldr	r3, .L6+4
  70 0014 2268     		ldr	r2, [r4]
  71 0016 0D49     		ldr	r1, .L6+8
  72              	.LVL3:
  73              		.loc 1 285 7 view .LVU10
  74 0018 8068     		ldr	r0, [r0, #8]
  75 001a FFF7FEFF 		bl	fprintf
  76              	.LVL4:
  77              		.loc 1 285 7 is_stmt 1 view .LVU11
  78              		.loc 1 285 41 view .LVU12
 286:app/tasks/memory/memory.c ****       return osOK;
  79              		.loc 1 286 7 view .LVU13
  80              		.loc 1 286 14 is_stmt 0 view .LVU14
  81 001e 0025     		movs	r5, #0
  82              	.LVL5:
  83              	.L1:
 287:app/tasks/memory/memory.c ****   }
 288:app/tasks/memory/memory.c **** }
  84              		.loc 1 288 1 view .LVU15
  85 0020 2846     		mov	r0, r5
  86 0022 38BD     		pop	{r3, r4, r5, pc}
  87              	.LVL6:
  88              	.L5:
 279:app/tasks/memory/memory.c **** 
  89              		.loc 1 279 7 is_stmt 1 view .LVU16
 279:app/tasks/memory/memory.c **** 
  90              		.loc 1 279 18 is_stmt 0 view .LVU17
  91 0024 0A48     		ldr	r0, .L6+12
  92              	.LVL7:
 279:app/tasks/memory/memory.c **** 
  93              		.loc 1 279 18 view .LVU18
  94 0026 FFF7FEFF 		bl	W25Q_Sleep
  95              	.LVL8:
 279:app/tasks/memory/memory.c **** 
  96              		.loc 1 279 16 view .LVU19
  97 002a 0546     		mov	r5, r0
  98              	.LVL9:
ARM GAS  /tmp/ccVXdcqd.s 			page 8


 281:app/tasks/memory/memory.c ****       return ioStatus;
  99              		.loc 1 281 7 is_stmt 1 view .LVU20
 281:app/tasks/memory/memory.c ****       return ioStatus;
 100              		.loc 1 281 7 view .LVU21
 101 002c 0123     		movs	r3, #1
 102 002e 2374     		strb	r3, [r4, #16]
 281:app/tasks/memory/memory.c ****       return ioStatus;
 103              		.loc 1 281 7 view .LVU22
 104 0030 044B     		ldr	r3, .L6
 105 0032 1868     		ldr	r0, [r3]
 106              	.LVL10:
 281:app/tasks/memory/memory.c ****       return ioStatus;
 107              		.loc 1 281 7 is_stmt 0 view .LVU23
 108 0034 074B     		ldr	r3, .L6+16
 109 0036 2268     		ldr	r2, [r4]
 110 0038 0449     		ldr	r1, .L6+8
 111 003a 8068     		ldr	r0, [r0, #8]
 112 003c FFF7FEFF 		bl	fprintf
 113              	.LVL11:
 281:app/tasks/memory/memory.c ****       return ioStatus;
 114              		.loc 1 281 7 is_stmt 1 view .LVU24
 281:app/tasks/memory/memory.c ****       return ioStatus;
 115              		.loc 1 281 41 view .LVU25
 282:app/tasks/memory/memory.c **** 
 116              		.loc 1 282 7 view .LVU26
 282:app/tasks/memory/memory.c **** 
 117              		.loc 1 282 14 is_stmt 0 view .LVU27
 118 0040 EEE7     		b	.L1
 119              	.L7:
 120 0042 00BF     		.align	2
 121              	.L6:
 122 0044 00000000 		.word	_impure_ptr
 123 0048 20000000 		.word	.LC2
 124 004c 14000000 		.word	.LC1
 125 0050 00000000 		.word	.LANCHOR0
 126 0054 00000000 		.word	.LC0
 127              		.cfi_endproc
 128              	.LFE147:
 130              		.section	.text.publishMemoryWriteOnMeasurementsReady,"ax",%progbits
 131              		.align	1
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 135              		.fpu fpv4-sp-d16
 137              	publishMemoryWriteOnMeasurementsReady:
 138              	.LVL12:
 139              	.LFB148:
 289:app/tasks/memory/memory.c **** 
 290:app/tasks/memory/memory.c **** /**
 291:app/tasks/memory/memory.c ****  * @brief Publishes MEMORY_MEASUREMENTS_WRITE message to the memory task on both measurements ready
 292:app/tasks/memory/memory.c ****  */
 293:app/tasks/memory/memory.c **** static void publishMemoryWriteOnMeasurementsReady(MEMORY_Actor_t *this) {
 140              		.loc 1 293 73 is_stmt 1 view -0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 16
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144              		.loc 1 293 73 is_stmt 0 view .LVU29
ARM GAS  /tmp/ccVXdcqd.s 			page 9


 145 0000 10B5     		push	{r4, lr}
 146              	.LCFI1:
 147              		.cfi_def_cfa_offset 8
 148              		.cfi_offset 4, -8
 149              		.cfi_offset 14, -4
 150 0002 84B0     		sub	sp, sp, #16
 151              	.LCFI2:
 152              		.cfi_def_cfa_offset 24
 153 0004 0446     		mov	r4, r0
 294:app/tasks/memory/memory.c ****   if (osEventFlagsGet(measurementsReadyEventFlags) == (TEMPERATURE_HUMIDITY_MEASUREMENTS_READY_EVEN
 154              		.loc 1 294 3 is_stmt 1 view .LVU30
 155              		.loc 1 294 7 is_stmt 0 view .LVU31
 156 0006 0D4B     		ldr	r3, .L12
 157 0008 1868     		ldr	r0, [r3]
 158              	.LVL13:
 159              		.loc 1 294 7 view .LVU32
 160 000a FFF7FEFF 		bl	osEventFlagsGet
 161              	.LVL14:
 162              		.loc 1 294 6 view .LVU33
 163 000e 0328     		cmp	r0, #3
 164 0010 01D0     		beq	.L11
 165              	.L8:
 295:app/tasks/memory/memory.c ****     osEventFlagsClear(measurementsReadyEventFlags, TEMPERATURE_HUMIDITY_MEASUREMENTS_READY_EVENT_FL
 296:app/tasks/memory/memory.c ****     osMessageQueuePut(this->super.osMessageQueueId, &(message_t) {MEMORY_MEASUREMENTS_WRITE}, 0, 0)
 297:app/tasks/memory/memory.c ****   }
 298:app/tasks/memory/memory.c **** }
 166              		.loc 1 298 1 view .LVU34
 167 0012 04B0     		add	sp, sp, #16
 168              	.LCFI3:
 169              		.cfi_remember_state
 170              		.cfi_def_cfa_offset 8
 171              		@ sp needed
 172 0014 10BD     		pop	{r4, pc}
 173              	.LVL15:
 174              	.L11:
 175              	.LCFI4:
 176              		.cfi_restore_state
 177              	.LBB2:
 295:app/tasks/memory/memory.c ****     osEventFlagsClear(measurementsReadyEventFlags, TEMPERATURE_HUMIDITY_MEASUREMENTS_READY_EVENT_FL
 178              		.loc 1 295 5 is_stmt 1 view .LVU35
 179 0016 0321     		movs	r1, #3
 180 0018 084B     		ldr	r3, .L12
 181 001a 1868     		ldr	r0, [r3]
 182 001c FFF7FEFF 		bl	osEventFlagsClear
 183              	.LVL16:
 296:app/tasks/memory/memory.c ****   }
 184              		.loc 1 296 5 view .LVU36
 296:app/tasks/memory/memory.c ****   }
 185              		.loc 1 296 66 is_stmt 0 view .LVU37
 186 0020 0022     		movs	r2, #0
 187 0022 0192     		str	r2, [sp, #4]
 188 0024 0292     		str	r2, [sp, #8]
 189 0026 0392     		str	r2, [sp, #12]
 190 0028 E123     		movs	r3, #225
 191 002a 8DF80430 		strb	r3, [sp, #4]
 296:app/tasks/memory/memory.c ****   }
 192              		.loc 1 296 5 view .LVU38
ARM GAS  /tmp/ccVXdcqd.s 			page 10


 193 002e 1346     		mov	r3, r2
 194 0030 01A9     		add	r1, sp, #4
 195 0032 A068     		ldr	r0, [r4, #8]
 196 0034 FFF7FEFF 		bl	osMessageQueuePut
 197              	.LVL17:
 198              	.LBE2:
 199              		.loc 1 298 1 view .LVU39
 200 0038 EBE7     		b	.L8
 201              	.L13:
 202 003a 00BF     		.align	2
 203              	.L12:
 204 003c 00000000 		.word	.LANCHOR1
 205              		.cfi_endproc
 206              	.LFE148:
 208              		.section	.rodata.appendMeasurementsToNORFlashLogTail.str1.4,"aMS",%progbits,1
 209              		.align	2
 210              	.LC3:
 211 0000 4C6F6720 		.ascii	"Log entry to write:\012 timestamp: %ld\012 rawTempe"
 211      656E7472 
 211      7920746F 
 211      20777269 
 211      74653A0A 
 212 002d 72617475 		.ascii	"rature: 0x%x\012 rawHumidity: 0x%x\012 rawLux: 0x%x"
 212      72653A20 
 212      30782578 
 212      0A207261 
 212      7748756D 
 213 005a 0A207265 		.ascii	"\012 reserved: %ld\012\000"
 213      73657276 
 213      65643A20 
 213      256C640A 
 213      00
 214              		.section	.text.appendMeasurementsToNORFlashLogTail,"ax",%progbits
 215              		.align	1
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 219              		.fpu fpv4-sp-d16
 221              	appendMeasurementsToNORFlashLogTail:
 222              	.LVL18:
 223              	.LFB149:
 299:app/tasks/memory/memory.c **** 
 300:app/tasks/memory/memory.c **** static osStatus_t appendMeasurementsToNORFlashLogTail(MEMORY_Actor_t *this) {
 224              		.loc 1 300 77 is_stmt 1 view -0
 225              		.cfi_startproc
 226              		@ args = 0, pretend = 0, frame = 16
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		.loc 1 300 77 is_stmt 0 view .LVU41
 229 0000 70B5     		push	{r4, r5, r6, lr}
 230              	.LCFI5:
 231              		.cfi_def_cfa_offset 16
 232              		.cfi_offset 4, -16
 233              		.cfi_offset 5, -12
 234              		.cfi_offset 6, -8
 235              		.cfi_offset 14, -4
 236 0002 88B0     		sub	sp, sp, #32
 237              	.LCFI6:
ARM GAS  /tmp/ccVXdcqd.s 			page 11


 238              		.cfi_def_cfa_offset 48
 239 0004 0546     		mov	r5, r0
 301:app/tasks/memory/memory.c ****   osStatus_t ioStatus = osOK;
 240              		.loc 1 301 3 is_stmt 1 view .LVU42
 241              	.LVL19:
 302:app/tasks/memory/memory.c **** 
 303:app/tasks/memory/memory.c ****   // sensors actors pointers from the system registry
 304:app/tasks/memory/memory.c ****   TH_SENS_Actor_t *thSensActor = (TH_SENS_Actor_t *)ACTORS_LIST_SystemRegistry[TEMPERATURE_HUMIDITY
 242              		.loc 1 304 3 view .LVU43
 243              		.loc 1 304 20 is_stmt 0 view .LVU44
 244 0006 124B     		ldr	r3, .L16
 245 0008 9C69     		ldr	r4, [r3, #24]
 246              	.LVL20:
 305:app/tasks/memory/memory.c ****   LIGHT_SENS_Actor_t *lightSensorActor = (LIGHT_SENS_Actor_t *)ACTORS_LIST_SystemRegistry[LIGHT_SEN
 247              		.loc 1 305 3 is_stmt 1 view .LVU45
 248              		.loc 1 305 23 is_stmt 0 view .LVU46
 249 000a DE69     		ldr	r6, [r3, #28]
 250              	.LVL21:
 306:app/tasks/memory/memory.c **** 
 307:app/tasks/memory/memory.c ****   // current timestamp in UNIX format
 308:app/tasks/memory/memory.c ****   int32_t timestamp = CRON_GetCurrentUnixTimestamp();
 251              		.loc 1 308 3 is_stmt 1 view .LVU47
 252              		.loc 1 308 23 is_stmt 0 view .LVU48
 253 000c FFF7FEFF 		bl	CRON_GetCurrentUnixTimestamp
 254              	.LVL22:
 255              		.loc 1 308 23 view .LVU49
 256 0010 0246     		mov	r2, r0
 257              	.LVL23:
 309:app/tasks/memory/memory.c **** 
 310:app/tasks/memory/memory.c ****   // create measurements log entry
 311:app/tasks/memory/memory.c ****   MEMORY_SensorsMeasurementEntry_t sensorsMeasurementEntry = {
 258              		.loc 1 311 3 is_stmt 1 view .LVU50
 259              		.loc 1 311 36 is_stmt 0 view .LVU51
 260 0012 0490     		str	r0, [sp, #16]
 312:app/tasks/memory/memory.c ****           .timestamp = timestamp,
 313:app/tasks/memory/memory.c ****           .rawTemperature = thSensActor->rawTemperature,
 261              		.loc 1 313 40 view .LVU52
 262 0014 638A     		ldrh	r3, [r4, #18]
 311:app/tasks/memory/memory.c ****           .timestamp = timestamp,
 263              		.loc 1 311 36 view .LVU53
 264 0016 ADF81430 		strh	r3, [sp, #20]	@ movhi
 314:app/tasks/memory/memory.c ****           .rawHumidity = thSensActor->rawHumidity,
 265              		.loc 1 314 37 view .LVU54
 266 001a A18A     		ldrh	r1, [r4, #20]
 311:app/tasks/memory/memory.c ****           .timestamp = timestamp,
 267              		.loc 1 311 36 view .LVU55
 268 001c ADF81610 		strh	r1, [sp, #22]	@ movhi
 315:app/tasks/memory/memory.c ****           .rawLux = lightSensorActor->rawLux,
 269              		.loc 1 315 37 view .LVU56
 270 0020 768A     		ldrh	r6, [r6, #18]
 271              	.LVL24:
 311:app/tasks/memory/memory.c ****           .timestamp = timestamp,
 272              		.loc 1 311 36 view .LVU57
 273 0022 ADF81860 		strh	r6, [sp, #24]	@ movhi
 274 0026 0024     		movs	r4, #0
 275              	.LVL25:
 311:app/tasks/memory/memory.c ****           .timestamp = timestamp,
ARM GAS  /tmp/ccVXdcqd.s 			page 12


 276              		.loc 1 311 36 view .LVU58
 277 0028 ADF81A40 		strh	r4, [sp, #26]	@ movhi
 278 002c ADF81C40 		strh	r4, [sp, #28]	@ movhi
 316:app/tasks/memory/memory.c ****           .reserved = 0x00000000
 317:app/tasks/memory/memory.c ****   };
 318:app/tasks/memory/memory.c **** 
 319:app/tasks/memory/memory.c ****   #ifdef DEBUG
 320:app/tasks/memory/memory.c ****   fprintf(stdout, "Log entry to write:\n timestamp: %ld\n rawTemperature: 0x%x\n rawHumidity: 0x%x\
 279              		.loc 1 320 3 is_stmt 1 view .LVU59
 280              		.loc 1 320 11 is_stmt 0 view .LVU60
 281 0030 0848     		ldr	r0, .L16+4
 282              	.LVL26:
 283              		.loc 1 320 11 view .LVU61
 284 0032 0068     		ldr	r0, [r0]
 285 0034 8068     		ldr	r0, [r0, #8]
 286              		.loc 1 320 3 view .LVU62
 287 0036 0294     		str	r4, [sp, #8]
 288 0038 0196     		str	r6, [sp, #4]
 289 003a 0091     		str	r1, [sp]
 290 003c 0649     		ldr	r1, .L16+8
 291 003e FFF7FEFF 		bl	fprintf
 292              	.LVL27:
 321:app/tasks/memory/memory.c ****             sensorsMeasurementEntry.timestamp,
 322:app/tasks/memory/memory.c ****             sensorsMeasurementEntry.rawTemperature,
 323:app/tasks/memory/memory.c ****             sensorsMeasurementEntry.rawHumidity,
 324:app/tasks/memory/memory.c ****             sensorsMeasurementEntry.rawLux,
 325:app/tasks/memory/memory.c ****             sensorsMeasurementEntry.reserved);
 326:app/tasks/memory/memory.c ****   #endif
 327:app/tasks/memory/memory.c **** 
 328:app/tasks/memory/memory.c ****   // write measurements to the memory
 329:app/tasks/memory/memory.c ****   #ifdef FLASH_WRITE_ENABLED
 330:app/tasks/memory/memory.c ****   ioStatus = W25Q_WriteData(&MEMORY_W25QHandle, (uint8_t *) &sensorsMeasurementEntry, this->logFile
 331:app/tasks/memory/memory.c ****   #endif
 332:app/tasks/memory/memory.c **** 
 333:app/tasks/memory/memory.c ****   // increment tail free space address for the next entry
 334:app/tasks/memory/memory.c ****   this->logFileTailAddress += MEMORY_LOG_ENTRY_SIZE;
 293              		.loc 1 334 3 is_stmt 1 view .LVU63
 294              		.loc 1 334 28 is_stmt 0 view .LVU64
 295 0042 6B69     		ldr	r3, [r5, #20]
 296 0044 1033     		adds	r3, r3, #16
 297 0046 6B61     		str	r3, [r5, #20]
 335:app/tasks/memory/memory.c **** 
 336:app/tasks/memory/memory.c ****   return ioStatus;
 298              		.loc 1 336 3 is_stmt 1 view .LVU65
 337:app/tasks/memory/memory.c **** }
 299              		.loc 1 337 1 is_stmt 0 view .LVU66
 300 0048 2046     		mov	r0, r4
 301 004a 08B0     		add	sp, sp, #32
 302              	.LCFI7:
 303              		.cfi_def_cfa_offset 16
 304              		@ sp needed
 305 004c 70BD     		pop	{r4, r5, r6, pc}
 306              	.LVL28:
 307              	.L17:
 308              		.loc 1 337 1 view .LVU67
 309 004e 00BF     		.align	2
 310              	.L16:
ARM GAS  /tmp/ccVXdcqd.s 			page 13


 311 0050 00000000 		.word	ACTORS_LIST_SystemRegistry
 312 0054 00000000 		.word	_impure_ptr
 313 0058 00000000 		.word	.LC3
 314              		.cfi_endproc
 315              	.LFE149:
 317              		.section	.text.handleSleep,"ax",%progbits
 318              		.align	1
 319              		.syntax unified
 320              		.thumb
 321              		.thumb_func
 322              		.fpu fpv4-sp-d16
 324              	handleSleep:
 325              	.LVL29:
 326              	.LFB146:
 232:app/tasks/memory/memory.c ****   osStatus_t ioStatus = osOK;
 327              		.loc 1 232 73 is_stmt 1 view -0
 328              		.cfi_startproc
 329              		@ args = 0, pretend = 0, frame = 16
 330              		@ frame_needed = 0, uses_anonymous_args = 0
 232:app/tasks/memory/memory.c ****   osStatus_t ioStatus = osOK;
 331              		.loc 1 232 73 is_stmt 0 view .LVU69
 332 0000 30B5     		push	{r4, r5, lr}
 333              	.LCFI8:
 334              		.cfi_def_cfa_offset 12
 335              		.cfi_offset 4, -12
 336              		.cfi_offset 5, -8
 337              		.cfi_offset 14, -4
 338 0002 85B0     		sub	sp, sp, #20
 339              	.LCFI9:
 340              		.cfi_def_cfa_offset 32
 341 0004 0446     		mov	r4, r0
 233:app/tasks/memory/memory.c **** 
 342              		.loc 1 233 3 is_stmt 1 view .LVU70
 343              	.LVL30:
 235:app/tasks/memory/memory.c ****     case GLOBAL_TEMPERATURE_HUMIDITY_MEASUREMENTS_READY:
 344              		.loc 1 235 3 view .LVU71
 235:app/tasks/memory/memory.c ****     case GLOBAL_TEMPERATURE_HUMIDITY_MEASUREMENTS_READY:
 345              		.loc 1 235 18 is_stmt 0 view .LVU72
 346 0006 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 235:app/tasks/memory/memory.c ****     case GLOBAL_TEMPERATURE_HUMIDITY_MEASUREMENTS_READY:
 347              		.loc 1 235 3 view .LVU73
 348 0008 C92B     		cmp	r3, #201
 349 000a 25D0     		beq	.L19
 350 000c E12B     		cmp	r3, #225
 351 000e 37D0     		beq	.L20
 352 0010 C82B     		cmp	r3, #200
 353 0012 0BD0     		beq	.L24
 354              	.LBB3:
 269:app/tasks/memory/memory.c ****       return osOK;
 355              		.loc 1 269 7 is_stmt 1 view .LVU74
 269:app/tasks/memory/memory.c ****       return osOK;
 356              		.loc 1 269 7 view .LVU75
 357 0014 0123     		movs	r3, #1
 358 0016 0374     		strb	r3, [r0, #16]
 269:app/tasks/memory/memory.c ****       return osOK;
 359              		.loc 1 269 7 view .LVU76
 360 0018 284B     		ldr	r3, .L25
ARM GAS  /tmp/ccVXdcqd.s 			page 14


 361 001a 1868     		ldr	r0, [r3]
 362              	.LVL31:
 269:app/tasks/memory/memory.c ****       return osOK;
 363              		.loc 1 269 7 is_stmt 0 view .LVU77
 364 001c 284B     		ldr	r3, .L25+4
 365 001e 2268     		ldr	r2, [r4]
 366 0020 2849     		ldr	r1, .L25+8
 367              	.LVL32:
 269:app/tasks/memory/memory.c ****       return osOK;
 368              		.loc 1 269 7 view .LVU78
 369 0022 8068     		ldr	r0, [r0, #8]
 370 0024 FFF7FEFF 		bl	fprintf
 371              	.LVL33:
 269:app/tasks/memory/memory.c ****       return osOK;
 372              		.loc 1 269 7 is_stmt 1 view .LVU79
 269:app/tasks/memory/memory.c ****       return osOK;
 373              		.loc 1 269 41 view .LVU80
 270:app/tasks/memory/memory.c ****   }
 374              		.loc 1 270 7 view .LVU81
 270:app/tasks/memory/memory.c ****   }
 375              		.loc 1 270 14 is_stmt 0 view .LVU82
 376 0028 0025     		movs	r5, #0
 377 002a 12E0     		b	.L18
 378              	.LVL34:
 379              	.L24:
 238:app/tasks/memory/memory.c **** 
 380              		.loc 1 238 7 is_stmt 1 view .LVU83
 381 002c 0121     		movs	r1, #1
 382              	.LVL35:
 238:app/tasks/memory/memory.c **** 
 383              		.loc 1 238 7 is_stmt 0 view .LVU84
 384 002e 264B     		ldr	r3, .L25+12
 385 0030 1868     		ldr	r0, [r3]
 386              	.LVL36:
 238:app/tasks/memory/memory.c **** 
 387              		.loc 1 238 7 view .LVU85
 388 0032 FFF7FEFF 		bl	osEventFlagsSet
 389              	.LVL37:
 241:app/tasks/memory/memory.c **** 
 390              		.loc 1 241 7 is_stmt 1 view .LVU86
 391 0036 2046     		mov	r0, r4
 392 0038 FFF7FEFF 		bl	publishMemoryWriteOnMeasurementsReady
 393              	.LVL38:
 243:app/tasks/memory/memory.c ****       return osOK;
 394              		.loc 1 243 7 view .LVU87
 243:app/tasks/memory/memory.c ****       return osOK;
 395              		.loc 1 243 7 view .LVU88
 396 003c 0123     		movs	r3, #1
 397 003e 2374     		strb	r3, [r4, #16]
 243:app/tasks/memory/memory.c ****       return osOK;
 398              		.loc 1 243 7 view .LVU89
 399 0040 1E4B     		ldr	r3, .L25
 400 0042 1868     		ldr	r0, [r3]
 401 0044 1E4B     		ldr	r3, .L25+4
 402 0046 2268     		ldr	r2, [r4]
 403 0048 1E49     		ldr	r1, .L25+8
 404 004a 8068     		ldr	r0, [r0, #8]
ARM GAS  /tmp/ccVXdcqd.s 			page 15


 405 004c FFF7FEFF 		bl	fprintf
 406              	.LVL39:
 243:app/tasks/memory/memory.c ****       return osOK;
 407              		.loc 1 243 7 view .LVU90
 243:app/tasks/memory/memory.c ****       return osOK;
 408              		.loc 1 243 41 view .LVU91
 244:app/tasks/memory/memory.c **** 
 409              		.loc 1 244 7 view .LVU92
 244:app/tasks/memory/memory.c **** 
 410              		.loc 1 244 14 is_stmt 0 view .LVU93
 411 0050 0025     		movs	r5, #0
 412              	.LVL40:
 413              	.L18:
 244:app/tasks/memory/memory.c **** 
 414              		.loc 1 244 14 view .LVU94
 415              	.LBE3:
 272:app/tasks/memory/memory.c **** 
 416              		.loc 1 272 1 view .LVU95
 417 0052 2846     		mov	r0, r5
 418 0054 05B0     		add	sp, sp, #20
 419              	.LCFI10:
 420              		.cfi_remember_state
 421              		.cfi_def_cfa_offset 12
 422              		@ sp needed
 423 0056 30BD     		pop	{r4, r5, pc}
 424              	.LVL41:
 425              	.L19:
 426              	.LCFI11:
 427              		.cfi_restore_state
 428              	.LBB4:
 248:app/tasks/memory/memory.c **** 
 429              		.loc 1 248 7 is_stmt 1 view .LVU96
 430 0058 0221     		movs	r1, #2
 431              	.LVL42:
 248:app/tasks/memory/memory.c **** 
 432              		.loc 1 248 7 is_stmt 0 view .LVU97
 433 005a 1B4B     		ldr	r3, .L25+12
 434 005c 1868     		ldr	r0, [r3]
 435              	.LVL43:
 248:app/tasks/memory/memory.c **** 
 436              		.loc 1 248 7 view .LVU98
 437 005e FFF7FEFF 		bl	osEventFlagsSet
 438              	.LVL44:
 251:app/tasks/memory/memory.c **** 
 439              		.loc 1 251 7 is_stmt 1 view .LVU99
 440 0062 2046     		mov	r0, r4
 441 0064 FFF7FEFF 		bl	publishMemoryWriteOnMeasurementsReady
 442              	.LVL45:
 253:app/tasks/memory/memory.c ****       return osOK;
 443              		.loc 1 253 7 view .LVU100
 253:app/tasks/memory/memory.c ****       return osOK;
 444              		.loc 1 253 7 view .LVU101
 445 0068 0123     		movs	r3, #1
 446 006a 2374     		strb	r3, [r4, #16]
 253:app/tasks/memory/memory.c ****       return osOK;
 447              		.loc 1 253 7 view .LVU102
 448 006c 134B     		ldr	r3, .L25
ARM GAS  /tmp/ccVXdcqd.s 			page 16


 449 006e 1868     		ldr	r0, [r3]
 450 0070 134B     		ldr	r3, .L25+4
 451 0072 2268     		ldr	r2, [r4]
 452 0074 1349     		ldr	r1, .L25+8
 453 0076 8068     		ldr	r0, [r0, #8]
 454 0078 FFF7FEFF 		bl	fprintf
 455              	.LVL46:
 253:app/tasks/memory/memory.c ****       return osOK;
 456              		.loc 1 253 7 view .LVU103
 253:app/tasks/memory/memory.c ****       return osOK;
 457              		.loc 1 253 41 view .LVU104
 254:app/tasks/memory/memory.c **** 
 458              		.loc 1 254 7 view .LVU105
 254:app/tasks/memory/memory.c **** 
 459              		.loc 1 254 14 is_stmt 0 view .LVU106
 460 007c 0025     		movs	r5, #0
 461 007e E8E7     		b	.L18
 462              	.LVL47:
 463              	.L20:
 258:app/tasks/memory/memory.c **** 
 464              		.loc 1 258 7 is_stmt 1 view .LVU107
 465 0080 1248     		ldr	r0, .L25+16
 466              	.LVL48:
 258:app/tasks/memory/memory.c **** 
 467              		.loc 1 258 7 is_stmt 0 view .LVU108
 468 0082 FFF7FEFF 		bl	W25Q_WakeUp
 469              	.LVL49:
 261:app/tasks/memory/memory.c **** 
 470              		.loc 1 261 7 is_stmt 1 view .LVU109
 261:app/tasks/memory/memory.c **** 
 471              		.loc 1 261 18 is_stmt 0 view .LVU110
 472 0086 2046     		mov	r0, r4
 473 0088 FFF7FEFF 		bl	appendMeasurementsToNORFlashLogTail
 474              	.LVL50:
 475 008c 0546     		mov	r5, r0
 476              	.LVL51:
 263:app/tasks/memory/memory.c **** 
 477              		.loc 1 263 7 is_stmt 1 view .LVU111
 263:app/tasks/memory/memory.c **** 
 478              		.loc 1 263 68 is_stmt 0 view .LVU112
 479 008e 0022     		movs	r2, #0
 480 0090 0192     		str	r2, [sp, #4]
 481 0092 0292     		str	r2, [sp, #8]
 482 0094 0392     		str	r2, [sp, #12]
 483 0096 CA23     		movs	r3, #202
 484 0098 8DF80430 		strb	r3, [sp, #4]
 263:app/tasks/memory/memory.c **** 
 485              		.loc 1 263 7 view .LVU113
 486 009c 1346     		mov	r3, r2
 487 009e 01A9     		add	r1, sp, #4
 488 00a0 A068     		ldr	r0, [r4, #8]
 489              	.LVL52:
 263:app/tasks/memory/memory.c **** 
 490              		.loc 1 263 7 view .LVU114
 491 00a2 FFF7FEFF 		bl	osMessageQueuePut
 492              	.LVL53:
 265:app/tasks/memory/memory.c ****       return ioStatus;
ARM GAS  /tmp/ccVXdcqd.s 			page 17


 493              		.loc 1 265 7 is_stmt 1 view .LVU115
 265:app/tasks/memory/memory.c ****       return ioStatus;
 494              		.loc 1 265 7 view .LVU116
 495 00a6 0223     		movs	r3, #2
 496 00a8 2374     		strb	r3, [r4, #16]
 265:app/tasks/memory/memory.c ****       return ioStatus;
 497              		.loc 1 265 7 view .LVU117
 498 00aa 044B     		ldr	r3, .L25
 499 00ac 1868     		ldr	r0, [r3]
 500 00ae 084B     		ldr	r3, .L25+20
 501 00b0 2268     		ldr	r2, [r4]
 502 00b2 0449     		ldr	r1, .L25+8
 503 00b4 8068     		ldr	r0, [r0, #8]
 504 00b6 FFF7FEFF 		bl	fprintf
 505              	.LVL54:
 265:app/tasks/memory/memory.c ****       return ioStatus;
 506              		.loc 1 265 7 view .LVU118
 265:app/tasks/memory/memory.c ****       return ioStatus;
 507              		.loc 1 265 41 view .LVU119
 266:app/tasks/memory/memory.c **** 
 508              		.loc 1 266 7 view .LVU120
 266:app/tasks/memory/memory.c **** 
 509              		.loc 1 266 14 is_stmt 0 view .LVU121
 510 00ba CAE7     		b	.L18
 511              	.L26:
 512              		.align	2
 513              	.L25:
 514 00bc 00000000 		.word	_impure_ptr
 515 00c0 00000000 		.word	.LC0
 516 00c4 14000000 		.word	.LC1
 517 00c8 00000000 		.word	.LANCHOR1
 518 00cc 00000000 		.word	.LANCHOR0
 519 00d0 20000000 		.word	.LC2
 520              	.LBE4:
 521              		.cfi_endproc
 522              	.LFE146:
 524              		.section	.rodata.MEMORY_Task.str1.4,"aMS",%progbits,1
 525              		.align	2
 526              	.LC4:
 527 0000 4D454D4F 		.ascii	"MEMORY_STATE_ERROR\000"
 527      52595F53 
 527      54415445 
 527      5F455252 
 527      4F5200
 528              		.section	.text.MEMORY_Task,"ax",%progbits
 529              		.align	1
 530              		.global	MEMORY_Task
 531              		.syntax unified
 532              		.thumb
 533              		.thumb_func
 534              		.fpu fpv4-sp-d16
 536              	MEMORY_Task:
 537              	.LFB141:
  90:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
 538              		.loc 1 90 34 is_stmt 1 view -0
 539              		.cfi_startproc
 540              		@ args = 0, pretend = 0, frame = 24
ARM GAS  /tmp/ccVXdcqd.s 			page 18


 541              		@ frame_needed = 0, uses_anonymous_args = 0
 542              	.LVL55:
  90:app/tasks/memory/memory.c ****   (void) argument; // Avoid unused parameter warning
 543              		.loc 1 90 34 is_stmt 0 view .LVU123
 544 0000 00B5     		push	{lr}
 545              	.LCFI12:
 546              		.cfi_def_cfa_offset 4
 547              		.cfi_offset 14, -4
 548 0002 87B0     		sub	sp, sp, #28
 549              	.LCFI13:
 550              		.cfi_def_cfa_offset 32
 551              	.LVL56:
 552              	.L28:
  91:app/tasks/memory/memory.c ****   message_t msg;
 553              		.loc 1 91 3 is_stmt 1 view .LVU124
  92:app/tasks/memory/memory.c **** 
 554              		.loc 1 92 3 view .LVU125
  94:app/tasks/memory/memory.c ****     // Wait for messages from the queue
 555              		.loc 1 94 3 view .LVU126
  96:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 556              		.loc 1 96 5 view .LVU127
  96:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 557              		.loc 1 96 9 is_stmt 0 view .LVU128
 558 0004 4FF0FF33 		mov	r3, #-1
 559 0008 0022     		movs	r2, #0
 560 000a 6946     		mov	r1, sp
 561 000c 1348     		ldr	r0, .L32
 562 000e 8068     		ldr	r0, [r0, #8]
 563 0010 FFF7FEFF 		bl	osMessageQueueGet
 564              	.LVL57:
  96:app/tasks/memory/memory.c ****       osStatus_t status = MEMORY_Actor.super.messageHandler((actor_t *) &MEMORY_Actor, &msg);
 565              		.loc 1 96 8 view .LVU129
 566 0014 0028     		cmp	r0, #0
 567 0016 F5D1     		bne	.L28
 568              	.LBB5:
  97:app/tasks/memory/memory.c **** 
 569              		.loc 1 97 7 is_stmt 1 view .LVU130
  97:app/tasks/memory/memory.c **** 
 570              		.loc 1 97 45 is_stmt 0 view .LVU131
 571 0018 1048     		ldr	r0, .L32
 572 001a C368     		ldr	r3, [r0, #12]
  97:app/tasks/memory/memory.c **** 
 573              		.loc 1 97 27 view .LVU132
 574 001c 6946     		mov	r1, sp
 575 001e 9847     		blx	r3
 576              	.LVL58:
  99:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 577              		.loc 1 99 7 is_stmt 1 view .LVU133
  99:app/tasks/memory/memory.c ****         osMessageQueueId_t evManagerQueue = ACTORS_LIST_SystemRegistry[EV_MANAGER_ACTOR_ID]->osMess
 578              		.loc 1 99 10 is_stmt 0 view .LVU134
 579 0020 0028     		cmp	r0, #0
 580 0022 EFD0     		beq	.L28
 581              	.LBB6:
 100:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 582              		.loc 1 100 9 is_stmt 1 view .LVU135
 100:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 583              		.loc 1 100 71 is_stmt 0 view .LVU136
ARM GAS  /tmp/ccVXdcqd.s 			page 19


 584 0024 0E4B     		ldr	r3, .L32+4
 585 0026 5B68     		ldr	r3, [r3, #4]
 100:app/tasks/memory/memory.c ****         osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_ERROR, .payload.value = MEMORY_ACTOR_
 586              		.loc 1 100 28 view .LVU137
 587 0028 9868     		ldr	r0, [r3, #8]
 588              	.LVL59:
 101:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 589              		.loc 1 101 9 is_stmt 1 view .LVU138
 101:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 590              		.loc 1 101 55 is_stmt 0 view .LVU139
 591 002a 0022     		movs	r2, #0
 592 002c 0392     		str	r2, [sp, #12]
 593 002e 0492     		str	r2, [sp, #16]
 594 0030 0592     		str	r2, [sp, #20]
 595 0032 D223     		movs	r3, #210
 596 0034 8DF80C30 		strb	r3, [sp, #12]
 597 0038 0823     		movs	r3, #8
 598 003a 0493     		str	r3, [sp, #16]
 101:app/tasks/memory/memory.c ****         TO_STATE(&MEMORY_Actor, MEMORY_STATE_ERROR);
 599              		.loc 1 101 9 view .LVU140
 600 003c 1346     		mov	r3, r2
 601 003e 03A9     		add	r1, sp, #12
 602 0040 FFF7FEFF 		bl	osMessageQueuePut
 603              	.LVL60:
 102:app/tasks/memory/memory.c ****       }
 604              		.loc 1 102 9 is_stmt 1 view .LVU141
 102:app/tasks/memory/memory.c ****       }
 605              		.loc 1 102 9 view .LVU142
 606 0044 054A     		ldr	r2, .L32
 607 0046 0323     		movs	r3, #3
 608 0048 1374     		strb	r3, [r2, #16]
 102:app/tasks/memory/memory.c ****       }
 609              		.loc 1 102 9 view .LVU143
 610 004a 064B     		ldr	r3, .L32+8
 611 004c 1868     		ldr	r0, [r3]
 612 004e 064B     		ldr	r3, .L32+12
 613 0050 1268     		ldr	r2, [r2]
 614 0052 0649     		ldr	r1, .L32+16
 615 0054 8068     		ldr	r0, [r0, #8]
 616 0056 FFF7FEFF 		bl	fprintf
 617              	.LVL61:
 102:app/tasks/memory/memory.c ****       }
 618              		.loc 1 102 9 view .LVU144
 102:app/tasks/memory/memory.c ****       }
 619              		.loc 1 102 52 view .LVU145
 620 005a D3E7     		b	.L28
 621              	.L33:
 622              		.align	2
 623              	.L32:
 624 005c 00000000 		.word	.LANCHOR2
 625 0060 00000000 		.word	ACTORS_LIST_SystemRegistry
 626 0064 00000000 		.word	_impure_ptr
 627 0068 00000000 		.word	.LC4
 628 006c 14000000 		.word	.LC1
 629              	.LBE6:
 630              	.LBE5:
 631              		.cfi_endproc
ARM GAS  /tmp/ccVXdcqd.s 			page 20


 632              	.LFE141:
 634              		.section	.rodata.MEMORY_TaskInit.str1.4,"aMS",%progbits,1
 635              		.align	2
 636              	.LC5:
 637 0000 6D656D6F 		.ascii	"memoryQueue\000"
 637      72795175 
 637      65756500 
 638              		.section	.text.MEMORY_TaskInit,"ax",%progbits
 639              		.align	1
 640              		.global	MEMORY_TaskInit
 641              		.syntax unified
 642              		.thumb
 643              		.thumb_func
 644              		.fpu fpv4-sp-d16
 646              	MEMORY_TaskInit:
 647              	.LFB140:
  74:app/tasks/memory/memory.c ****   MEMORY_Actor.super.osMessageQueueId = osMessageQueueNew(DEFAULT_QUEUE_SIZE, DEFAULT_QUEUE_MESSAGE
 648              		.loc 1 74 32 view -0
 649              		.cfi_startproc
 650              		@ args = 0, pretend = 0, frame = 24
 651              		@ frame_needed = 0, uses_anonymous_args = 0
 652 0000 30B5     		push	{r4, r5, lr}
 653              	.LCFI14:
 654              		.cfi_def_cfa_offset 12
 655              		.cfi_offset 4, -12
 656              		.cfi_offset 5, -8
 657              		.cfi_offset 14, -4
 658 0002 87B0     		sub	sp, sp, #28
 659              	.LCFI15:
 660              		.cfi_def_cfa_offset 40
  75:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 661              		.loc 1 75 3 view .LVU147
  75:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 662              		.loc 1 75 130 is_stmt 0 view .LVU148
 663 0004 0024     		movs	r4, #0
 664 0006 0094     		str	r4, [sp]
 665 0008 0194     		str	r4, [sp, #4]
 666 000a 0294     		str	r4, [sp, #8]
 667 000c 0394     		str	r4, [sp, #12]
 668 000e 0494     		str	r4, [sp, #16]
 669 0010 0594     		str	r4, [sp, #20]
 670 0012 0B4B     		ldr	r3, .L36
 671 0014 0093     		str	r3, [sp]
  75:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 672              		.loc 1 75 41 view .LVU149
 673 0016 6A46     		mov	r2, sp
 674 0018 0C21     		movs	r1, #12
 675 001a 0820     		movs	r0, #8
 676 001c FFF7FEFF 		bl	osMessageQueueNew
 677              	.LVL62:
  75:app/tasks/memory/memory.c ****           .name = "memoryQueue"
 678              		.loc 1 75 39 view .LVU150
 679 0020 084D     		ldr	r5, .L36+4
 680 0022 A860     		str	r0, [r5, #8]
  78:app/tasks/memory/memory.c **** 
 681              		.loc 1 78 3 is_stmt 1 view .LVU151
  78:app/tasks/memory/memory.c **** 
ARM GAS  /tmp/ccVXdcqd.s 			page 21


 682              		.loc 1 78 35 is_stmt 0 view .LVU152
 683 0024 084A     		ldr	r2, .L36+8
 684 0026 2146     		mov	r1, r4
 685 0028 0848     		ldr	r0, .L36+12
 686 002a FFF7FEFF 		bl	osThreadNew
 687              	.LVL63:
  78:app/tasks/memory/memory.c **** 
 688              		.loc 1 78 33 view .LVU153
 689 002e 6860     		str	r0, [r5, #4]
  80:app/tasks/memory/memory.c **** 
 690              		.loc 1 80 3 is_stmt 1 view .LVU154
  80:app/tasks/memory/memory.c **** 
 691              		.loc 1 80 33 is_stmt 0 view .LVU155
 692 0030 2046     		mov	r0, r4
 693 0032 FFF7FEFF 		bl	osEventFlagsNew
 694              	.LVL64:
  80:app/tasks/memory/memory.c **** 
 695              		.loc 1 80 31 view .LVU156
 696 0036 064B     		ldr	r3, .L36+16
 697 0038 1860     		str	r0, [r3]
  82:app/tasks/memory/memory.c **** }
 698              		.loc 1 82 3 is_stmt 1 view .LVU157
  83:app/tasks/memory/memory.c **** 
 699              		.loc 1 83 1 is_stmt 0 view .LVU158
 700 003a 2846     		mov	r0, r5
 701 003c 07B0     		add	sp, sp, #28
 702              	.LCFI16:
 703              		.cfi_def_cfa_offset 12
 704              		@ sp needed
 705 003e 30BD     		pop	{r4, r5, pc}
 706              	.L37:
 707              		.align	2
 708              	.L36:
 709 0040 00000000 		.word	.LC5
 710 0044 00000000 		.word	.LANCHOR2
 711 0048 00000000 		.word	.LANCHOR3
 712 004c 00000000 		.word	MEMORY_Task
 713 0050 00000000 		.word	.LANCHOR1
 714              		.cfi_endproc
 715              	.LFE140:
 717              		.section	.text.MEMORY_SeekFreeSpaceAddress,"ax",%progbits
 718              		.align	1
 719              		.global	MEMORY_SeekFreeSpaceAddress
 720              		.syntax unified
 721              		.thumb
 722              		.thumb_func
 723              		.fpu fpv4-sp-d16
 725              	MEMORY_SeekFreeSpaceAddress:
 726              	.LFB143:
 123:app/tasks/memory/memory.c ****   uint8_t readBuff[MEMORY_LOG_ENTRY_SIZE] = {0};
 727              		.loc 1 123 44 is_stmt 1 view -0
 728              		.cfi_startproc
 729              		@ args = 0, pretend = 0, frame = 32
 730              		@ frame_needed = 0, uses_anonymous_args = 0
 731 0000 30B5     		push	{r4, r5, lr}
 732              	.LCFI17:
 733              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccVXdcqd.s 			page 22


 734              		.cfi_offset 4, -12
 735              		.cfi_offset 5, -8
 736              		.cfi_offset 14, -4
 737 0002 89B0     		sub	sp, sp, #36
 738              	.LCFI18:
 739              		.cfi_def_cfa_offset 48
 124:app/tasks/memory/memory.c ****   uint8_t emptyLogEntryTemplate[MEMORY_LOG_ENTRY_SIZE] = {0xFF};
 740              		.loc 1 124 3 view .LVU160
 124:app/tasks/memory/memory.c ****   uint8_t emptyLogEntryTemplate[MEMORY_LOG_ENTRY_SIZE] = {0xFF};
 741              		.loc 1 124 11 is_stmt 0 view .LVU161
 742 0004 0025     		movs	r5, #0
 743 0006 0495     		str	r5, [sp, #16]
 744 0008 0595     		str	r5, [sp, #20]
 745 000a 0695     		str	r5, [sp, #24]
 746 000c 0795     		str	r5, [sp, #28]
 125:app/tasks/memory/memory.c ****   const uint32_t startAddress = FAT12_BOOT_SECTOR_SIZE + 1;
 747              		.loc 1 125 3 is_stmt 1 view .LVU162
 125:app/tasks/memory/memory.c ****   const uint32_t startAddress = FAT12_BOOT_SECTOR_SIZE + 1;
 748              		.loc 1 125 11 is_stmt 0 view .LVU163
 749 000e FF23     		movs	r3, #255
 750 0010 0093     		str	r3, [sp]
 751 0012 0195     		str	r5, [sp, #4]
 752 0014 0295     		str	r5, [sp, #8]
 753 0016 0395     		str	r5, [sp, #12]
 126:app/tasks/memory/memory.c ****   const uint8_t stepSize = MEMORY_LOG_ENTRY_SIZE;
 754              		.loc 1 126 3 is_stmt 1 view .LVU164
 755              	.LVL65:
 127:app/tasks/memory/memory.c **** 
 756              		.loc 1 127 3 view .LVU165
 129:app/tasks/memory/memory.c ****   uint32_t stepNumber = 0;
 757              		.loc 1 129 3 view .LVU166
 130:app/tasks/memory/memory.c ****   uint32_t addr = 0;
 758              		.loc 1 130 3 view .LVU167
 131:app/tasks/memory/memory.c ****   bool isFreeSpaceForLog = false; // does read log entry contains data other than 0xFF (0xFF means 
 759              		.loc 1 131 3 view .LVU168
 132:app/tasks/memory/memory.c **** 
 760              		.loc 1 132 3 view .LVU169
 135:app/tasks/memory/memory.c **** 
 761              		.loc 1 135 3 view .LVU170
 762 0018 4FF0FF33 		mov	r3, #-1
 763 001c 0093     		str	r3, [sp]
 764 001e 0193     		str	r3, [sp, #4]
 765 0020 0293     		str	r3, [sp, #8]
 766 0022 0393     		str	r3, [sp, #12]
 767              	.LVL66:
 768              	.L40:
 137:app/tasks/memory/memory.c ****     // address offset from FS boot sector
 769              		.loc 1 137 3 view .LVU171
 139:app/tasks/memory/memory.c ****     addr = startAddress + offset;
 770              		.loc 1 139 5 view .LVU172
 140:app/tasks/memory/memory.c **** 
 771              		.loc 1 140 5 view .LVU173
 140:app/tasks/memory/memory.c **** 
 772              		.loc 1 140 10 is_stmt 0 view .LVU174
 773 0024 41F20124 		movw	r4, #4609
 774 0028 04EB0514 		add	r4, r4, r5, lsl #4
 775              	.LVL67:
ARM GAS  /tmp/ccVXdcqd.s 			page 23


 143:app/tasks/memory/memory.c **** 
 776              		.loc 1 143 5 is_stmt 1 view .LVU175
 777 002c 1023     		movs	r3, #16
 778 002e 2246     		mov	r2, r4
 779 0030 0DEB0301 		add	r1, sp, r3
 780 0034 0848     		ldr	r0, .L42
 781 0036 FFF7FEFF 		bl	W25Q_ReadData
 782              	.LVL68:
 146:app/tasks/memory/memory.c **** 
 783              		.loc 1 146 5 view .LVU176
 146:app/tasks/memory/memory.c **** 
 784              		.loc 1 146 52 is_stmt 0 view .LVU177
 785 003a 1022     		movs	r2, #16
 786 003c 6946     		mov	r1, sp
 787 003e 0DEB0200 		add	r0, sp, r2
 788 0042 FFF7FEFF 		bl	memcmp
 789              	.LVL69:
 148:app/tasks/memory/memory.c ****       return addr;
 790              		.loc 1 148 5 is_stmt 1 view .LVU178
 148:app/tasks/memory/memory.c ****       return addr;
 791              		.loc 1 148 8 is_stmt 0 view .LVU179
 792 0046 18B1     		cbz	r0, .L38
 152:app/tasks/memory/memory.c **** 
 793              		.loc 1 152 5 is_stmt 1 view .LVU180
 152:app/tasks/memory/memory.c **** 
 794              		.loc 1 152 15 is_stmt 0 view .LVU181
 795 0048 0135     		adds	r5, r5, #1
 796              	.LVL70:
 154:app/tasks/memory/memory.c **** 
 797              		.loc 1 154 11 is_stmt 1 view .LVU182
 154:app/tasks/memory/memory.c **** 
 798              		.loc 1 154 3 is_stmt 0 view .LVU183
 799 004a B4F5000F 		cmp	r4, #8388608
 800 004e E9D3     		bcc	.L40
 801              	.LVL71:
 802              	.L38:
 157:app/tasks/memory/memory.c **** 
 803              		.loc 1 157 1 view .LVU184
 804 0050 2046     		mov	r0, r4
 805              	.LVL72:
 157:app/tasks/memory/memory.c **** 
 806              		.loc 1 157 1 view .LVU185
 807 0052 09B0     		add	sp, sp, #36
 808              	.LCFI19:
 809              		.cfi_def_cfa_offset 12
 810              		@ sp needed
 811 0054 30BD     		pop	{r4, r5, pc}
 812              	.LVL73:
 813              	.L43:
 157:app/tasks/memory/memory.c **** 
 814              		.loc 1 157 1 view .LVU186
 815 0056 00BF     		.align	2
 816              	.L42:
 817 0058 00000000 		.word	.LANCHOR0
 818              		.cfi_endproc
 819              	.LFE143:
 821              		.section	.rodata.handleInit.str1.4,"aMS",%progbits,1
ARM GAS  /tmp/ccVXdcqd.s 			page 24


 822              		.align	2
 823              	.LC6:
 824 0000 57323551 		.ascii	"W25Q NOR MF ID: 0x%x, Device ID: 0x%x\012\000"
 824      204E4F52 
 824      204D4620 
 824      49443A20 
 824      30782578 
 825 0027 00       		.align	2
 826              	.LC7:
 827 0028 46697273 		.ascii	"First free space address: %x\012\000"
 827      74206672 
 827      65652073 
 827      70616365 
 827      20616464 
 828 0046 0000     		.align	2
 829              	.LC8:
 830 0048 4D656D6F 		.ascii	"Memory task initialized\012\000"
 830      72792074 
 830      61736B20 
 830      696E6974 
 830      69616C69 
 831              		.section	.text.handleInit,"ax",%progbits
 832              		.align	1
 833              		.syntax unified
 834              		.thumb
 835              		.thumb_func
 836              		.fpu fpv4-sp-d16
 838              	handleInit:
 839              	.LVL74:
 840              	.LFB145:
 190:app/tasks/memory/memory.c ****   if (GLOBAL_CMD_INITIALIZE == message->event) {
 841              		.loc 1 190 72 is_stmt 1 view -0
 842              		.cfi_startproc
 843              		@ args = 0, pretend = 0, frame = 16
 844              		@ frame_needed = 0, uses_anonymous_args = 0
 191:app/tasks/memory/memory.c ****     uint8_t norFlashID[W25Q_ID_SIZE] = {0x00, 0x00};
 845              		.loc 1 191 3 view .LVU188
 191:app/tasks/memory/memory.c ****     uint8_t norFlashID[W25Q_ID_SIZE] = {0x00, 0x00};
 846              		.loc 1 191 39 is_stmt 0 view .LVU189
 847 0000 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 191:app/tasks/memory/memory.c ****     uint8_t norFlashID[W25Q_ID_SIZE] = {0x00, 0x00};
 848              		.loc 1 191 6 view .LVU190
 849 0002 C52B     		cmp	r3, #197
 850 0004 00D0     		beq	.L54
 851              	.LVL75:
 230:app/tasks/memory/memory.c **** 
 852              		.loc 1 230 1 view .LVU191
 853 0006 7047     		bx	lr
 854              	.LVL76:
 855              	.L54:
 190:app/tasks/memory/memory.c ****   if (GLOBAL_CMD_INITIALIZE == message->event) {
 856              		.loc 1 190 72 view .LVU192
 857 0008 F0B5     		push	{r4, r5, r6, r7, lr}
 858              	.LCFI20:
 859              		.cfi_def_cfa_offset 20
 860              		.cfi_offset 4, -20
 861              		.cfi_offset 5, -16
ARM GAS  /tmp/ccVXdcqd.s 			page 25


 862              		.cfi_offset 6, -12
 863              		.cfi_offset 7, -8
 864              		.cfi_offset 14, -4
 865 000a 85B0     		sub	sp, sp, #20
 866              	.LCFI21:
 867              		.cfi_def_cfa_offset 40
 868 000c 0546     		mov	r5, r0
 869              	.LBB7:
 192:app/tasks/memory/memory.c **** 
 870              		.loc 1 192 5 is_stmt 1 view .LVU193
 192:app/tasks/memory/memory.c **** 
 871              		.loc 1 192 13 is_stmt 0 view .LVU194
 872 000e 0023     		movs	r3, #0
 873 0010 ADF80030 		strh	r3, [sp]	@ movhi
 195:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 874              		.loc 1 195 5 is_stmt 1 view .LVU195
 195:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 875              		.loc 1 195 27 is_stmt 0 view .LVU196
 876 0014 2748     		ldr	r0, .L58
 877              	.LVL77:
 195:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 878              		.loc 1 195 27 view .LVU197
 879 0016 FFF7FEFF 		bl	W25Q_WakeUp
 880              	.LVL78:
 196:app/tasks/memory/memory.c **** 
 881              		.loc 1 196 5 is_stmt 1 view .LVU198
 196:app/tasks/memory/memory.c **** 
 882              		.loc 1 196 8 is_stmt 0 view .LVU199
 883 001a 18B1     		cbz	r0, .L55
 196:app/tasks/memory/memory.c **** 
 884              		.loc 1 196 34 view .LVU200
 885 001c 4FF0FF30 		mov	r0, #-1
 886              	.LVL79:
 887              	.L44:
 196:app/tasks/memory/memory.c **** 
 888              		.loc 1 196 34 view .LVU201
 889              	.LBE7:
 230:app/tasks/memory/memory.c **** 
 890              		.loc 1 230 1 view .LVU202
 891 0020 05B0     		add	sp, sp, #20
 892              	.LCFI22:
 893              		.cfi_remember_state
 894              		.cfi_def_cfa_offset 20
 895              		@ sp needed
 896 0022 F0BD     		pop	{r4, r5, r6, r7, pc}
 897              	.LVL80:
 898              	.L55:
 899              	.LCFI23:
 900              		.cfi_restore_state
 901              	.LBB8:
 199:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 902              		.loc 1 199 5 is_stmt 1 view .LVU203
 199:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 903              		.loc 1 199 16 is_stmt 0 view .LVU204
 904 0024 6946     		mov	r1, sp
 905 0026 2348     		ldr	r0, .L58
 906              	.LVL81:
ARM GAS  /tmp/ccVXdcqd.s 			page 26


 199:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 907              		.loc 1 199 16 view .LVU205
 908 0028 FFF7FEFF 		bl	W25Q_ReadID
 909              	.LVL82:
 200:app/tasks/memory/memory.c **** 
 910              		.loc 1 200 5 is_stmt 1 view .LVU206
 200:app/tasks/memory/memory.c **** 
 911              		.loc 1 200 8 is_stmt 0 view .LVU207
 912 002c 10B1     		cbz	r0, .L56
 200:app/tasks/memory/memory.c **** 
 913              		.loc 1 200 34 view .LVU208
 914 002e 4FF0FF30 		mov	r0, #-1
 915              	.LVL83:
 200:app/tasks/memory/memory.c **** 
 916              		.loc 1 200 34 view .LVU209
 917 0032 F5E7     		b	.L44
 918              	.LVL84:
 919              	.L56:
 203:app/tasks/memory/memory.c ****     #endif
 920              		.loc 1 203 9 is_stmt 1 view .LVU210
 203:app/tasks/memory/memory.c ****     #endif
 921              		.loc 1 203 17 is_stmt 0 view .LVU211
 922 0034 204B     		ldr	r3, .L58+4
 923 0036 1868     		ldr	r0, [r3]
 924              	.LVL85:
 203:app/tasks/memory/memory.c ****     #endif
 925              		.loc 1 203 9 view .LVU212
 926 0038 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 927 003c 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 928 0040 1E49     		ldr	r1, .L58+8
 929 0042 8068     		ldr	r0, [r0, #8]
 930 0044 FFF7FEFF 		bl	fprintf
 931              	.LVL86:
 211:app/tasks/memory/memory.c ****     MEMORY_Actor.logFileTailAddress = freeSpaceAddress;
 932              		.loc 1 211 5 is_stmt 1 view .LVU213
 211:app/tasks/memory/memory.c ****     MEMORY_Actor.logFileTailAddress = freeSpaceAddress;
 933              		.loc 1 211 33 is_stmt 0 view .LVU214
 934 0048 FFF7FEFF 		bl	MEMORY_SeekFreeSpaceAddress
 935              	.LVL87:
 936 004c 0646     		mov	r6, r0
 937              	.LVL88:
 212:app/tasks/memory/memory.c **** 
 938              		.loc 1 212 5 is_stmt 1 view .LVU215
 212:app/tasks/memory/memory.c **** 
 939              		.loc 1 212 37 is_stmt 0 view .LVU216
 940 004e 1C4B     		ldr	r3, .L58+12
 941 0050 5861     		str	r0, [r3, #20]
 215:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 942              		.loc 1 215 5 is_stmt 1 view .LVU217
 215:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 943              		.loc 1 215 16 is_stmt 0 view .LVU218
 944 0052 1848     		ldr	r0, .L58
 945              	.LVL89:
 215:app/tasks/memory/memory.c ****     if (ioStatus != osOK) return osError;
 946              		.loc 1 215 16 view .LVU219
 947 0054 FFF7FEFF 		bl	W25Q_Sleep
 948              	.LVL90:
ARM GAS  /tmp/ccVXdcqd.s 			page 27


 216:app/tasks/memory/memory.c **** 
 949              		.loc 1 216 5 is_stmt 1 view .LVU220
 216:app/tasks/memory/memory.c **** 
 950              		.loc 1 216 8 is_stmt 0 view .LVU221
 951 0058 10B1     		cbz	r0, .L57
 216:app/tasks/memory/memory.c **** 
 952              		.loc 1 216 34 view .LVU222
 953 005a 4FF0FF30 		mov	r0, #-1
 954              	.LVL91:
 216:app/tasks/memory/memory.c **** 
 955              		.loc 1 216 34 view .LVU223
 956 005e DFE7     		b	.L44
 957              	.LVL92:
 958              	.L57:
 219:app/tasks/memory/memory.c ****     osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_INITIALIZE_SUCCESS, .payload.value = MEMO
 959              		.loc 1 219 5 is_stmt 1 view .LVU224
 219:app/tasks/memory/memory.c ****     osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_INITIALIZE_SUCCESS, .payload.value = MEMO
 960              		.loc 1 219 67 is_stmt 0 view .LVU225
 961 0060 184B     		ldr	r3, .L58+16
 962 0062 5B68     		ldr	r3, [r3, #4]
 219:app/tasks/memory/memory.c ****     osMessageQueuePut(evManagerQueue, &(message_t){GLOBAL_INITIALIZE_SUCCESS, .payload.value = MEMO
 963              		.loc 1 219 24 view .LVU226
 964 0064 9868     		ldr	r0, [r3, #8]
 965              	.LVL93:
 220:app/tasks/memory/memory.c **** 
 966              		.loc 1 220 5 is_stmt 1 view .LVU227
 220:app/tasks/memory/memory.c **** 
 967              		.loc 1 220 51 is_stmt 0 view .LVU228
 968 0066 0024     		movs	r4, #0
 969 0068 0194     		str	r4, [sp, #4]
 970 006a 0294     		str	r4, [sp, #8]
 971 006c 0394     		str	r4, [sp, #12]
 972 006e C623     		movs	r3, #198
 973 0070 8DF80430 		strb	r3, [sp, #4]
 974 0074 0823     		movs	r3, #8
 975 0076 0293     		str	r3, [sp, #8]
 220:app/tasks/memory/memory.c **** 
 976              		.loc 1 220 5 view .LVU229
 977 0078 2346     		mov	r3, r4
 978 007a 2246     		mov	r2, r4
 979 007c 01A9     		add	r1, sp, #4
 980 007e FFF7FEFF 		bl	osMessageQueuePut
 981              	.LVL94:
 223:app/tasks/memory/memory.c ****         fprintf(stdout, "Memory task initialized\n");
 982              		.loc 1 223 9 is_stmt 1 view .LVU230
 223:app/tasks/memory/memory.c ****         fprintf(stdout, "Memory task initialized\n");
 983              		.loc 1 223 17 is_stmt 0 view .LVU231
 984 0082 0D4F     		ldr	r7, .L58+4
 985 0084 3B68     		ldr	r3, [r7]
 223:app/tasks/memory/memory.c ****         fprintf(stdout, "Memory task initialized\n");
 986              		.loc 1 223 9 view .LVU232
 987 0086 3246     		mov	r2, r6
 988 0088 0F49     		ldr	r1, .L58+20
 989 008a 9868     		ldr	r0, [r3, #8]
 990 008c FFF7FEFF 		bl	fprintf
 991              	.LVL95:
 224:app/tasks/memory/memory.c ****     #endif
ARM GAS  /tmp/ccVXdcqd.s 			page 28


 992              		.loc 1 224 9 is_stmt 1 view .LVU233
 224:app/tasks/memory/memory.c ****     #endif
 993              		.loc 1 224 17 is_stmt 0 view .LVU234
 994 0090 3B68     		ldr	r3, [r7]
 224:app/tasks/memory/memory.c ****     #endif
 995              		.loc 1 224 9 view .LVU235
 996 0092 9B68     		ldr	r3, [r3, #8]
 997 0094 1822     		movs	r2, #24
 998 0096 0121     		movs	r1, #1
 999 0098 0C48     		ldr	r0, .L58+24
 1000 009a FFF7FEFF 		bl	fwrite
 1001              	.LVL96:
 227:app/tasks/memory/memory.c ****     return osOK;
 1002              		.loc 1 227 5 is_stmt 1 view .LVU236
 227:app/tasks/memory/memory.c ****     return osOK;
 1003              		.loc 1 227 5 view .LVU237
 1004 009e 0123     		movs	r3, #1
 1005 00a0 2B74     		strb	r3, [r5, #16]
 227:app/tasks/memory/memory.c ****     return osOK;
 1006              		.loc 1 227 5 view .LVU238
 1007 00a2 3868     		ldr	r0, [r7]
 1008 00a4 0A4B     		ldr	r3, .L58+28
 1009 00a6 2A68     		ldr	r2, [r5]
 1010 00a8 0A49     		ldr	r1, .L58+32
 1011 00aa 8068     		ldr	r0, [r0, #8]
 1012 00ac FFF7FEFF 		bl	fprintf
 1013              	.LVL97:
 227:app/tasks/memory/memory.c ****     return osOK;
 1014              		.loc 1 227 5 view .LVU239
 227:app/tasks/memory/memory.c ****     return osOK;
 1015              		.loc 1 227 39 view .LVU240
 228:app/tasks/memory/memory.c ****   }
 1016              		.loc 1 228 5 view .LVU241
 228:app/tasks/memory/memory.c ****   }
 1017              		.loc 1 228 12 is_stmt 0 view .LVU242
 1018 00b0 2046     		mov	r0, r4
 1019 00b2 B5E7     		b	.L44
 1020              	.L59:
 1021              		.align	2
 1022              	.L58:
 1023 00b4 00000000 		.word	.LANCHOR0
 1024 00b8 00000000 		.word	_impure_ptr
 1025 00bc 00000000 		.word	.LC6
 1026 00c0 00000000 		.word	.LANCHOR2
 1027 00c4 00000000 		.word	ACTORS_LIST_SystemRegistry
 1028 00c8 28000000 		.word	.LC7
 1029 00cc 48000000 		.word	.LC8
 1030 00d0 00000000 		.word	.LC0
 1031 00d4 14000000 		.word	.LC1
 1032              	.LBE8:
 1033              		.cfi_endproc
 1034              	.LFE145:
 1036              		.section	.text.handleMemoryFSM,"ax",%progbits
 1037              		.align	1
 1038              		.syntax unified
 1039              		.thumb
 1040              		.thumb_func
ARM GAS  /tmp/ccVXdcqd.s 			page 29


 1041              		.fpu fpv4-sp-d16
 1043              	handleMemoryFSM:
 1044              	.LVL98:
 1045              	.LFB142:
 108:app/tasks/memory/memory.c ****   switch (this->state) {
 1046              		.loc 1 108 77 is_stmt 1 view -0
 1047              		.cfi_startproc
 1048              		@ args = 0, pretend = 0, frame = 0
 1049              		@ frame_needed = 0, uses_anonymous_args = 0
 108:app/tasks/memory/memory.c ****   switch (this->state) {
 1050              		.loc 1 108 77 is_stmt 0 view .LVU244
 1051 0000 08B5     		push	{r3, lr}
 1052              	.LCFI24:
 1053              		.cfi_def_cfa_offset 8
 1054              		.cfi_offset 3, -8
 1055              		.cfi_offset 14, -4
 109:app/tasks/memory/memory.c ****     case MEMORY_NO_STATE:
 1056              		.loc 1 109 3 is_stmt 1 view .LVU245
 109:app/tasks/memory/memory.c ****     case MEMORY_NO_STATE:
 1057              		.loc 1 109 15 is_stmt 0 view .LVU246
 1058 0002 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 109:app/tasks/memory/memory.c ****     case MEMORY_NO_STATE:
 1059              		.loc 1 109 3 view .LVU247
 1060 0004 012B     		cmp	r3, #1
 1061 0006 07D0     		beq	.L61
 1062 0008 022B     		cmp	r3, #2
 1063 000a 08D0     		beq	.L62
 1064 000c 0BB1     		cbz	r3, .L66
 1065 000e 0020     		movs	r0, #0
 1066              	.LVL99:
 1067              	.L60:
 121:app/tasks/memory/memory.c **** 
 1068              		.loc 1 121 1 view .LVU248
 1069 0010 08BD     		pop	{r3, pc}
 1070              	.LVL100:
 1071              	.L66:
 111:app/tasks/memory/memory.c ****     case MEMORY_SLEEP_STATE:
 1072              		.loc 1 111 7 is_stmt 1 view .LVU249
 111:app/tasks/memory/memory.c ****     case MEMORY_SLEEP_STATE:
 1073              		.loc 1 111 14 is_stmt 0 view .LVU250
 1074 0012 FFF7FEFF 		bl	handleInit
 1075              	.LVL101:
 111:app/tasks/memory/memory.c ****     case MEMORY_SLEEP_STATE:
 1076              		.loc 1 111 14 view .LVU251
 1077 0016 FBE7     		b	.L60
 1078              	.LVL102:
 1079              	.L61:
 113:app/tasks/memory/memory.c ****     case MEMORY_WRITE_STATE:
 1080              		.loc 1 113 7 is_stmt 1 view .LVU252
 113:app/tasks/memory/memory.c ****     case MEMORY_WRITE_STATE:
 1081              		.loc 1 113 14 is_stmt 0 view .LVU253
 1082 0018 FFF7FEFF 		bl	handleSleep
 1083              	.LVL103:
 113:app/tasks/memory/memory.c ****     case MEMORY_WRITE_STATE:
 1084              		.loc 1 113 14 view .LVU254
 1085 001c F8E7     		b	.L60
 1086              	.LVL104:
ARM GAS  /tmp/ccVXdcqd.s 			page 30


 1087              	.L62:
 115:app/tasks/memory/memory.c ****     default:
 1088              		.loc 1 115 7 is_stmt 1 view .LVU255
 115:app/tasks/memory/memory.c ****     default:
 1089              		.loc 1 115 14 is_stmt 0 view .LVU256
 1090 001e FFF7FEFF 		bl	handleWrite
 1091              	.LVL105:
 115:app/tasks/memory/memory.c ****     default:
 1092              		.loc 1 115 14 view .LVU257
 1093 0022 F5E7     		b	.L60
 1094              		.cfi_endproc
 1095              	.LFE142:
 1097              		.global	MEMORY_W25QHandle
 1098              		.global	memoryTaskDescription
 1099              		.section	.rodata.str1.4,"aMS",%progbits,1
 1100              		.align	2
 1101              	.LC9:
 1102 0000 6D656D6F 		.ascii	"memoryTask\000"
 1102      72795461 
 1102      736B00
 1103              		.global	memoryTaskControlBlock
 1104              		.global	memoryTaskBuffer
 1105              		.global	MEMORY_Actor
 1106              		.global	measurementsReadyEventFlags
 1107              		.section	.bss.measurementsReadyEventFlags,"aw",%nobits
 1108              		.align	2
 1109              		.set	.LANCHOR1,. + 0
 1112              	measurementsReadyEventFlags:
 1113 0000 00000000 		.space	4
 1114              		.section	.bss.memoryTaskBuffer,"aw",%nobits
 1115              		.align	2
 1118              	memoryTaskBuffer:
 1119 0000 00000000 		.space	512
 1119      00000000 
 1119      00000000 
 1119      00000000 
 1119      00000000 
 1120              		.section	.bss.memoryTaskControlBlock,"aw",%nobits
 1121              		.align	2
 1124              	memoryTaskControlBlock:
 1125 0000 00000000 		.space	92
 1125      00000000 
 1125      00000000 
 1125      00000000 
 1125      00000000 
 1126              		.section	.data.MEMORY_Actor,"aw"
 1127              		.align	2
 1128              		.set	.LANCHOR2,. + 0
 1131              	MEMORY_Actor:
 1132 0000 08000000 		.word	8
 1133 0004 00000000 		.word	0
 1134 0008 00000000 		.word	0
 1135 000c 00000000 		.word	handleMemoryFSM
 1136 0010 00       		.byte	0
 1137 0011 000000   		.space	3
 1138 0014 01120000 		.word	4609
 1139              		.section	.data.MEMORY_W25QHandle,"aw"
ARM GAS  /tmp/ccVXdcqd.s 			page 31


 1140              		.align	2
 1141              		.set	.LANCHOR0,. + 0
 1144              	MEMORY_W25QHandle:
 1145 0000 00000000 		.word	hqspi
 1146 0004 00000000 		.space	8
 1146      00000000 
 1147 000c 00008000 		.word	8388608
 1148 0010 00100000 		.word	4096
 1149 0014 00010000 		.word	256
 1150 0018 00010000 		.word	256
 1151 001c 00800000 		.word	32768
 1152 0020 00000100 		.word	65536
 1153 0024 00       		.byte	0
 1154 0025 000000   		.space	3
 1155 0028 FFFFFF00 		.word	16777215
 1156              		.section	.rodata.memoryTaskDescription,"a"
 1157              		.align	2
 1158              		.set	.LANCHOR3,. + 0
 1161              	memoryTaskDescription:
 1162 0000 00000000 		.word	.LC9
 1163 0004 00000000 		.space	4
 1164 0008 00000000 		.word	memoryTaskControlBlock
 1165 000c 5C000000 		.word	92
 1166 0010 00000000 		.word	memoryTaskBuffer
 1167 0014 00020000 		.word	512
 1168 0018 18000000 		.word	24
 1169 001c 00000000 		.space	8
 1169      00000000 
 1170              		.text
 1171              	.Letext0:
 1172              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 1173              		.file 3 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 1174              		.file 4 "/usr/include/newlib/sys/_types.h"
 1175              		.file 5 "/usr/include/newlib/sys/reent.h"
 1176              		.file 6 "/usr/include/newlib/sys/lock.h"
 1177              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 1178              		.file 8 "/usr/include/newlib/sys/types.h"
 1179              		.file 9 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l412xx.h"
 1180              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1181              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1182              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_qspi.h"
 1183              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 1184              		.file 14 "app/core/actor/../../config/events_list/events_list.h"
 1185              		.file 15 "app/core/actor/../../config/actors_list/actors_list.h"
 1186              		.file 16 "app/core/actor/actor.h"
 1187              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 1188              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 1189              		.file 19 "app/tasks/temperature_humidity_sensor/temperature_humidity_sensor.h"
 1190              		.file 20 "app/tasks/light_sensor/light_sensor.h"
 1191              		.file 21 "Core/Inc/quadspi.h"
 1192              		.file 22 "app/drivers/w25q/w25q.h"
 1193              		.file 23 "app/tasks/memory/memory.h"
 1194              		.file 24 "app/core/cron/cron.h"
 1195              		.file 25 "/usr/include/newlib/stdio.h"
 1196              		.file 26 "/usr/include/newlib/string.h"
 1197              		.file 27 "<built-in>"
ARM GAS  /tmp/ccVXdcqd.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 memory.c
     /tmp/ccVXdcqd.s:18     .rodata.handleWrite.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:28     .text.handleWrite:0000000000000000 $t
     /tmp/ccVXdcqd.s:35     .text.handleWrite:0000000000000000 handleWrite
     /tmp/ccVXdcqd.s:122    .text.handleWrite:0000000000000044 $d
     /tmp/ccVXdcqd.s:131    .text.publishMemoryWriteOnMeasurementsReady:0000000000000000 $t
     /tmp/ccVXdcqd.s:137    .text.publishMemoryWriteOnMeasurementsReady:0000000000000000 publishMemoryWriteOnMeasurementsReady
     /tmp/ccVXdcqd.s:204    .text.publishMemoryWriteOnMeasurementsReady:000000000000003c $d
     /tmp/ccVXdcqd.s:209    .rodata.appendMeasurementsToNORFlashLogTail.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:215    .text.appendMeasurementsToNORFlashLogTail:0000000000000000 $t
     /tmp/ccVXdcqd.s:221    .text.appendMeasurementsToNORFlashLogTail:0000000000000000 appendMeasurementsToNORFlashLogTail
     /tmp/ccVXdcqd.s:311    .text.appendMeasurementsToNORFlashLogTail:0000000000000050 $d
     /tmp/ccVXdcqd.s:318    .text.handleSleep:0000000000000000 $t
     /tmp/ccVXdcqd.s:324    .text.handleSleep:0000000000000000 handleSleep
     /tmp/ccVXdcqd.s:514    .text.handleSleep:00000000000000bc $d
     /tmp/ccVXdcqd.s:525    .rodata.MEMORY_Task.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:529    .text.MEMORY_Task:0000000000000000 $t
     /tmp/ccVXdcqd.s:536    .text.MEMORY_Task:0000000000000000 MEMORY_Task
     /tmp/ccVXdcqd.s:624    .text.MEMORY_Task:000000000000005c $d
     /tmp/ccVXdcqd.s:635    .rodata.MEMORY_TaskInit.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:639    .text.MEMORY_TaskInit:0000000000000000 $t
     /tmp/ccVXdcqd.s:646    .text.MEMORY_TaskInit:0000000000000000 MEMORY_TaskInit
     /tmp/ccVXdcqd.s:709    .text.MEMORY_TaskInit:0000000000000040 $d
     /tmp/ccVXdcqd.s:718    .text.MEMORY_SeekFreeSpaceAddress:0000000000000000 $t
     /tmp/ccVXdcqd.s:725    .text.MEMORY_SeekFreeSpaceAddress:0000000000000000 MEMORY_SeekFreeSpaceAddress
     /tmp/ccVXdcqd.s:817    .text.MEMORY_SeekFreeSpaceAddress:0000000000000058 $d
     /tmp/ccVXdcqd.s:822    .rodata.handleInit.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:832    .text.handleInit:0000000000000000 $t
     /tmp/ccVXdcqd.s:838    .text.handleInit:0000000000000000 handleInit
     /tmp/ccVXdcqd.s:1023   .text.handleInit:00000000000000b4 $d
     /tmp/ccVXdcqd.s:1037   .text.handleMemoryFSM:0000000000000000 $t
     /tmp/ccVXdcqd.s:1043   .text.handleMemoryFSM:0000000000000000 handleMemoryFSM
     /tmp/ccVXdcqd.s:1144   .data.MEMORY_W25QHandle:0000000000000000 MEMORY_W25QHandle
     /tmp/ccVXdcqd.s:1161   .rodata.memoryTaskDescription:0000000000000000 memoryTaskDescription
     /tmp/ccVXdcqd.s:1100   .rodata.str1.4:0000000000000000 $d
     /tmp/ccVXdcqd.s:1124   .bss.memoryTaskControlBlock:0000000000000000 memoryTaskControlBlock
     /tmp/ccVXdcqd.s:1118   .bss.memoryTaskBuffer:0000000000000000 memoryTaskBuffer
     /tmp/ccVXdcqd.s:1131   .data.MEMORY_Actor:0000000000000000 MEMORY_Actor
     /tmp/ccVXdcqd.s:1112   .bss.measurementsReadyEventFlags:0000000000000000 measurementsReadyEventFlags
     /tmp/ccVXdcqd.s:1108   .bss.measurementsReadyEventFlags:0000000000000000 $d
     /tmp/ccVXdcqd.s:1115   .bss.memoryTaskBuffer:0000000000000000 $d
     /tmp/ccVXdcqd.s:1121   .bss.memoryTaskControlBlock:0000000000000000 $d
     /tmp/ccVXdcqd.s:1127   .data.MEMORY_Actor:0000000000000000 $d
     /tmp/ccVXdcqd.s:1140   .data.MEMORY_W25QHandle:0000000000000000 $d
     /tmp/ccVXdcqd.s:1157   .rodata.memoryTaskDescription:0000000000000000 $d

UNDEFINED SYMBOLS
fprintf
W25Q_Sleep
_impure_ptr
osEventFlagsGet
osEventFlagsClear
osMessageQueuePut
CRON_GetCurrentUnixTimestamp
ACTORS_LIST_SystemRegistry
osEventFlagsSet
ARM GAS  /tmp/ccVXdcqd.s 			page 33


W25Q_WakeUp
osMessageQueueGet
osMessageQueueNew
osThreadNew
osEventFlagsNew
W25Q_ReadData
memcmp
W25Q_ReadID
fwrite
hqspi
